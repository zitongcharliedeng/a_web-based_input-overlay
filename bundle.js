var un=Object.defineProperty;var a=(e,t)=>un(e,"name",{value:t,configurable:!0});a(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}a(n,"getFetchOpts");function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}a(i,"processPreload")},"polyfill")();const b={x:0,y:0,buttons:{0:!1,1:!1,2:!1,3:!1,4:!1},clicks:{0:!1,1:!1,2:!1,3:!1,4:!1},wheelDelta:{x:0,y:0},wheelEvents:{up:!1,down:!1},update(e){this.wheelDelta.x*=.7*e,this.wheelDelta.y*=.7*e,this.clicks[0]=!1,this.clicks[1]=!1,this.clicks[2]=!1,this.clicks[3]=!1,this.clicks[4]=!1,this.wheelEvents.up=!1,this.wheelEvents.down=!1}},se=document.getElementById("canvas");se.addEventListener("mousedown",e=>{b.x=e.x,b.y=e.y;const t=e.button;b.buttons[t]===!1&&(b.buttons[t]=!0,b.clicks[t]=!0)});se.addEventListener("mouseup",e=>{b.x=e.x,b.y=e.y;const t=e.button;b.buttons[t]===!0&&(b.buttons[t]=!1)});se.addEventListener("mousemove",e=>{b.x=e.x,b.y=e.y});se.addEventListener("wheel",e=>{b.wheelDelta.x=e.deltaX,b.wheelDelta.y=e.deltaY,e.deltaY<0?b.wheelEvents.up=!0:e.deltaY>0&&(b.wheelEvents.down=!0)});se.addEventListener("contextmenu",e=>{e.preventDefault()});const ie={};document.addEventListener("keydown",function(e){ie[e.code]!==!0&&(ie[e.code]=!0)});document.addEventListener("keyup",function(e){ie[e.code]===!0&&(ie[e.code]=!1)});const dt={30:"KeyA",48:"KeyB",46:"KeyC",32:"KeyD",18:"KeyE",33:"KeyF",34:"KeyG",35:"KeyH",23:"KeyI",36:"KeyJ",37:"KeyK",38:"KeyL",50:"KeyM",49:"KeyN",24:"KeyO",25:"KeyP",16:"KeyQ",19:"KeyR",31:"KeyS",20:"KeyT",22:"KeyU",47:"KeyV",17:"KeyW",45:"KeyX",21:"KeyY",44:"KeyZ",2:"Digit1",3:"Digit2",4:"Digit3",5:"Digit4",6:"Digit5",7:"Digit6",8:"Digit7",9:"Digit8",10:"Digit9",11:"Digit0",57:"Space",28:"Enter",1:"Escape",14:"Backspace",15:"Tab",42:"ShiftLeft",54:"ShiftRight",29:"ControlLeft",97:"ControlRight",56:"AltLeft",100:"AltRight",103:"ArrowUp",108:"ArrowDown",105:"ArrowLeft",106:"ArrowRight",57416:"ArrowUp",57424:"ArrowDown",57419:"ArrowLeft",57421:"ArrowRight"};let fe=null,ht=!1;function ln(){const e=navigator.getGamepads(),t=Array.from(e);return fe&&fe.connected&&(t[0]=fe),t}a(ln,"getMergedGamepads");function dn(){if(window.electronAPI){if(ht){console.warn("[ElectronBridge] Already initialized, skipping");return}ht=!0,window.electronAPI.onGlobalKeyDown(e=>{const t=dt[e.keycode];t&&document.dispatchEvent(new KeyboardEvent("keydown",{code:t,bubbles:!0,cancelable:!0}))}),window.electronAPI.onGlobalKeyUp(e=>{const t=dt[e.keycode];t&&document.dispatchEvent(new KeyboardEvent("keyup",{code:t,bubbles:!0,cancelable:!0}))}),window.electronAPI.onGlobalGamepadState(e=>{fe={axes:e.axes,buttons:e.buttons,connected:e.connected,timestamp:e.timestamp,id:"SDL2 Gamepad (sdl2-gamecontroller)",index:0,mapping:"standard"}}),window.electronAPI.onGlobalMouseDown(e=>{const n={1:0,3:1,2:2,4:3,5:4}[e.button];n!==void 0&&window.mouse&&window.mouse.buttons&&window.mouse.buttons[n]===!1&&(window.mouse.buttons[n]=!0,window.mouse.clicks[n]=!0)}),window.electronAPI.onGlobalMouseUp(e=>{const n={1:0,3:1,2:2,4:3,5:4}[e.button];n!==void 0&&window.mouse&&window.mouse.buttons&&window.mouse.buttons[n]===!0&&(window.mouse.buttons[n]=!1)}),window.electronAPI.onGlobalMouseMove(e=>{window.mouse&&(window.mouse.x=e.x,window.mouse.y=e.y)}),window.electronAPI.onGlobalWheel(e=>{window.mouse&&window.mouse.wheelDelta&&(window.mouse.wheelDelta.y=-e.rotation),window.mouse&&window.mouse.wheelEvents&&(e.rotation<0?window.mouse.wheelEvents.up=!0:e.rotation>0&&(window.mouse.wheelEvents.down=!0))})}}a(dn,"initializeElectronBridges");const qe=class qe{constructor(t){this.objArrayIdx=t}};a(qe,"CanvasObjectInstance");let Y=qe;function ee(e,t){t.lineWidth!==void 0&&(e.lineWidth=t.lineWidth),t.strokeStyle!==void 0&&(e.strokeStyle=t.strokeStyle),t.fillStyle!==void 0&&(e.fillStyle=t.fillStyle),t.lineCap!==void 0&&(e.lineCap=t.lineCap),t.textAlign!==void 0&&(e.textAlign=t.textAlign),t.font!==void 0&&(e.font=t.font)}a(ee,"canvas_properties");function ft(e,t,n,i,o,r){r!==void 0&&ee(e,r);const s=10,u=Math.atan2(o-n,i-t);e.moveTo(t,n),e.lineTo(i,o),e.moveTo(i,o),e.lineTo(i-s*Math.cos(u-Math.PI/6),o-s*Math.sin(u-Math.PI/6)),e.moveTo(i,o),e.lineTo(i-s*Math.cos(u+Math.PI/6),o-s*Math.sin(u+Math.PI/6))}a(ft,"canvas_arrow");function pt(e,t,n,i,o,r){r!==void 0&&ee(e,r),e.moveTo(t,n),e.lineTo(i,o)}a(pt,"canvas_line");function ke(e,t,n,i,o,r,s){s!==void 0&&ee(e,s),e.arc(t,n,i,o,r)}a(ke,"canvas_arc");function Lt(e,t,n,i,o){o!==void 0&&ee(e,o),e.fillText(i,t,n)}a(Lt,"canvas_text");function l(e,t,n){function i(c,d){var h;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(h=c._zod).traits??(h.traits=new Set),c._zod.traits.add(e),t(c,d);for(const y in s.prototype)y in c||Object.defineProperty(c,y,{value:s.prototype[y].bind(c)});c._zod.constr=s,c._zod.def=d}a(i,"init");const o=(n==null?void 0:n.Parent)??Object,u=class u extends o{};a(u,"Definition");let r=u;Object.defineProperty(r,"name",{value:e});function s(c){var d;const h=n!=null&&n.Parent?new r:this;i(h,c),(d=h._zod).deferred??(d.deferred=[]);for(const y of h._zod.deferred)y();return h}return a(s,"_"),Object.defineProperty(s,"init",{value:i}),Object.defineProperty(s,Symbol.hasInstance,{value:a(c=>{var d,h;return n!=null&&n.Parent&&c instanceof n.Parent?!0:(h=(d=c==null?void 0:c._zod)==null?void 0:d.traits)==null?void 0:h.has(e)},"value")}),Object.defineProperty(s,"name",{value:e}),s}a(l,"$constructor");const Qe=class Qe extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};a(Qe,"$ZodAsyncError");let R=Qe;const et=class et extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}};a(et,"$ZodEncodeError");let me=et;const Dt={};function W(e){return Dt}a(W,"config");function hn(e){const t=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,o])=>t.indexOf(+i)===-1).map(([i,o])=>o)}a(hn,"getEnumValues");function Pe(e,t){return typeof t=="bigint"?t.toString():t}a(Pe,"jsonStringifyReplacer");function Re(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}a(Re,"cached");function We(e){return e==null}a(We,"nullish");function Ue(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}a(Ue,"cleanRegex");function fn(e,t){const n=(e.toString().split(".")[1]||"").length,i=t.toString();let o=(i.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(i)){const c=i.match(/\d?e-(\d?)/);c!=null&&c[1]&&(o=Number.parseInt(c[1]))}const r=n>o?n:o,s=Number.parseInt(e.toFixed(r).replace(".","")),u=Number.parseInt(t.toFixed(r).replace(".",""));return s%u/10**r}a(fn,"floatSafeRemainder");const mt=Symbol("evaluating");function I(e,t,n){let i;Object.defineProperty(e,t,{get(){if(i!==mt)return i===void 0&&(i=mt,i=n()),i},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}a(I,"defineLazy");function X(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}a(X,"assignProp");function G(...e){const t={};for(const n of e){const i=Object.getOwnPropertyDescriptors(n);Object.assign(t,i)}return Object.defineProperties({},t)}a(G,"mergeDefs");function gt(e){return JSON.stringify(e)}a(gt,"esc");const Nt="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ge(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}a(ge,"isObject");const pn=Re(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Q(e){if(ge(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(ge(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}a(Q,"isPlainObject");function Bt(e){return Q(e)?{...e}:Array.isArray(e)?[...e]:e}a(Bt,"shallowClone");const mn=new Set(["string","number","symbol"]);function be(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(be,"escapeRegex");function K(e,t,n){const i=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(i._zod.parent=e),i}a(K,"clone");function m(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:a(()=>t,"error")};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:a(()=>t.error,"error")}:t}a(m,"normalizeParams");function gn(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}a(gn,"optionalKeys");const yn={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function vn(e,t){const n=e._zod.def,i=G(e._zod.def,{get shape(){const o={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(o[r]=n.shape[r])}return X(this,"shape",o),o},checks:[]});return K(e,i)}a(vn,"pick");function bn(e,t){const n=e._zod.def,i=G(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete o[r]}return X(this,"shape",o),o},checks:[]});return K(e,i)}a(bn,"omit");function wn(e,t){if(!Q(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const o=G(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return X(this,"shape",r),r},checks:[]});return K(e,o)}a(wn,"extend");function xn(e,t){if(!Q(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const i={...e._zod.def.shape,...t};return X(this,"shape",i),i},checks:e._zod.def.checks};return K(e,n)}a(xn,"safeExtend");function _n(e,t){const n=G(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t._zod.def.shape};return X(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return K(e,n)}a(_n,"merge");function Sn(e,t,n){const i=G(t._zod.def,{get shape(){const o=t._zod.def.shape,r={...o};if(n)for(const s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=e?new e({type:"optional",innerType:o[s]}):o[s])}else for(const s in o)r[s]=e?new e({type:"optional",innerType:o[s]}):o[s];return X(this,"shape",r),r},checks:[]});return K(t,i)}a(Sn,"partial");function kn(e,t,n){const i=G(t._zod.def,{get shape(){const o=t._zod.def.shape,r={...o};if(n)for(const s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=new e({type:"nonoptional",innerType:o[s]}))}else for(const s in o)r[s]=new e({type:"nonoptional",innerType:o[s]});return X(this,"shape",r),r},checks:[]});return K(t,i)}a(kn,"required");function J(e,t=0){var n;if(e.aborted===!0)return!0;for(let i=t;i<e.issues.length;i++)if(((n=e.issues[i])==null?void 0:n.continue)!==!0)return!0;return!1}a(J,"aborted");function H(e,t){return t.map(n=>{var i;return(i=n).path??(i.path=[]),n.path.unshift(e),n})}a(H,"prefixIssues");function ue(e){return typeof e=="string"?e:e==null?void 0:e.message}a(ue,"unwrapMessage");function U(e,t,n){var o,r,s,u,c,d;const i={...e,path:e.path??[]};if(!e.message){const h=ue((s=(r=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:r.error)==null?void 0:s.call(r,e))??ue((u=t==null?void 0:t.error)==null?void 0:u.call(t,e))??ue((c=n.customError)==null?void 0:c.call(n,e))??ue((d=n.localeError)==null?void 0:d.call(n,e))??"Invalid input";i.message=h}return delete i.inst,delete i.continue,t!=null&&t.reportInput||delete i.input,i}a(U,"finalizeIssue");function Ke(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}a(Ke,"getLengthableOrigin");function oe(...e){const[t,n,i]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:i}:{...t}}a(oe,"issue");const Mt=a((e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Pe,2),Object.defineProperty(e,"toString",{value:a(()=>e.message,"value"),enumerable:!1})},"initializer$1"),Rt=l("$ZodError",Mt),Wt=l("$ZodError",Mt,{Parent:Error});function zn(e,t=n=>n.message){const n={},i=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):i.push(t(o));return{formErrors:i,fieldErrors:n}}a(zn,"flattenError");function Cn(e,t=n=>n.message){const n={_errors:[]},i=a(o=>{for(const r of o.issues)if(r.code==="invalid_union"&&r.errors.length)r.errors.map(s=>i({issues:s}));else if(r.code==="invalid_key")i({issues:r.issues});else if(r.code==="invalid_element")i({issues:r.issues});else if(r.path.length===0)n._errors.push(t(r));else{let s=n,u=0;for(;u<r.path.length;){const c=r.path[u];u===r.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(t(r))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}},"processError");return i(e),n}a(Cn,"formatError");const Ve=a(e=>(t,n,i,o)=>{const r=i?Object.assign(i,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise)throw new R;if(s.issues.length){const u=new((o==null?void 0:o.Err)??e)(s.issues.map(c=>U(c,r,W())));throw Nt(u,o==null?void 0:o.callee),u}return s.value},"_parse"),Ye=a(e=>async(t,n,i,o)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise&&(s=await s),s.issues.length){const u=new((o==null?void 0:o.Err)??e)(s.issues.map(c=>U(c,r,W())));throw Nt(u,o==null?void 0:o.callee),u}return s.value},"_parseAsync"),we=a(e=>(t,n,i)=>{const o=i?{...i,async:!1}:{async:!1},r=t._zod.run({value:n,issues:[]},o);if(r instanceof Promise)throw new R;return r.issues.length?{success:!1,error:new(e??Rt)(r.issues.map(s=>U(s,o,W())))}:{success:!0,data:r.value}},"_safeParse"),In=we(Wt),xe=a(e=>async(t,n,i)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},o);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new e(r.issues.map(s=>U(s,o,W())))}:{success:!0,data:r.value}},"_safeParseAsync"),Pn=xe(Wt),On=a(e=>(t,n,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ve(e)(t,n,o)},"_encode"),En=a(e=>(t,n,i)=>Ve(e)(t,n,i),"_decode"),An=a(e=>async(t,n,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ye(e)(t,n,o)},"_encodeAsync"),Zn=a(e=>async(t,n,i)=>Ye(e)(t,n,i),"_decodeAsync"),Tn=a(e=>(t,n,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return we(e)(t,n,o)},"_safeEncode"),$n=a(e=>(t,n,i)=>we(e)(t,n,i),"_safeDecode"),Fn=a(e=>async(t,n,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return xe(e)(t,n,o)},"_safeEncodeAsync"),jn=a(e=>async(t,n,i)=>xe(e)(t,n,i),"_safeDecodeAsync"),Ln=/^[cC][^\s-]{8,}$/,Dn=/^[0-9a-z]+$/,Nn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Bn=/^[0-9a-vA-V]{20}$/,Mn=/^[A-Za-z0-9]{27}$/,Rn=/^[a-zA-Z0-9_-]{21}$/,Wn=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Un=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,yt=a(e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),Kn=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Vn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Yn(){return new RegExp(Vn,"u")}a(Yn,"emoji");const Xn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Jn=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Hn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qn=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ut=/^[A-Za-z0-9_-]*$/,Qn=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,ei=/^\+(?:[0-9]){6,14}[0-9]$/,Kt="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ti=new RegExp(`^${Kt}$`);function Vt(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}a(Vt,"timeSource");function ni(e){return new RegExp(`^${Vt(e)}$`)}a(ni,"time$1");function ii(e){const t=Vt({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${n.join("|")})`;return new RegExp(`^${Kt}T(?:${i})$`)}a(ii,"datetime$1");const oi=a(e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},"string$1"),ri=/^-?\d+$/,si=/^-?\d+(?:\.\d+)?/,ai=/^(?:true|false)$/i,ci=/^[^A-Z]*$/,ui=/^[^a-z]*$/,D=l("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Yt={number:"number",bigint:"bigint",object:"date"},Xt=l("$ZodCheckLessThan",(e,t)=>{D.init(e,t);const n=Yt[typeof t.value];e._zod.onattach.push(i=>{const o=i._zod.bag,r=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value<=t.value:i.value<t.value)||i.issues.push({origin:n,code:"too_big",maximum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Gt=l("$ZodCheckGreaterThan",(e,t)=>{D.init(e,t);const n=Yt[typeof t.value];e._zod.onattach.push(i=>{const o=i._zod.bag,r=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value>=t.value:i.value>t.value)||i.issues.push({origin:n,code:"too_small",minimum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),li=l("$ZodCheckMultipleOf",(e,t)=>{D.init(e,t),e._zod.onattach.push(n=>{var i;(i=n._zod.bag).multipleOf??(i.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):fn(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),di=l("$ZodCheckNumberFormat",(e,t)=>{var s;D.init(e,t),t.format=t.format||"float64";const n=(s=t.format)==null?void 0:s.includes("int"),i=n?"int":"number",[o,r]=yn[t.format];e._zod.onattach.push(u=>{const c=u._zod.bag;c.format=t.format,c.minimum=o,c.maximum=r,n&&(c.pattern=ri)}),e._zod.check=u=>{const c=u.value;if(n){if(!Number.isInteger(c)){u.issues.push({expected:i,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?u.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort}):u.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort});return}}c<o&&u.issues.push({origin:"number",input:c,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),c>r&&u.issues.push({origin:"number",input:c,code:"too_big",maximum:r,inst:e})}}),hi=l("$ZodCheckMaxLength",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=i=>{const o=i.value;return!We(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{const o=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{const o=i.value;if(o.length<=t.maximum)return;const s=Ke(o);i.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),fi=l("$ZodCheckMinLength",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=i=>{const o=i.value;return!We(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{const o=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{const o=i.value;if(o.length>=t.minimum)return;const s=Ke(o);i.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),pi=l("$ZodCheckLengthEquals",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=i=>{const o=i.value;return!We(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{const o=i._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=i=>{const o=i.value,r=o.length;if(r===t.length)return;const s=Ke(o),u=r>t.length;i.issues.push({origin:s,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),_e=l("$ZodCheckStringFormat",(e,t)=>{var n,i;D.init(e,t),e._zod.onattach.push(o=>{const r=o._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),mi=l("$ZodCheckRegex",(e,t)=>{_e.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),gi=l("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ci),_e.init(e,t)}),yi=l("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ui),_e.init(e,t)}),vi=l("$ZodCheckIncludes",(e,t)=>{D.init(e,t);const n=be(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=i,e._zod.onattach.push(o=>{const r=o._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(i)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),bi=l("$ZodCheckStartsWith",(e,t)=>{D.init(e,t);const n=new RegExp(`^${be(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),wi=l("$ZodCheckEndsWith",(e,t)=>{D.init(e,t);const n=new RegExp(`.*${be(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}}),xi=l("$ZodCheckOverwrite",(e,t)=>{D.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}}),tt=class tt{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const i=t.split(`
`).filter(s=>s),o=Math.min(...i.map(s=>s.length-s.trimStart().length)),r=i.map(s=>s.slice(o)).map(s=>" ".repeat(this.indent*2)+s);for(const s of r)this.content.push(s)}compile(){const t=Function,n=this==null?void 0:this.args,o=[...((this==null?void 0:this.content)??[""]).map(r=>`  ${r}`)];return new t(...n,o.join(`
`))}};a(tt,"Doc");let Oe=tt;const _i={major:4,minor:1,patch:12},A=l("$ZodType",(e,t)=>{var o;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=_i;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const r of i)for(const s of r._zod.onattach)s(e);if(i.length===0)(n=e._zod).deferred??(n.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const r=a((u,c,d)=>{let h=J(u),y;for(const f of c){if(f._zod.def.when){if(!f._zod.def.when(u))continue}else if(h)continue;const g=u.issues.length,v=f._zod.check(u);if(v instanceof Promise&&(d==null?void 0:d.async)===!1)throw new R;if(y||v instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await v,u.issues.length!==g&&(h||(h=J(u,g)))});else{if(u.issues.length===g)continue;h||(h=J(u,g))}}return y?y.then(()=>u):u},"runChecks"),s=a((u,c,d)=>{if(J(u))return u.aborted=!0,u;const h=r(c,i,d);if(h instanceof Promise){if(d.async===!1)throw new R;return h.then(y=>e._zod.parse(y,d))}return e._zod.parse(h,d)},"handleCanaryResult");e._zod.run=(u,c)=>{if(c.skipChecks)return e._zod.parse(u,c);if(c.direction==="backward"){const h=e._zod.parse({value:u.value,issues:[]},{...c,skipChecks:!0});return h instanceof Promise?h.then(y=>s(y,u,c)):s(h,u,c)}const d=e._zod.parse(u,c);if(d instanceof Promise){if(c.async===!1)throw new R;return d.then(h=>r(h,i,c))}return r(d,i,c)}}e["~standard"]={validate:a(r=>{var s;try{const u=In(e,r);return u.success?{value:u.data}:{issues:(s=u.error)==null?void 0:s.issues}}catch{return Pn(e,r).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},"validate"),vendor:"zod",version:1}}),Xe=l("$ZodString",(e,t)=>{var n;A.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??oi(e._zod.bag),e._zod.parse=(i,o)=>{if(t.coerce)try{i.value=String(i.value)}catch{}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),P=l("$ZodStringFormat",(e,t)=>{_e.init(e,t),Xe.init(e,t)}),Si=l("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Un),P.init(e,t)}),ki=l("$ZodUUID",(e,t)=>{if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=yt(i))}else t.pattern??(t.pattern=yt());P.init(e,t)}),zi=l("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Kn),P.init(e,t)}),Ci=l("$ZodURL",(e,t)=>{P.init(e,t),e._zod.check=n=>{try{const i=n.value.trim(),o=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Qn.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Ii=l("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Yn()),P.init(e,t)}),Pi=l("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Rn),P.init(e,t)}),Oi=l("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Ln),P.init(e,t)}),Ei=l("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Dn),P.init(e,t)}),Ai=l("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Nn),P.init(e,t)}),Zi=l("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Bn),P.init(e,t)}),Ti=l("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Mn),P.init(e,t)}),$i=l("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=ii(t)),P.init(e,t)}),Fi=l("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ti),P.init(e,t)}),ji=l("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=ni(t)),P.init(e,t)}),Li=l("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Wn),P.init(e,t)}),Di=l("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Xn),P.init(e,t),e._zod.onattach.push(n=>{const i=n._zod.bag;i.format="ipv4"})}),Ni=l("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Gn),P.init(e,t),e._zod.onattach.push(n=>{const i=n._zod.bag;i.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Bi=l("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Jn),P.init(e,t)}),Mi=l("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Hn),P.init(e,t),e._zod.check=n=>{const i=n.value.split("/");try{if(i.length!==2)throw new Error;const[o,r]=i;if(!r)throw new Error;const s=Number(r);if(`${s}`!==r)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${o}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Jt(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}a(Jt,"isValidBase64");const Ri=l("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=qn),P.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Jt(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Wi(e){if(!Ut.test(e))return!1;const t=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Jt(n)}a(Wi,"isValidBase64URL");const Ui=l("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Ut),P.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{Wi(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Ki=l("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ei),P.init(e,t)});function Vi(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[i]=n;if(!i)return!1;const o=JSON.parse(atob(i));return!("typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}a(Vi,"isValidJWT");const Yi=l("$ZodJWT",(e,t)=>{P.init(e,t),e._zod.check=n=>{Vi(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Ht=l("$ZodNumber",(e,t)=>{A.init(e,t),e._zod.pattern=e._zod.bag.pattern??si,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const r=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...r?{received:r}:{}}),n}}),Xi=l("$ZodNumber",(e,t)=>{di.init(e,t),Ht.init(e,t)}),Gi=l("$ZodBoolean",(e,t)=>{A.init(e,t),e._zod.pattern=ai,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),Ji=l("$ZodUnknown",(e,t)=>{A.init(e,t),e._zod.parse=n=>n}),Hi=l("$ZodNever",(e,t)=>{A.init(e,t),e._zod.parse=(n,i)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function vt(e,t,n){e.issues.length&&t.issues.push(...H(n,e.issues)),t.value[n]=e.value}a(vt,"handleArrayResult");const qi=l("$ZodArray",(e,t)=>{A.init(e,t),e._zod.parse=(n,i)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const r=[];for(let s=0;s<o.length;s++){const u=o[s],c=t.element._zod.run({value:u,issues:[]},i);c instanceof Promise?r.push(c.then(d=>vt(d,n,s))):vt(c,n,s)}return r.length?Promise.all(r).then(()=>n):n}});function ye(e,t,n,i){e.issues.length&&t.issues.push(...H(n,e.issues)),e.value===void 0?n in i&&(t.value[n]=void 0):t.value[n]=e.value}a(ye,"handlePropertyResult");function qt(e){var i,o,r,s;const t=Object.keys(e.shape);for(const u of t)if(!((s=(r=(o=(i=e.shape)==null?void 0:i[u])==null?void 0:o._zod)==null?void 0:r.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=gn(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}a(qt,"normalizeDef");function Qt(e,t,n,i,o,r){const s=[],u=o.keySet,c=o.catchall._zod,d=c.def.type;for(const h of Object.keys(t)){if(u.has(h))continue;if(d==="never"){s.push(h);continue}const y=c.run({value:t[h],issues:[]},i);y instanceof Promise?e.push(y.then(f=>ye(f,n,h,t))):ye(y,n,h,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:r}),e.length?Promise.all(e).then(()=>n):n}a(Qt,"handleCatchall");const Qi=l("$ZodObject",(e,t)=>{A.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const u=t.shape;Object.defineProperty(t,"shape",{get:a(()=>{const c={...u};return Object.defineProperty(t,"shape",{value:c}),c},"get")})}const i=Re(()=>qt(t));I(e._zod,"propValues",()=>{const u=t.shape,c={};for(const d in u){const h=u[d]._zod;if(h.values){c[d]??(c[d]=new Set);for(const y of h.values)c[d].add(y)}}return c});const o=ge,r=t.catchall;let s;e._zod.parse=(u,c)=>{s??(s=i.value);const d=u.value;if(!o(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),u;u.value={};const h=[],y=s.shape;for(const f of s.keys){const v=y[f]._zod.run({value:d[f],issues:[]},c);v instanceof Promise?h.push(v.then(w=>ye(w,u,f,d))):ye(v,u,f,d)}return r?Qt(h,d,u,c,i.value,e):h.length?Promise.all(h).then(()=>u):u}}),eo=l("$ZodObjectJIT",(e,t)=>{Qi.init(e,t);const n=e._zod.parse,i=Re(()=>qt(t)),o=a(f=>{const g=new Oe(["shape","payload","ctx"]),v=i.value,w=a(E=>{const x=gt(E);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`},"parseStr");g.write("const input = payload.value;");const p=Object.create(null);let S=0;for(const E of v.keys)p[E]=`key_${S++}`;g.write("const newResult = {};");for(const E of v.keys){const x=p[E],$=gt(E);g.write(`const ${x} = ${w(E)};`),g.write(`
        if (${x}.issues.length) {
          payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        
        if (${x}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${x}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const F=g.compile();return(E,x)=>F(f,E,x)},"generateFastpass");let r;const s=ge,u=!Dt.jitless,d=u&&pn.value,h=t.catchall;let y;e._zod.parse=(f,g)=>{y??(y=i.value);const v=f.value;return s(v)?u&&d&&(g==null?void 0:g.async)===!1&&g.jitless!==!0?(r||(r=o(t.shape)),f=r(f,g),h?Qt([],v,f,g,y,e):f):n(f,g):(f.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),f)}});function bt(e,t,n,i){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;const o=e.filter(r=>!J(r));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(s=>U(s,i,W())))}),t)}a(bt,"handleUnionResults");const to=l("$ZodUnion",(e,t)=>{A.init(e,t),I(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),I(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),I(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),I(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${o.map(r=>Ue(r.source)).join("|")})$`)}});const n=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(o,r)=>{if(n)return i(o,r);let s=!1;const u=[];for(const c of t.options){const d=c._zod.run({value:o.value,issues:[]},r);if(d instanceof Promise)u.push(d),s=!0;else{if(d.issues.length===0)return d;u.push(d)}}return s?Promise.all(u).then(c=>bt(c,o,e,r)):bt(u,o,e,r)}}),no=l("$ZodIntersection",(e,t)=>{A.init(e,t),e._zod.parse=(n,i)=>{const o=n.value,r=t.left._zod.run({value:o,issues:[]},i),s=t.right._zod.run({value:o,issues:[]},i);return r instanceof Promise||s instanceof Promise?Promise.all([r,s]).then(([c,d])=>wt(n,c,d)):wt(n,r,s)}});function Ee(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Q(e)&&Q(t)){const n=Object.keys(t),i=Object.keys(e).filter(r=>n.indexOf(r)!==-1),o={...e,...t};for(const r of i){const s=Ee(e[r],t[r]);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};o[r]=s.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i],s=Ee(o,r);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}a(Ee,"mergeValues");function wt(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),J(e))return e;const i=Ee(t.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}a(wt,"handleIntersectionResults");const io=l("$ZodRecord",(e,t)=>{A.init(e,t),e._zod.parse=(n,i)=>{const o=n.value;if(!Q(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const r=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const c of s)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const d=t.valueType._zod.run({value:o[c],issues:[]},i);d instanceof Promise?r.push(d.then(h=>{h.issues.length&&n.issues.push(...H(c,h.issues)),n.value[c]=h.value})):(d.issues.length&&n.issues.push(...H(c,d.issues)),n.value[c]=d.value)}let u;for(const c in o)s.has(c)||(u=u??[],u.push(c));u&&u.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:u})}else{n.value={};for(const s of Reflect.ownKeys(o)){if(s==="__proto__")continue;const u=t.keyType._zod.run({value:s,issues:[]},i);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(u.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:u.issues.map(d=>U(d,i,W())),input:s,path:[s],inst:e}),n.value[u.value]=u.value;continue}const c=t.valueType._zod.run({value:o[s],issues:[]},i);c instanceof Promise?r.push(c.then(d=>{d.issues.length&&n.issues.push(...H(s,d.issues)),n.value[u.value]=d.value})):(c.issues.length&&n.issues.push(...H(s,c.issues)),n.value[u.value]=c.value)}}return r.length?Promise.all(r).then(()=>n):n}}),oo=l("$ZodEnum",(e,t)=>{A.init(e,t);const n=hn(t.entries),i=new Set(n);e._zod.values=i,e._zod.pattern=new RegExp(`^(${n.filter(o=>mn.has(typeof o)).map(o=>typeof o=="string"?be(o):o.toString()).join("|")})$`),e._zod.parse=(o,r)=>{const s=o.value;return i.has(s)||o.issues.push({code:"invalid_value",values:n,input:s,inst:e}),o}}),ro=l("$ZodTransform",(e,t)=>{A.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new me(e.constructor.name);const o=t.transform(n.value,n);if(i.async)return(o instanceof Promise?o:Promise.resolve(o)).then(s=>(n.value=s,n));if(o instanceof Promise)throw new R;return n.value=o,n}});function xt(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}a(xt,"handleOptionalResult");const so=l("$ZodOptional",(e,t)=>{A.init(e,t),e._zod.optin="optional",e._zod.optout="optional",I(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),I(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ue(n.source)})?$`):void 0}),e._zod.parse=(n,i)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,i);return o instanceof Promise?o.then(r=>xt(r,n.value)):xt(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,i)}}),ao=l("$ZodNullable",(e,t)=>{A.init(e,t),I(e._zod,"optin",()=>t.innerType._zod.optin),I(e._zod,"optout",()=>t.innerType._zod.optout),I(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ue(n.source)}|null)$`):void 0}),I(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,i)=>n.value===null?n:t.innerType._zod.run(n,i)}),co=l("$ZodDefault",(e,t)=>{A.init(e,t),e._zod.optin="optional",I(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,i);return o instanceof Promise?o.then(r=>_t(r,t)):_t(o,t)}});function _t(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}a(_t,"handleDefaultResult");const uo=l("$ZodPrefault",(e,t)=>{A.init(e,t),e._zod.optin="optional",I(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>(i.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,i))}),lo=l("$ZodNonOptional",(e,t)=>{A.init(e,t),I(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(i=>i!==void 0)):void 0}),e._zod.parse=(n,i)=>{const o=t.innerType._zod.run(n,i);return o instanceof Promise?o.then(r=>St(r,e)):St(o,e)}});function St(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}a(St,"handleNonOptionalResult");const ho=l("$ZodCatch",(e,t)=>{A.init(e,t),I(e._zod,"optin",()=>t.innerType._zod.optin),I(e._zod,"optout",()=>t.innerType._zod.optout),I(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);const o=t.innerType._zod.run(n,i);return o instanceof Promise?o.then(r=>(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(s=>U(s,i,W()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(r=>U(r,i,W()))},input:n.value}),n.issues=[]),n)}}),fo=l("$ZodPipe",(e,t)=>{A.init(e,t),I(e._zod,"values",()=>t.in._zod.values),I(e._zod,"optin",()=>t.in._zod.optin),I(e._zod,"optout",()=>t.out._zod.optout),I(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,i)=>{if(i.direction==="backward"){const r=t.out._zod.run(n,i);return r instanceof Promise?r.then(s=>le(s,t.in,i)):le(r,t.in,i)}const o=t.in._zod.run(n,i);return o instanceof Promise?o.then(r=>le(r,t.out,i)):le(o,t.out,i)}});function le(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}a(le,"handlePipeResult");const po=l("$ZodReadonly",(e,t)=>{A.init(e,t),I(e._zod,"propValues",()=>t.innerType._zod.propValues),I(e._zod,"values",()=>t.innerType._zod.values),I(e._zod,"optin",()=>t.innerType._zod.optin),I(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);const o=t.innerType._zod.run(n,i);return o instanceof Promise?o.then(kt):kt(o)}});function kt(e){return e.value=Object.freeze(e.value),e}a(kt,"handleReadonlyResult");const mo=l("$ZodCustom",(e,t)=>{D.init(e,t),A.init(e,t),e._zod.parse=(n,i)=>n,e._zod.check=n=>{const i=n.value,o=t.fn(i);if(o instanceof Promise)return o.then(r=>zt(r,n,i,e));zt(o,n,i,e)}});function zt(e,t,n,i){if(!e){const o={code:"custom",input:n,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(o.params=i._zod.def.params),t.issues.push(oe(o))}}a(zt,"handleRefineResult");const nt=class nt{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const i=n[0];if(this._map.set(t,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const i={...this.get(n)??{}};delete i.id;const o={...i,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};a(nt,"$ZodRegistry");let Ae=nt;function go(){return new Ae}a(go,"registry");const de=go();function yo(e,t){return new e({type:"string",...m(t)})}a(yo,"_string");function vo(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...m(t)})}a(vo,"_email");function Ct(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...m(t)})}a(Ct,"_guid");function bo(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...m(t)})}a(bo,"_uuid");function wo(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...m(t)})}a(wo,"_uuidv4");function xo(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...m(t)})}a(xo,"_uuidv6");function _o(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...m(t)})}a(_o,"_uuidv7");function So(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...m(t)})}a(So,"_url");function ko(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...m(t)})}a(ko,"_emoji");function zo(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...m(t)})}a(zo,"_nanoid");function Co(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...m(t)})}a(Co,"_cuid");function Io(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...m(t)})}a(Io,"_cuid2");function Po(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...m(t)})}a(Po,"_ulid");function Oo(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...m(t)})}a(Oo,"_xid");function Eo(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...m(t)})}a(Eo,"_ksuid");function Ao(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...m(t)})}a(Ao,"_ipv4");function Zo(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...m(t)})}a(Zo,"_ipv6");function To(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...m(t)})}a(To,"_cidrv4");function $o(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...m(t)})}a($o,"_cidrv6");function Fo(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...m(t)})}a(Fo,"_base64");function jo(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...m(t)})}a(jo,"_base64url");function Lo(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...m(t)})}a(Lo,"_e164");function Do(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...m(t)})}a(Do,"_jwt");function No(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...m(t)})}a(No,"_isoDateTime");function Bo(e,t){return new e({type:"string",format:"date",check:"string_format",...m(t)})}a(Bo,"_isoDate");function Mo(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...m(t)})}a(Mo,"_isoTime");function Ro(e,t){return new e({type:"string",format:"duration",check:"string_format",...m(t)})}a(Ro,"_isoDuration");function Wo(e,t){return new e({type:"number",checks:[],...m(t)})}a(Wo,"_number");function Uo(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...m(t)})}a(Uo,"_int");function Ko(e,t){return new e({type:"boolean",...m(t)})}a(Ko,"_boolean");function Vo(e){return new e({type:"unknown"})}a(Vo,"_unknown");function Yo(e,t){return new e({type:"never",...m(t)})}a(Yo,"_never");function It(e,t){return new Xt({check:"less_than",...m(t),value:e,inclusive:!1})}a(It,"_lt");function ze(e,t){return new Xt({check:"less_than",...m(t),value:e,inclusive:!0})}a(ze,"_lte");function Pt(e,t){return new Gt({check:"greater_than",...m(t),value:e,inclusive:!1})}a(Pt,"_gt");function Ce(e,t){return new Gt({check:"greater_than",...m(t),value:e,inclusive:!0})}a(Ce,"_gte");function Ot(e,t){return new li({check:"multiple_of",...m(t),value:e})}a(Ot,"_multipleOf");function en(e,t){return new hi({check:"max_length",...m(t),maximum:e})}a(en,"_maxLength");function ve(e,t){return new fi({check:"min_length",...m(t),minimum:e})}a(ve,"_minLength");function tn(e,t){return new pi({check:"length_equals",...m(t),length:e})}a(tn,"_length");function Xo(e,t){return new mi({check:"string_format",format:"regex",...m(t),pattern:e})}a(Xo,"_regex");function Go(e){return new gi({check:"string_format",format:"lowercase",...m(e)})}a(Go,"_lowercase");function Jo(e){return new yi({check:"string_format",format:"uppercase",...m(e)})}a(Jo,"_uppercase");function Ho(e,t){return new vi({check:"string_format",format:"includes",...m(t),includes:e})}a(Ho,"_includes");function qo(e,t){return new bi({check:"string_format",format:"starts_with",...m(t),prefix:e})}a(qo,"_startsWith");function Qo(e,t){return new wi({check:"string_format",format:"ends_with",...m(t),suffix:e})}a(Qo,"_endsWith");function ae(e){return new xi({check:"overwrite",tx:e})}a(ae,"_overwrite");function er(e){return ae(t=>t.normalize(e))}a(er,"_normalize");function tr(){return ae(e=>e.trim())}a(tr,"_trim");function nr(){return ae(e=>e.toLowerCase())}a(nr,"_toLowerCase");function ir(){return ae(e=>e.toUpperCase())}a(ir,"_toUpperCase");function or(e,t,n){return new e({type:"array",element:t,...m(n)})}a(or,"_array");function rr(e,t,n){return new e({type:"custom",check:"custom",fn:t,...m(n)})}a(rr,"_refine");function sr(e){const t=ar(n=>(n.addIssue=i=>{if(typeof i=="string")n.issues.push(oe(i,n.value,t._zod.def));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(oe(o))}},e(n.value,n)));return t}a(sr,"_superRefine");function ar(e,t){const n=new D({check:"custom",...m(t)});return n._zod.check=e,n}a(ar,"_check");const cr=l("ZodISODateTime",(e,t)=>{$i.init(e,t),O.init(e,t)});function ur(e){return No(cr,e)}a(ur,"datetime");const lr=l("ZodISODate",(e,t)=>{Fi.init(e,t),O.init(e,t)});function dr(e){return Bo(lr,e)}a(dr,"date");const hr=l("ZodISOTime",(e,t)=>{ji.init(e,t),O.init(e,t)});function fr(e){return Mo(hr,e)}a(fr,"time");const pr=l("ZodISODuration",(e,t)=>{Li.init(e,t),O.init(e,t)});function mr(e){return Ro(pr,e)}a(mr,"duration");const gr=a((e,t)=>{Rt.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:a(n=>Cn(e,n),"value")},flatten:{value:a(n=>zn(e,n),"value")},addIssue:{value:a(n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Pe,2)},"value")},addIssues:{value:a(n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Pe,2)},"value")},isEmpty:{get(){return e.issues.length===0}}})},"initializer"),N=l("ZodError",gr,{Parent:Error}),yr=Ve(N),vr=Ye(N),br=we(N),wr=xe(N),xr=On(N),_r=En(N),Sr=An(N),kr=Zn(N),zr=Tn(N),Cr=$n(N),Ir=Fn(N),Pr=jn(N),T=l("ZodType",(e,t)=>(A.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(G(t,{checks:[...t.checks??[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(n,i)=>K(e,n,i),e.brand=()=>e,e.register=((n,i)=>(n.add(e,i),e)),e.parse=(n,i)=>yr(e,n,i,{callee:e.parse}),e.safeParse=(n,i)=>br(e,n,i),e.parseAsync=async(n,i)=>vr(e,n,i,{callee:e.parseAsync}),e.safeParseAsync=async(n,i)=>wr(e,n,i),e.spa=e.safeParseAsync,e.encode=(n,i)=>xr(e,n,i),e.decode=(n,i)=>_r(e,n,i),e.encodeAsync=async(n,i)=>Sr(e,n,i),e.decodeAsync=async(n,i)=>kr(e,n,i),e.safeEncode=(n,i)=>zr(e,n,i),e.safeDecode=(n,i)=>Cr(e,n,i),e.safeEncodeAsync=async(n,i)=>Ir(e,n,i),e.safeDecodeAsync=async(n,i)=>Pr(e,n,i),e.refine=(n,i)=>e.check(vs(n,i)),e.superRefine=n=>e.check(bs(n)),e.overwrite=n=>e.check(ae(n)),e.optional=()=>$t(e),e.nullable=()=>Ft(e),e.nullish=()=>$t(Ft(e)),e.nonoptional=n=>ds(e,n),e.array=()=>rn(e),e.or=n=>sn([e,n]),e.and=n=>ns(e,n),e.transform=n=>jt(e,rs(n)),e.default=n=>cs(e,n),e.prefault=n=>ls(e,n),e.catch=n=>fs(e,n),e.pipe=n=>jt(e,n),e.readonly=()=>gs(e),e.describe=n=>{const i=e.clone();return de.add(i,{description:n}),i},Object.defineProperty(e,"description",{get(){var n;return(n=de.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return de.get(e);const i=e.clone();return de.add(i,n[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),nn=l("_ZodString",(e,t)=>{Xe.init(e,t),T.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...i)=>e.check(Xo(...i)),e.includes=(...i)=>e.check(Ho(...i)),e.startsWith=(...i)=>e.check(qo(...i)),e.endsWith=(...i)=>e.check(Qo(...i)),e.min=(...i)=>e.check(ve(...i)),e.max=(...i)=>e.check(en(...i)),e.length=(...i)=>e.check(tn(...i)),e.nonempty=(...i)=>e.check(ve(1,...i)),e.lowercase=i=>e.check(Go(i)),e.uppercase=i=>e.check(Jo(i)),e.trim=()=>e.check(tr()),e.normalize=(...i)=>e.check(er(...i)),e.toLowerCase=()=>e.check(nr()),e.toUpperCase=()=>e.check(ir())}),Or=l("ZodString",(e,t)=>{Xe.init(e,t),nn.init(e,t),e.email=n=>e.check(vo(Er,n)),e.url=n=>e.check(So(Ar,n)),e.jwt=n=>e.check(Do(Vr,n)),e.emoji=n=>e.check(ko(Zr,n)),e.guid=n=>e.check(Ct(Et,n)),e.uuid=n=>e.check(bo(he,n)),e.uuidv4=n=>e.check(wo(he,n)),e.uuidv6=n=>e.check(xo(he,n)),e.uuidv7=n=>e.check(_o(he,n)),e.nanoid=n=>e.check(zo(Tr,n)),e.guid=n=>e.check(Ct(Et,n)),e.cuid=n=>e.check(Co($r,n)),e.cuid2=n=>e.check(Io(Fr,n)),e.ulid=n=>e.check(Po(jr,n)),e.base64=n=>e.check(Fo(Wr,n)),e.base64url=n=>e.check(jo(Ur,n)),e.xid=n=>e.check(Oo(Lr,n)),e.ksuid=n=>e.check(Eo(Dr,n)),e.ipv4=n=>e.check(Ao(Nr,n)),e.ipv6=n=>e.check(Zo(Br,n)),e.cidrv4=n=>e.check(To(Mr,n)),e.cidrv6=n=>e.check($o(Rr,n)),e.e164=n=>e.check(Lo(Kr,n)),e.datetime=n=>e.check(ur(n)),e.date=n=>e.check(dr(n)),e.time=n=>e.check(fr(n)),e.duration=n=>e.check(mr(n))});function C(e){return yo(Or,e)}a(C,"string");const O=l("ZodStringFormat",(e,t)=>{P.init(e,t),nn.init(e,t)}),Er=l("ZodEmail",(e,t)=>{zi.init(e,t),O.init(e,t)}),Et=l("ZodGUID",(e,t)=>{Si.init(e,t),O.init(e,t)}),he=l("ZodUUID",(e,t)=>{ki.init(e,t),O.init(e,t)}),Ar=l("ZodURL",(e,t)=>{Ci.init(e,t),O.init(e,t)}),Zr=l("ZodEmoji",(e,t)=>{Ii.init(e,t),O.init(e,t)}),Tr=l("ZodNanoID",(e,t)=>{Pi.init(e,t),O.init(e,t)}),$r=l("ZodCUID",(e,t)=>{Oi.init(e,t),O.init(e,t)}),Fr=l("ZodCUID2",(e,t)=>{Ei.init(e,t),O.init(e,t)}),jr=l("ZodULID",(e,t)=>{Ai.init(e,t),O.init(e,t)}),Lr=l("ZodXID",(e,t)=>{Zi.init(e,t),O.init(e,t)}),Dr=l("ZodKSUID",(e,t)=>{Ti.init(e,t),O.init(e,t)}),Nr=l("ZodIPv4",(e,t)=>{Di.init(e,t),O.init(e,t)}),Br=l("ZodIPv6",(e,t)=>{Ni.init(e,t),O.init(e,t)}),Mr=l("ZodCIDRv4",(e,t)=>{Bi.init(e,t),O.init(e,t)}),Rr=l("ZodCIDRv6",(e,t)=>{Mi.init(e,t),O.init(e,t)}),Wr=l("ZodBase64",(e,t)=>{Ri.init(e,t),O.init(e,t)}),Ur=l("ZodBase64URL",(e,t)=>{Ui.init(e,t),O.init(e,t)}),Kr=l("ZodE164",(e,t)=>{Ki.init(e,t),O.init(e,t)}),Vr=l("ZodJWT",(e,t)=>{Yi.init(e,t),O.init(e,t)}),on=l("ZodNumber",(e,t)=>{Ht.init(e,t),T.init(e,t),e.gt=(i,o)=>e.check(Pt(i,o)),e.gte=(i,o)=>e.check(Ce(i,o)),e.min=(i,o)=>e.check(Ce(i,o)),e.lt=(i,o)=>e.check(It(i,o)),e.lte=(i,o)=>e.check(ze(i,o)),e.max=(i,o)=>e.check(ze(i,o)),e.int=i=>e.check(At(i)),e.safe=i=>e.check(At(i)),e.positive=i=>e.check(Pt(0,i)),e.nonnegative=i=>e.check(Ce(0,i)),e.negative=i=>e.check(It(0,i)),e.nonpositive=i=>e.check(ze(0,i)),e.multipleOf=(i,o)=>e.check(Ot(i,o)),e.step=(i,o)=>e.check(Ot(i,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function _(e){return Wo(on,e)}a(_,"number");const Yr=l("ZodNumberFormat",(e,t)=>{Xi.init(e,t),on.init(e,t)});function At(e){return Uo(Yr,e)}a(At,"int");const Xr=l("ZodBoolean",(e,t)=>{Gi.init(e,t),T.init(e,t)});function te(e){return Ko(Xr,e)}a(te,"boolean");const Gr=l("ZodUnknown",(e,t)=>{Ji.init(e,t),T.init(e,t)});function Zt(){return Vo(Gr)}a(Zt,"unknown");const Jr=l("ZodNever",(e,t)=>{Hi.init(e,t),T.init(e,t)});function Hr(e){return Yo(Jr,e)}a(Hr,"never");const qr=l("ZodArray",(e,t)=>{qi.init(e,t),T.init(e,t),e.element=t.element,e.min=(n,i)=>e.check(ve(n,i)),e.nonempty=n=>e.check(ve(1,n)),e.max=(n,i)=>e.check(en(n,i)),e.length=(n,i)=>e.check(tn(n,i)),e.unwrap=()=>e.element});function rn(e,t){return or(qr,e,t)}a(rn,"array");const Qr=l("ZodObject",(e,t)=>{eo.init(e,t),T.init(e,t),I(e,"shape",()=>t.shape),e.keyof=()=>B(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Zt()}),e.loose=()=>e.clone({...e._zod.def,catchall:Zt()}),e.strict=()=>e.clone({...e._zod.def,catchall:Hr()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>wn(e,n),e.safeExtend=n=>xn(e,n),e.merge=n=>_n(e,n),e.pick=n=>vn(e,n),e.omit=n=>bn(e,n),e.partial=(...n)=>Sn(an,e,n[0]),e.required=(...n)=>kn(cn,e,n[0])});function z(e,t){const n={type:"object",shape:e??{},...m(t)};return new Qr(n)}a(z,"object");const es=l("ZodUnion",(e,t)=>{to.init(e,t),T.init(e,t),e.options=t.options});function sn(e,t){return new es({type:"union",options:e,...m(t)})}a(sn,"union");const ts=l("ZodIntersection",(e,t)=>{no.init(e,t),T.init(e,t)});function ns(e,t){return new ts({type:"intersection",left:e,right:t})}a(ns,"intersection");const is=l("ZodRecord",(e,t)=>{io.init(e,t),T.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Tt(e,t,n){return new is({type:"record",keyType:e,valueType:t,...m(n)})}a(Tt,"record");const Ze=l("ZodEnum",(e,t)=>{oo.init(e,t),T.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(i,o)=>{const r={};for(const s of i)if(n.has(s))r[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ze({...t,checks:[],...m(o),entries:r})},e.exclude=(i,o)=>{const r={...t.entries};for(const s of i)if(n.has(s))delete r[s];else throw new Error(`Key ${s} not found in enum`);return new Ze({...t,checks:[],...m(o),entries:r})}});function B(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Ze({type:"enum",entries:n,...m(t)})}a(B,"_enum");const os=l("ZodTransform",(e,t)=>{ro.init(e,t),T.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new me(e.constructor.name);n.addIssue=r=>{if(typeof r=="string")n.issues.push(oe(r,n.value,t));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(oe(s))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(r=>(n.value=r,n)):(n.value=o,n)}});function rs(e){return new os({type:"transform",transform:e})}a(rs,"transform");const an=l("ZodOptional",(e,t)=>{so.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $t(e){return new an({type:"optional",innerType:e})}a($t,"optional");const ss=l("ZodNullable",(e,t)=>{ao.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ft(e){return new ss({type:"nullable",innerType:e})}a(Ft,"nullable");const as=l("ZodDefault",(e,t)=>{co.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function cs(e,t){return new as({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Bt(t)}})}a(cs,"_default");const us=l("ZodPrefault",(e,t)=>{uo.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ls(e,t){return new us({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Bt(t)}})}a(ls,"prefault");const cn=l("ZodNonOptional",(e,t)=>{lo.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ds(e,t){return new cn({type:"nonoptional",innerType:e,...m(t)})}a(ds,"nonoptional");const hs=l("ZodCatch",(e,t)=>{ho.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function fs(e,t){return new hs({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}a(fs,"_catch");const ps=l("ZodPipe",(e,t)=>{fo.init(e,t),T.init(e,t),e.in=t.in,e.out=t.out});function jt(e,t){return new ps({type:"pipe",in:e,out:t})}a(jt,"pipe");const ms=l("ZodReadonly",(e,t)=>{po.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gs(e){return new ms({type:"readonly",innerType:e})}a(gs,"readonly");const ys=l("ZodCustom",(e,t)=>{mo.init(e,t),T.init(e,t)});function vs(e,t={}){return rr(ys,e,t)}a(vs,"refine");function bs(e){return sr(e)}a(bs,"superRefine");const ws=z({pxFromCanvasLeft:_().default(100),pxFromCanvasTop:_().default(100)}).default({pxFromCanvasLeft:100,pxFromCanvasTop:100}),xs=z({widthInPx:_().default(100),lengthInPx:_().default(100)}).default({widthInPx:100,lengthInPx:100}),_s=z({width:_().default(1920),height:_().default(1080),backgroundColor:C().default("rgba(0, 0, 0, 0)")}).default({width:1920,height:1080,backgroundColor:"rgba(0, 0, 0, 0)"}),ce=z({positionOnCanvas:ws,hitboxSize:xs,layerLevel:_().default(10)}),Z=ce.extend({input:z({keyboard:z({keyCode:C().nullable().default(null)}).default({keyCode:null}),mouse:z({button:_().nullable().default(null),wheel:B(["up","down"]).nullable().default(null)}).default({button:null,wheel:null}),gamepad:z({stick:z({type:B(["left","right"]).nullable().default(null),axis:B(["X","Y"]).nullable().default(null),direction:B(["positive","negative"]).nullable().default(null)}).default({type:null,axis:null,direction:null}),button:z({index:_().nullable().default(null)}).default({index:null})}).default({stick:{type:null,axis:null,direction:null},button:{index:null}})}).default({keyboard:{keyCode:null},mouse:{button:null,wheel:null},gamepad:{stick:{type:null,axis:null,direction:null},button:{index:null}}}),processing:z({radialCompensationAxis:_().default(-1),multiplier:_().default(1),antiDeadzone:_().default(.01),fadeOutDuration:_().default(.2)}).default({radialCompensationAxis:-1,multiplier:1,antiDeadzone:.01,fadeOutDuration:.2}),display:z({text:C().default(""),fillStyle:C().default("#ffffff"),fillStyleBackground:C().default("#000000"),strokeStyle:C().default("#808080"),strokeWidth:_().default(2),fontStyle:z({textAlign:B(["left","right","center","start","end"]).default("center"),fillStyle:C().default("black"),font:C().default("30px Lucida Console"),strokeStyle:C().default("white"),strokeWidth:_().default(3)}).default({textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3}),fillDirection:B(["normal","reversed"]).default("normal")}).default({text:"",fillStyle:"#ffffff",fillStyleBackground:"#000000",strokeStyle:"#808080",strokeWidth:2,fontStyle:{textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3},fillDirection:"normal"})}),V=z({strokeStyle:C(),fillStyle:C(),lineWidth:_(),opacity:_()}).partial(),Se=ce.extend({hitboxSize:z({widthInPx:_().default(200),lengthInPx:_().default(200)}).default({widthInPx:200,lengthInPx:200}),input:z({xAxes:Tt(C(),te()).default({0:!0}),yAxes:Tt(C(),te()).default({1:!0}),xKeyCodePositive:C().nullable().default("ArrowRight"),xKeyCodeNegative:C().nullable().default("ArrowLeft"),yKeyCodePositive:C().nullable().default("ArrowDown"),yKeyCodeNegative:C().nullable().default("ArrowUp"),invertX:te().default(!1),invertY:te().default(!1)}).default({xAxes:{0:!0},yAxes:{1:!0},xKeyCodePositive:"ArrowRight",xKeyCodeNegative:"ArrowLeft",yKeyCodePositive:"ArrowDown",yKeyCodeNegative:"ArrowUp",invertX:!1,invertY:!1}),processing:z({deadzone:_().default(.03),antiDeadzone:_().default(0)}).default({deadzone:.03,antiDeadzone:0}),display:z({radius:_().default(100),stickRadius:_().optional(),fillStyle:C().optional(),fillStyleStick:C().optional(),fillStyleBackground:C().optional(),backgroundStyle:V.default({strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"}),xLineStyle:V.default({strokeStyle:"#FF0000",lineWidth:2,opacity:.5}),yLineStyle:V.default({strokeStyle:"#00FF00",lineWidth:2,opacity:.5}),deadzoneStyle:V.default({fillStyle:"#524d4d"}),inputVectorStyle:V.default({strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5}),unitVectorStyle:V.default({strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5}),crosshairStyle:V.default({fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2})}).default({radius:100,backgroundStyle:{strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"},xLineStyle:{strokeStyle:"#FF0000",lineWidth:2,opacity:.5},yLineStyle:{strokeStyle:"#00FF00",lineWidth:2,opacity:.5},deadzoneStyle:{fillStyle:"#524d4d"},inputVectorStyle:{strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5},unitVectorStyle:{strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5},crosshairStyle:{fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2}})}),M=ce.extend({hitboxSize:z({widthInPx:_().default(200),lengthInPx:_().default(50)}).default({widthInPx:200,lengthInPx:50}),layerLevel:_().default(20),text:C().default("Sample text"),textStyle:z({textAlign:B(["left","right","center","start","end"]).default("center"),fillStyle:C().default("black"),font:C().default("30px Lucida Console"),strokeStyle:C().default("white"),strokeWidth:_().default(3)}).default({textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3}),shouldStroke:te().default(!0)}),Ge=ce.extend({layerLevel:_().default(0),src:C().default("./viewWhichRendersConfigurationAndUi/_assets/images/KeyDefault.png"),opacity:_().min(0).max(1).default(1)}),Je=ce.extend({hitboxSize:z({widthInPx:_().default(640),lengthInPx:_().default(480)}).default({widthInPx:640,lengthInPx:480}),url:C().default("https://www.youtube.com/embed/dQw4w9WgXcQ"),opacity:_().min(0).max(1).default(1),interactionMode:B(["readonly","interactableOnFocus"]).default("interactableOnFocus")}),Ss=sn([z({LinearInputIndicator:Z}),z({PlanarInputIndicator:Se}),z({Text:M}),z({Image:Ge}),z({WebEmbed:Je})]),ks=z({canvas:_s,objects:rn(Ss)});function zs(e){const t=ks.safeParse(e);return t.success?{success:!0,data:t.data}:{success:!1,error:t.error}}a(zs,"validateCustomisableCanvasConfig");function Cs(e){return e.type===null||e.axis===null?null:(e.type==="left"?0:2)+(e.axis==="X"?0:1)}a(Cs,"asConventionalGamepadAxisNumber");const it=class it extends Y{constructor(t,n){super(n),this.config=Z.parse(t||{}),this.runtimeState={value:0,previousValue:0,opacity:1}}update(t){let n=0,i=0;const o=window.keyboard,r=this.config.input.keyboard.keyCode;n+=r&&o[r]?1:0;const s=window.mouse,u=this.config.input.mouse.button;u!==null&&s.buttons[u]&&(n+=1);const c=this.config.input.mouse.wheel;c!==null&&s.wheelEvents&&(c==="up"&&s.wheelEvents.up||c==="down"&&s.wheelEvents.down)&&(n+=1);const d=this.config.processing.antiDeadzone;let h=Math.max(0,d-i*.5);const y=window.gamepads;if(y)for(let w=0;w<y.length;w++){const p=y[w];if(!p)continue;const S=this.config.input.gamepad.stick,F=Cs(S);if(p.axes&&F!==null){const x=p.axes[F],$=S.direction==="negative",j=this.config.processing.radialCompensationAxis,L=j>=0?p.axes[j]:void 0;x!=null&&($===!0&&x<0||$===!1&&x>0)&&(j>=0&&L!==void 0?n+=Math.abs(x)*Math.sqrt(1+2*Math.pow(Math.abs(L),2)):j<0&&(n+=(Math.abs(x)-h)/(1-h))),j>=0&&L!==void 0&&(i+=Math.abs(L))}const E=this.config.input.gamepad.button.index;if(p.buttons&&E!==null){const x=p.buttons[E];x&&(n+=x.value)}}h>=1&&(h=.999);const f=this.config.processing.multiplier,g=Math.max(Math.min((n-h)/(1-h)*f,1),0),v=this.config.processing.fadeOutDuration;if(g>0)this.runtimeState.value=g,this.runtimeState.opacity=1;else if(v>0&&this.runtimeState.value>0){const w=1/v;this.runtimeState.opacity=this.runtimeState.opacity*Math.exp(-w*t),this.runtimeState.opacity<.001&&(this.runtimeState.opacity=0,this.runtimeState.value=0)}else this.runtimeState.value=0,this.runtimeState.opacity=1;return!0}draw(t,n,i){n.fillStyle=this.config.display.fillStyleBackground,n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx);const o=n.globalAlpha;n.globalAlpha*=this.runtimeState.opacity,n.fillStyle=this.config.display.fillStyle,this.config.display.fillDirection==="reversed"?n.fillRect(0,this.config.hitboxSize.lengthInPx,this.config.hitboxSize.widthInPx,-this.config.hitboxSize.lengthInPx*this.runtimeState.value):n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx*this.runtimeState.value),n.globalAlpha=o,n.strokeStyle=this.config.display.strokeStyle,n.lineWidth=this.config.display.strokeWidth,n.strokeRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx);const s=this.config.display.text,u=this.config.display.fontStyle,c=this.config.hitboxSize.widthInPx*.5,d=this.config.hitboxSize.lengthInPx*.5;ee(n,u),n.strokeStyle=u.strokeStyle??"white",n.lineWidth=u.strokeWidth??3,n.strokeText(s,c,d),Lt(n,c,d,s,u)}};a(it,"LinearInputIndicator");let Te=it;const k=class k{constructor(t,n,i){this.x=t||0,this.y=n||0,this.z=i||0}negative(){return new k(-this.x,-this.y,-this.z)}add(t){return t instanceof k?new k(this.x+t.x,this.y+t.y,this.z+t.z):new k(this.x+t,this.y+t,this.z+t)}subtract(t){return t instanceof k?new k(this.x-t.x,this.y-t.y,this.z-t.z):new k(this.x-t,this.y-t,this.z-t)}multiply(t){return t instanceof k?new k(this.x*t.x,this.y*t.y,this.z*t.z):new k(this.x*t,this.y*t,this.z*t)}divide(t){return t instanceof k?new k(this.x/t.x,this.y/t.y,this.z/t.z):new k(this.x/t,this.y/t,this.z/t)}equals(t){return this.x==t.x&&this.y==t.y&&this.z==t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new k(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}length(){return Math.sqrt(this.dot(this))}unit(){return this.divide(this.length())}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}}angleTo(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}toArray(t){return[this.x,this.y,this.z].slice(0,t||3)}clone(){return new k(this.x,this.y,this.z)}init(t,n,i){return this.x=t,this.y=n,this.z=i,this}static negative(t,n){return n.x=-t.x,n.y=-t.y,n.z=-t.z,n}static add(t,n,i){return n instanceof k?(i.x=t.x+n.x,i.y=t.y+n.y,i.z=t.z+n.z):(i.x=t.x+n,i.y=t.y+n,i.z=t.z+n),i}static subtract(t,n,i){return n instanceof k?(i.x=t.x-n.x,i.y=t.y-n.y,i.z=t.z-n.z):(i.x=t.x-n,i.y=t.y-n,i.z=t.z-n),i}static multiply(t,n,i){return n instanceof k?(i.x=t.x*n.x,i.y=t.y*n.y,i.z=t.z*n.z):(i.x=t.x*n,i.y=t.y*n,i.z=t.z*n),i}static divide(t,n,i){return n instanceof k?(i.x=t.x/n.x,i.y=t.y/n.y,i.z=t.z/n.z):(i.x=t.x/n,i.y=t.y/n,i.z=t.z/n),i}static cross(t,n,i){return i.x=t.y*n.z-t.z*n.y,i.y=t.z*n.x-t.x*n.z,i.z=t.x*n.y-t.y*n.x,i}static unit(t,n){const i=t.length();return n.x=t.x/i,n.y=t.y/i,n.z=t.z/i,n}static fromAngles(t,n){return new k(Math.cos(t)*Math.cos(n),Math.sin(n),Math.sin(t)*Math.cos(n))}static randomDirection(){return k.fromAngles(Math.random()*Math.PI*2,Math.asin(Math.random()*2-1))}static min(t,n){return new k(Math.min(t.x,n.x),Math.min(t.y,n.y),Math.min(t.z,n.z))}static max(t,n){return new k(Math.max(t.x,n.x),Math.max(t.y,n.y),Math.max(t.z,n.z))}static lerp(t,n,i){return n.subtract(t).multiply(i).add(t)}static fromArray(t){return new k(t[0],t[1],t[2])}static angleBetween(t,n){return t.angleTo(n)}};a(k,"Vector");let re=k;const ot=class ot extends Y{constructor(t,n){super(n),this.config=Se.parse(t||{}),this.runtimeState={inputVector:new re(0,0),previousX:0,previousY:0}}update(){let t=0,n=0;const i=window.keyboard;if(i){const r=this.config.input.xKeyCodePositive,s=this.config.input.xKeyCodeNegative,u=this.config.input.yKeyCodePositive,c=this.config.input.yKeyCodeNegative;r&&i[r]&&(t+=1),s&&i[s]&&(t-=1),u&&i[u]&&(n+=1),c&&i[c]&&(n-=1)}const o=window.gamepads;if(o)for(let r=0;r<o.length;r++){const s=o[r];if(s&&s.axes)for(let u=0;u<s.axes.length;u++){const c=s.axes[u];this.config.input.xAxes[u]&&c!==void 0&&(t+=c),this.config.input.yAxes[u]&&c!==void 0&&(n+=c)}}return this.config.input.invertX&&(t*=-1),this.config.input.invertY&&(n*=-1),this.runtimeState.previousX=this.runtimeState.inputVector.x,this.runtimeState.previousY=this.runtimeState.inputVector.y,this.runtimeState.inputVector.x=Math.max(Math.min(t,1),-1),this.runtimeState.inputVector.y=Math.max(Math.min(n,1),-1),this.runtimeState.previousX!==this.runtimeState.inputVector.x||this.runtimeState.previousY!==this.runtimeState.inputVector.y}draw(t,n){ee(n,{lineCap:"round"});const i=this.config.display.radius;n.transform(1,0,0,1,i,i),n.beginPath(),ke(n,0,0,i,0,2*Math.PI,this.config.display.backgroundStyle),n.stroke(),n.fill();const o=this.config.processing.deadzone;if(o>0&&(n.beginPath(),ke(n,0,0,i*o,0,2*Math.PI,this.config.display.deadzoneStyle),n.fill()),n.save(),this.config.display.xLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.xLineStyle.opacity),n.beginPath(),pt(n,0,0,this.runtimeState.inputVector.x*i,0,this.config.display.xLineStyle),n.stroke(),n.restore(),n.save(),this.config.display.yLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.yLineStyle.opacity),n.beginPath(),pt(n,0,0,0,this.runtimeState.inputVector.y*i,this.config.display.yLineStyle),n.stroke(),n.restore(),this.runtimeState.inputVector.length()>o){const r=this.runtimeState.inputVector.unit(),s=this.runtimeState.inputVector.toAngles(),u=this.config.processing.antiDeadzone,c=re.fromAngles(s.theta,s.phi).multiply((this.runtimeState.inputVector.length()-u)/(1-u));n.save(),this.config.display.unitVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.unitVectorStyle.opacity),n.beginPath(),ft(n,0,0,r.x*i,r.y*i,this.config.display.unitVectorStyle),n.stroke(),n.restore(),n.save(),this.config.display.inputVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.inputVectorStyle.opacity),n.beginPath(),ft(n,0,0,c.x*i,c.y*i,this.config.display.inputVectorStyle),n.stroke(),n.restore()}n.beginPath(),ke(n,0,0,2,0,2*Math.PI,this.config.display.crosshairStyle),n.fill(),n.stroke(),n.closePath()}};a(ot,"PlanarInputIndicator");let $e=ot;const rt=class rt extends Y{constructor(t,n){super(n),this.config=M.parse(t||{})}update(){return!0}draw(t,n){n.beginPath(),n.textBaseline="middle",n.textAlign="left";const i=0,o=this.config.hitboxSize.lengthInPx/2;this.config.shouldStroke&&(n.strokeStyle=this.config.textStyle.strokeStyle??"white",n.lineWidth=this.config.textStyle.strokeWidth??3,n.strokeText(this.config.text,i,o)),Lt(n,i,o,this.config.text,this.config.textStyle)}};a(rt,"Text");let Fe=rt;var q;let Is=(q=class extends Y{constructor(t,n){super(n),this.config=Ge.parse(t||{}),this.runtimeState={imageElement:new window.Image},this.runtimeState.imageElement.src=this.config.src}update(){return this.runtimeState.imageElement.complete}draw(t,n){if(this.runtimeState.imageElement.complete){n.save(),n.globalAlpha*=this.config.opacity;try{n.drawImage(this.runtimeState.imageElement,0,0,this.runtimeState.imageElement.width,this.runtimeState.imageElement.height,0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx)}catch{}n.restore()}}},a(q,"Image"),q);const Ie=new Map,st=class st extends Y{constructor(t,n){super(n),this.config=Je.parse(t||{}),this.runtimeState={iframe:null},this.findOrCreateIframe()}findOrCreateIframe(){const t=Ie.get(this.objArrayIdx);if(t&&t.parentNode){this.runtimeState.iframe=t,this.runtimeState.iframe.src!==this.config.url&&(this.runtimeState.iframe.src=this.config.url);return}this.runtimeState.iframe=document.createElement("iframe"),this.runtimeState.iframe.src=this.config.url,this.runtimeState.iframe.style.position="absolute";const n=50;this.runtimeState.iframe.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+n+"px",this.runtimeState.iframe.style.top=this.config.positionOnCanvas.pxFromCanvasTop+n+"px",this.runtimeState.iframe.style.width=this.config.hitboxSize.widthInPx-n*2+"px",this.runtimeState.iframe.style.height=this.config.hitboxSize.lengthInPx-n*2+"px",this.runtimeState.iframe.style.opacity=this.config.opacity.toString(),this.runtimeState.iframe.style.border="2px solid #B4B4B4",this.runtimeState.iframe.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto",this.runtimeState.iframe.style.zIndex="1",this.runtimeState.iframe.setAttribute("allowfullscreen",""),this.runtimeState.iframe.setAttribute("allowtransparency","true"),document.body.appendChild(this.runtimeState.iframe),Ie.set(this.objArrayIdx,this.runtimeState.iframe)}update(){return this.runtimeState.iframe&&(this.runtimeState.iframe.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+50+"px",this.runtimeState.iframe.style.top=this.config.positionOnCanvas.pxFromCanvasTop+50+"px",this.runtimeState.iframe.style.width=this.config.hitboxSize.widthInPx-100+"px",this.runtimeState.iframe.style.height=this.config.hitboxSize.lengthInPx-100+"px",this.runtimeState.iframe.style.opacity=this.config.opacity.toString(),this.runtimeState.iframe.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto"),!1}draw(t,n,i=!1){this.runtimeState.iframe&&(this.runtimeState.iframe.style.display=i?"none":"block"),n.strokeStyle="#FF00FF",n.lineWidth=2,n.strokeRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx),i&&(n.fillStyle="#808080",n.fillRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.strokeStyle="#B4B4B4",n.lineWidth=2,n.strokeRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.fillStyle="black",n.font="14px monospace",n.fillText(this.config.url,55,40),n.font="20px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText("WebEmbed",this.config.hitboxSize.widthInPx/2,this.config.hitboxSize.lengthInPx/2))}cleanup(){this.runtimeState.iframe&&this.runtimeState.iframe.parentNode&&(this.runtimeState.iframe.parentNode.removeChild(this.runtimeState.iframe),this.runtimeState.iframe=null),Ie.delete(this.objArrayIdx)}};a(st,"WebEmbed");let je=st;const ne={LinearInputIndicator:Te,PlanarInputIndicator:$e,Text:Fe,Image:Is,WebEmbed:je};function Ps(e){return e in ne}a(Ps,"isCanvasObjectClassName");function Le(e,t){for(const n in e)if(Ps(n)){const i=ne[n],o=e[n];return new i(o,t)}throw new Error("Invalid config: no valid class name found")}a(Le,"deserializeCanvasObject");const at=class at{constructor(){this.className="PropertyEdit",this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.deleteCallback=null,this.pendingChanges=new Map}hidePropertyEdit(){const t=document.getElementById("propertyTable"),n=document.getElementById("sceneConfigText"),i=document.getElementById("leftPanel"),o=document.getElementById("containerForPossibleEditorWindows");if(!(!t||!i)){if(this.configManager&&this.targetObjectIndex!==null&&this.pendingChanges.size>0&&(this.configManager.updateObject(this.targetObjectIndex,this.pendingChanges),this.pendingChanges.clear()),n&&!n.hidden&&this.applySceneConfig&&(document.activeElement===n||n.dataset.modified==="true"))try{const s=JSON.parse(n.value);this.applySceneConfig(s),n.dataset.modified="false"}catch(s){console.error("Invalid JSON in canvas config:",s),alert("Invalid JSON syntax. Please fix the configuration.");return}for(;t.firstChild!==null;)t.removeChild(t.firstChild);n&&(n.hidden=!0,n.value=""),t&&(t.hidden=!0),i&&(i.hidden=!0),o&&(o.hidden=!0),this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.pendingChanges.clear()}}showPropertyEdit(t,n,i,o,r){this.targetObject=n,this.targetObjectIndex=i,this.configManager=o,this.deleteCallback=r||null,this.pendingChanges.clear();const s=document.getElementById("containerForPossibleEditorWindows"),u=document.getElementById("propertyTable"),c=document.getElementById("sceneConfigText"),d=document.getElementById("editorTitle"),h=document.getElementById("leftPanel"),y=document.getElementById("rightPanel");if(!s||!u||!d||!h)return;h.hidden=!1,c&&(c.hidden=!0),u.hidden=!1,y&&(y.hidden=!0);const f=Object.keys(t)[0]||"unknown",g=t[f];for(d.innerHTML=f;u.firstChild!==null;)u.removeChild(u.firstChild);if(this.renderProperties(u,[],g,g),this.deleteCallback){const v=document.createElement("tr");v.className="property";const w=document.createElement("td");w.colSpan=2,w.style.paddingTop="20px";const p=document.createElement("button");p.textContent="Delete Object",p.style.width="100%",p.style.padding="10px",p.style.backgroundColor="rgba(120, 40, 40, 0.9)",p.style.color="#cdc1c1",p.style.border="1px solid #B4B4B4",p.style.cursor="pointer",p.style.fontFamily="Lucida Console",p.style.fontSize="1em",p.addEventListener("click",()=>{confirm("Delete this object?")&&(this.deleteCallback&&this.deleteCallback(),this.hidePropertyEdit())}),w.appendChild(p),v.appendChild(w),u.appendChild(v)}s.hidden=!1}showCanvasConfig(t,n,i){this.targetScene=t,this.applySceneConfig=i;const o=document.getElementById("containerForPossibleEditorWindows"),r=document.getElementById("propertyTable"),s=document.getElementById("sceneConfigText"),u=document.getElementById("editorTitle"),c=document.getElementById("leftPanel");!o||!r||!s||!u||!c||(c.hidden=!1,r.hidden=!0,s.hidden=!1,u.innerHTML="Canvas Configuration",s.value=JSON.stringify(t,null,2),s.dataset.modified="false",s.oninput=()=>{s.dataset.modified="true"})}renderProperties(t,n,i,o){if(this.isRecord(i))for(const r in i){const s=[...n,r],u=i[r],c=this.getNestedValue(o,s);if(this.isPlainObject(u)){const d=this.createPropertyHeader(r,n.length);t.appendChild(d),this.renderProperties(t,s,u,o)}else{const d=this.createPropertyRow(r,c,s,o,n.length);t.appendChild(d)}}}isRecord(t){return this.isPlainObject(t)}createPropertyHeader(t,n){const i=document.createElement("div");return i.style.marginLeft=`${n*20}px`,i.style.marginTop="8px",i.style.marginBottom="4px",i.style.color="#AAAAAA",i.style.fontWeight="bold",i.textContent=t+":",i}createPropertyRow(t,n,i,o,r){const s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.marginLeft=`${r*20}px`,s.style.marginBottom="4px",s.style.gap="10px";const u=document.createElement("label");u.textContent=t+":",u.style.minWidth="120px",u.style.color="#FFFFFF",s.appendChild(u);const c=this.createInput(n,i,o);return s.appendChild(c),s}createInput(t,n,i){const o=document.createElement("input");return o.type="text",o.value=this.valueToString(t),o.style.width="200px",o.style.padding="4px",o.style.fontFamily="monospace",o.addEventListener("input",()=>{try{const r=this.parseValue(o.value),s=n.join(".");this.pendingChanges.set(s,{path:n,value:r}),o.style.borderColor="",this.setNestedValue(i,n,r)}catch(r){console.error("[PropertyEdit] Failed to parse input:",r),o.style.borderColor="red"}}),o}valueToString(t){if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean")return String(t);if(typeof t=="object")try{return JSON.stringify(t)}catch{return"[Object]"}return"[Unknown]"}parseValue(t){if(t==="null")return null;if(t==="undefined")return;if(t==="true")return!0;if(t==="false")return!1;if(t==="")return null;const n=Number(t);if(!isNaN(n)&&t.trim()!=="")return n;try{return JSON.parse(t)}catch{return t}}getNestedValue(t,n){if(!this.isRecord(t))return;let i=t;const o=n.filter(r=>r!=="Base Properties");for(const r of o){if(i==null)return;const s=i[r];if(this.isRecord(s))i=s;else return s}return i}setNestedValue(t,n,i){if(!this.isRecord(t))return;let o=t;const r=n.filter(u=>u!=="Base Properties");for(let u=0;u<r.length-1;u++){const c=r[u];if(!c)continue;(o[c]===null||o[c]===void 0)&&(o[c]={});const d=o[c];if(this.isRecord(d))o=d;else{o[c]={};const h=o[c];this.isRecord(h)&&(o=h)}}const s=r[r.length-1];s!==void 0&&(o[s]=i)}isPlainObject(t){return t===null||typeof t!="object"||t instanceof Image||t instanceof HTMLElement||Array.isArray(t)?!1:t.constructor===Object}update(){}draw(){}};a(at,"PropertyEdit");let De=at;function Os(e){try{const t=JSON.parse(e),n=zs(t);return n.success?{success:!0,config:n.data}:{success:!1,error:`Config validation failed: ${n.error.issues.map(o=>`${o.path.join(".")}: ${o.message}`).join("; ")}`}}catch(t){return t instanceof SyntaxError?{success:!1,error:`Invalid JSON: ${t.message}`}:{success:!1,error:`Unknown error: ${String(t)}`}}}a(Os,"loadConfigFromJSON");function Es(e){const t=localStorage.getItem(e);return t?Os(t):{success:!1,error:"not_found"}}a(Es,"loadConfigFromLocalStorage");function As(e,t,n,i){if(t<0||t>=e.objects.length)return e;const o=[...e.objects],r=o[t];if(!r)return e;const u=Object.entries(r)[0];if(!u)return e;const[c,d]=u;if(!c||!d)return e;const h={...d,positionOnCanvas:{pxFromCanvasLeft:n,pxFromCanvasTop:i}};return o[t]={[c]:h},{...e,objects:o}}a(As,"updateObjectPosition");function Zs(e,t,n){return{...e,canvas:{...e.canvas,width:t,height:n}}}a(Zs,"updateCanvasDimensions");function Ts(e,t){return{...e,objects:[...e.objects,t]}}a(Ts,"addObject");function $s(e,t){return t<0||t>=e.objects.length?e:{...e,objects:e.objects.filter((n,i)=>i!==t)}}a($s,"removeObject");function Fs(e,t,n){if(t<0||t>=e.objects.length||n.size===0)return e;const i=[...e.objects],o=i[t];if(!o)return e;const s=Object.entries(o)[0];if(!s)return e;const[u,c]=s;if(!u||!c)return e;let d=JSON.parse(JSON.stringify(c));return n.forEach(({path:h,value:y})=>{if(h.length===0)return;let f=d;for(let v=0;v<h.length-1;v++){const w=h[v];w&&(f[w]===void 0&&(f[w]={}),f=f[w])}const g=h[h.length-1];g!==void 0&&(f[g]=y)}),i[t]={[u]:d},{...e,objects:i}}a(Fs,"updateObjectByIndex");const ct=class ct{constructor(t){this.changeCallbacks=[],this.saveCallback=null,this._config=t}get config(){return this._config}setConfig(t){t!==this._config&&(this._config=t,this.changeCallbacks.forEach(n=>{n(t)}),this.saveCallback&&this.saveCallback(t))}onChange(t){return this.changeCallbacks.push(t),()=>{this.changeCallbacks=this.changeCallbacks.filter(n=>n!==t)}}onSave(t){this.saveCallback=t}moveObject(t,n,i){const o=As(this._config,t,n,i);this.setConfig(o)}resizeCanvas(t,n){const i=Zs(this._config,t,n);this.setConfig(i)}updateObject(t,n){const i=Fs(this._config,t,n);this.setConfig(i)}addObject(t){const n=Ts(this._config,t);this.setConfig(n)}deleteObject(t){const n=$s(this._config,t);this.setConfig(n)}};a(ct,"ConfigManager");let Ne=ct;function He(e,t=2e3){const n=document.getElementById("toastContainer");if(!n){console.warn("[Toast] Container not found");return}const i=document.createElement("div");i.className="BoxWhichNotifiesUserOfStatusUpdates",i.textContent=e,n.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},t)}a(He,"showToast");const ut=class ut{constructor(t,n){this.cache=null,this.canvas=t;const i=t.getContext("2d");if(!i)throw new Error("Failed to get 2D context");this.ctx=i,this.deserializer=n}deserializeObjects(t){const n=[];for(let i=0;i<t.objects.length;i++){const o=t.objects[i];if(o)try{n.push(this.deserializer(o,i))}catch(r){console.error("[CanvasRenderer] Deserialization failed:",o,r)}}return n}update(t,n){var o;((o=this.cache)==null?void 0:o.config)!==t&&(this.cache={config:t,objects:this.deserializeObjects(t)});const i=this.cache;if(!i)throw new Error("Cache should be initialized");for(let r=0;r<i.objects.length;r++){const s=i.objects[r];s&&s.update(n)}return i.objects}render(t,n){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const o=t.map((r,s)=>({obj:r,idx:s})).sort((r,s)=>r.obj.config.layerLevel-s.obj.config.layerLevel);for(const{obj:r,idx:s}of o)s!==n&&r&&(this.ctx.setTransform(1,0,0,1,r.config.positionOnCanvas.pxFromCanvasLeft,r.config.positionOnCanvas.pxFromCanvasTop),r.draw(this.canvas,this.ctx),this.ctx.closePath())}renderOverlay(t){t(this.canvas,this.ctx)}renderDebugHitboxes(t,n){for(let i=0;i<t.length;i++){if(n&&!n.has(i))continue;const o=t[i];o&&(this.ctx.setTransform(1,0,0,1,o.config.positionOnCanvas.pxFromCanvasLeft,o.config.positionOnCanvas.pxFromCanvasTop),this.ctx.beginPath(),this.ctx.strokeStyle="#FF00FF",this.ctx.lineWidth=1,this.ctx.rect(0,0,o.config.hitboxSize.widthInPx,o.config.hitboxSize.lengthInPx),this.ctx.stroke())}}renderSelectionBox(t,n,i,o){const r=Math.min(t,i),s=Math.max(t,i),u=Math.min(n,o),c=Math.max(n,o);this.ctx.setTransform(1,0,0,1,0,0),this.ctx.beginPath(),this.ctx.strokeStyle="rgba(0, 120, 255, 0.8)",this.ctx.fillStyle="rgba(0, 120, 255, 0.1)",this.ctx.lineWidth=2,this.ctx.rect(r,u,s-r,c-u),this.ctx.fill(),this.ctx.stroke()}};a(ut,"CanvasRenderer");let Be=ut;const lt=class lt{constructor(){this.selectedObjectIndices=new Set,this.draggingOffset=new re(0,0),this.gridsize=10,this.editingProperties=!1,this.creationPanelActive=!1,this.dragStartPosition=null,this.lastDragPosition=null,this.disableInteractions=!1,this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1,this.onMoveObject=null,this.onDeleteObject=null,this.onShowPropertyEdit=null,this.onShowCreationPanel=null,this.onCloseEditors=null}setOnMoveObject(t){this.onMoveObject=t}setOnDeleteObject(t){this.onDeleteObject=t}setOnShowPropertyEdit(t){this.onShowPropertyEdit=t}setOnShowCreationPanel(t){this.onShowCreationPanel=t}setOnCloseEditors(t){this.onCloseEditors=t}setEditingProperties(t){this.editingProperties=t}setCreationPanelActive(t){this.creationPanelActive=t}setDisableInteractions(t){this.disableInteractions=t}getSelectedIndices(){return this.selectedObjectIndices}isSelected(t){return this.selectedObjectIndices.has(t)}clearSelection(){this.selectedObjectIndices.clear(),this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1}deleteSelectedObjects(){if(!this.onDeleteObject)return;const t=Array.from(this.selectedObjectIndices).sort((n,i)=>i-n);for(const n of t)this.onDeleteObject(n);this.clearSelection()}update(t){if(this.disableInteractions)return!1;if(b.clicks[0]===!0){let n=null;for(let i=t.length-1;i>=0;i--){const o=t[i];if(!o)continue;const{positionOnCanvas:r,hitboxSize:s}=o.config;if(!(!r||!s)&&b.x>r.pxFromCanvasLeft&&b.y>r.pxFromCanvasTop&&b.x<r.pxFromCanvasLeft+s.widthInPx&&b.y<r.pxFromCanvasTop+s.lengthInPx){n=i;break}}if(n!==null){const i=t[n],{positionOnCanvas:o}=i.config;this.selectedObjectIndices.has(n)?o&&(this.draggingOffset.x=o.pxFromCanvasLeft-b.x,this.draggingOffset.y=o.pxFromCanvasTop-b.y,this.dragStartPosition={x:o.pxFromCanvasLeft,y:o.pxFromCanvasTop}):(this.selectedObjectIndices.clear(),this.selectedObjectIndices.add(n),o&&(this.draggingOffset.x=o.pxFromCanvasLeft-b.x,this.draggingOffset.y=o.pxFromCanvasTop-b.y,this.dragStartPosition={x:o.pxFromCanvasLeft,y:o.pxFromCanvasTop})),this.isSelectingBox=!1}else this.selectedObjectIndices.clear(),this.selectionBoxStart={x:b.x,y:b.y},this.selectionBoxEnd={x:b.x,y:b.y},this.isSelectingBox=!0,this.dragStartPosition=null,this.lastDragPosition=null}if(b.buttons[0]===!0){if(this.isSelectingBox&&this.selectionBoxStart)this.selectionBoxEnd={x:b.x,y:b.y};else if(this.selectedObjectIndices.size>0&&this.dragStartPosition){const n=Math.round((b.x+this.draggingOffset.x)/this.gridsize)*this.gridsize,i=Math.round((b.y+this.draggingOffset.y)/this.gridsize)*this.gridsize;this.lastDragPosition={x:n,y:i}}}if(b.buttons[0]===!1){if(this.isSelectingBox&&this.selectionBoxStart&&this.selectionBoxEnd){const n=Math.min(this.selectionBoxStart.x,this.selectionBoxEnd.x),i=Math.max(this.selectionBoxStart.x,this.selectionBoxEnd.x),o=Math.min(this.selectionBoxStart.y,this.selectionBoxEnd.y),r=Math.max(this.selectionBoxStart.y,this.selectionBoxEnd.y);this.selectedObjectIndices.clear();for(let s=0;s<t.length;s++){const u=t[s];if(!u)continue;const{positionOnCanvas:c,hitboxSize:d}=u.config;if(!c||!d)continue;const h=c.pxFromCanvasLeft,y=h+d.widthInPx,f=c.pxFromCanvasTop,g=f+d.lengthInPx;y<n||h>i||g<o||f>r||this.selectedObjectIndices.add(s)}this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1}else if(this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition){const n=this.lastDragPosition.x-this.dragStartPosition.x,i=this.lastDragPosition.y-this.dragStartPosition.y;if((n!==0||i!==0)&&this.onMoveObject)for(const o of this.selectedObjectIndices){const r=t[o];if(!r)continue;const{positionOnCanvas:s}=r.config;if(!s)continue;const u=s.pxFromCanvasLeft+n,c=s.pxFromCanvasTop+i;this.onMoveObject(o,u,c)}this.dragStartPosition=null,this.lastDragPosition=null}}if(b.clicks[2]===!0){let n=null;for(let i=t.length-1;i>=0;i--){const o=t[i];if(!o)continue;const{positionOnCanvas:r,hitboxSize:s}=o.config;if(!(!r||!s)&&b.x>r.pxFromCanvasLeft&&b.y>r.pxFromCanvasTop&&b.x<r.pxFromCanvasLeft+s.widthInPx&&b.y<r.pxFromCanvasTop+s.lengthInPx){n=i;break}}n!==null&&!this.editingProperties&&!this.creationPanelActive?this.onShowPropertyEdit&&this.onShowPropertyEdit(t[n]):n===null&&!this.editingProperties&&!this.creationPanelActive&&this.onShowCreationPanel&&this.onShowCreationPanel()}return!1}hasSelection(){return this.selectedObjectIndices.size>0}getSelectionBox(){return this.isSelectingBox&&this.selectionBoxStart&&this.selectionBoxEnd?{startX:this.selectionBoxStart.x,startY:this.selectionBoxStart.y,endX:this.selectionBoxEnd.x,endY:this.selectionBoxEnd.y}:null}getDragPreview(){return this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition?{deltaX:this.lastDragPosition.x-this.dragStartPosition.x,deltaY:this.lastDragPosition.y-this.dragStartPosition.y}:null}getDragOriginalPosition(){return this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition?{x:this.dragStartPosition.x,y:this.dragStartPosition.y}:null}};a(lt,"UserEditModeInteractionsController");let Me=lt;dn();const js={LinearInputIndicator:Z,PlanarInputIndicator:Se,Text:M,Image:Ge,WebEmbed:Je};window.gamepads=null;window.keyboard=ie;window.mouse=b;window.addEventListener("load",function(){const e=document.getElementById("canvas");if(!e)throw new Error("Canvas element not found");if(!e.getContext("2d"))throw new Error("Could not get 2D context");e.width=window.innerWidth,e.height=window.innerHeight;const n=new Ne({canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:[]}),i=new Be(e,Le),o=new Me;if(window.electronAPI){const p=window.electronAPI.isAppInReadonlyClickthroughMode();o.setDisableInteractions(p),console.log("[default.ts] Readonly/clickthrough mode:",p)}const r=Ns(e),s=Bs(e,n,o);o.setOnMoveObject((p,S,F)=>{n.moveObject(p,S,F)}),o.setOnDeleteObject(p=>{s.deleteObjectAtIndex(p)}),o.setOnShowPropertyEdit(p=>{const S=p.objArrayIdx,E=n.config.objects[S];if(!E){console.error("[PropertyEdit] Could not find config for object at index",S);return}s.propertyEditor.showPropertyEdit(E,p,S,n,()=>{s.deleteObjectAtIndex(S)}),o.setEditingProperties(!0)}),o.setOnShowCreationPanel(()=>{s.showBothPanels()}),o.setOnCloseEditors(()=>{s.hideBothPanels()}),e.addEventListener("contextmenu",p=>{if(p.preventDefault(),window.electronAPI&&window.electronAPI.isAppInReadonlyClickthroughMode())return;let S=!1;const E=n.config.objects.map((x,$)=>Le(x,$));for(let x=0;x<E.length;x++){const $=E[x];if($){const{positionOnCanvas:j,hitboxSize:L}=$.config;if(j&&L&&p.offsetX>j.pxFromCanvasLeft&&p.offsetY>j.pxFromCanvasTop&&p.offsetX<j.pxFromCanvasLeft+L.widthInPx&&p.offsetY<j.pxFromCanvasTop+L.lengthInPx){S=!0;break}}}S||s.showBothPanels()});const c=Ds()||r;c.canvas&&(e.width=c.canvas.width,e.height=c.canvas.height),n.onSave(p=>{Ls(p),He("Saved")}),n.setConfig(c);let d=[];function h(){i.render(d);const p=o.getSelectionBox();p&&i.renderSelectionBox(p.startX,p.startY,p.endX,p.endY);const S=o.getSelectedIndices();o.hasSelection()&&i.renderDebugHitboxes(d,S);const F=o.getDragPreview();if(F&&S.size>0)for(const E of S){const x=d[E];if(!x)continue;const{positionOnCanvas:$}=x.config;$&&i.renderOverlay((j,L)=>{L.save(),L.globalAlpha=.5,L.setTransform(1,0,0,1,$.pxFromCanvasLeft+F.deltaX,$.pxFromCanvasTop+F.deltaY),x.draw(j,L,!0),L.restore()})}}a(h,"frameUpdate");let y=0;function f(p){const S=(p-y)/1e3;y=p;let F=!1;if(window.gamepads=ln(),!window._gamepadDebugLogged){const x=window.gamepads;let $=0;for(let j=0;j<x.length;j++)x[j]&&$++;$>0&&(window._gamepadDebugLogged=!0)}const E=n.config;d=i.update(E,S),F=!0,o.update(d),w(),F&&h(),b.update(S),window.requestAnimationFrame(f)}a(f,"updateLoop"),window.requestAnimationFrame(f),h();function g(){e.width=window.innerWidth,e.height=window.innerHeight,h()}a(g,"resizeCanvas"),window.addEventListener("resize",g);const v=document.getElementById("deleteSelectedSnackbar");function w(){v&&(o.hasSelection()?v.style.display="block":v.style.display="none")}a(w,"updateDeleteSnackbarVisibility"),document.addEventListener("keydown",p=>{if(p.key==="Backspace"&&o.hasSelection()){p.preventDefault();const S=o.getSelectedIndices().size,F=S===1?"Delete this object?":`Delete ${S} objects?`;confirm(F)&&o.deleteSelectedObjects()}})},!1);const pe="analogKeyboardOverlay_sceneConfig";function Ls(e){try{const t={version:"5847eab",...e};localStorage.setItem(pe,JSON.stringify(t))}catch(t){console.error("[Config] Failed to save:",t)}}a(Ls,"saveSceneConfig");function Ds(){try{const e=localStorage.getItem(pe);if(!e)return null;const t=JSON.parse(e);if(t.version!=="5847eab")return console.warn(`[Config] Version mismatch: stored=${t.version}, current=5847eab. Clearing localStorage.`),localStorage.removeItem(pe),He("Config version changed - reset to defaults"),null;const n=Es(pe);return n.success?n.config:(console.error("[Config] Validation failed:",n.error),console.error("[Config] Raw data from localStorage:",e),null)}catch(e){return console.error("[Config] Failed to load:",e),null}}a(Ds,"loadSceneConfig");function Ns(e){const t=[{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:20},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 1: Left Stick + WASD + Mouse - WITH radial compensation vs WITHOUT",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:45},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Move diagonally: LEFT shows ~100% (compensated), RIGHT shows ~70% (raw circular)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{PlanarInputIndicator:Se.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:80},input:{xAxes:{0:!0},yAxes:{1:!0}}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:240,pxFromCanvasTop:80},input:{keyboard:{keyCode:"KeyW"},mouse:{button:3,wheel:"up"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},processing:{radialCompensationAxis:0},display:{text:"W"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:150,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyA"},mouse:{button:0},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},processing:{radialCompensationAxis:1},display:{text:"A"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:250,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyS"},mouse:{button:4,wheel:"down"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},processing:{radialCompensationAxis:0},display:{text:"S"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:350,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyD"},mouse:{button:1},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},processing:{radialCompensationAxis:1},display:{text:"D"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:740,pxFromCanvasTop:80},input:{keyboard:{keyCode:"KeyW"},mouse:{button:3,wheel:"up"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},display:{text:"W"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:650,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyA"},mouse:{button:0},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},display:{text:"A"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:750,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyS"},mouse:{button:4,wheel:"down"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},display:{text:"S"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:850,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyD"},mouse:{button:1},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},display:{text:"D"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:20},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 1B: Right Gamepad Stick (IJKL)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:45},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Same as Test 1, but using right stick",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1150,pxFromCanvasTop:80},input:{gamepad:{stick:{type:"right",axis:"Y",direction:"negative"}}},processing:{radialCompensationAxis:2},display:{text:"I"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"X",direction:"negative"}}},processing:{radialCompensationAxis:3},display:{text:"J"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1150,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"Y",direction:"positive"}}},processing:{radialCompensationAxis:2},display:{text:"K"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1250,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"X",direction:"positive"}}},processing:{radialCompensationAxis:3},display:{text:"L"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:300},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 3: Gamepad Buttons (Digital)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:325},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Face buttons (A/B/X/Y) - digital on/off, no pressure sensitivity",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:150,pxFromCanvasTop:360},input:{gamepad:{button:{index:0}}},display:{text:"A"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:250,pxFromCanvasTop:360},input:{gamepad:{button:{index:1}}},display:{text:"B"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:350,pxFromCanvasTop:360},input:{gamepad:{button:{index:2}}},display:{text:"X"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:450,pxFromCanvasTop:360},input:{gamepad:{button:{index:3}}},display:{text:"Y"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:550,pxFromCanvasTop:360},input:{gamepad:{button:{index:6}}},display:{text:"LT"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:650,pxFromCanvasTop:360},input:{gamepad:{button:{index:7}}},display:{text:"RT"}})}];return{canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:t}}a(Ns,"createDefaultConfig");function Bs(e,t,n){const i=new De;function o(){n.setCreationPanelActive(!0),i.showCanvasConfig(t.config,e,w=>{t.setConfig(w)});const f=document.getElementById("leftPanel"),g=document.getElementById("rightPanel");f&&(f.hidden=!1),g&&(g.hidden=!1);const v=document.getElementById("containerForPossibleEditorWindows");v&&(v.hidden=!1),s(),n.setEditingProperties(!0)}a(o,"showBothPanels");function r(){try{i.hidePropertyEdit()}finally{n.setCreationPanelActive(!1),n.setEditingProperties(!1)}const f=document.getElementById("leftPanel"),g=document.getElementById("rightPanel");f&&(f.hidden=!0),g&&(g.hidden=!0);const v=document.getElementById("containerForPossibleEditorWindows");v&&(v.hidden=!0)}a(r,"hideBothPanels");function s(){const f=document.getElementById("objectCreationContent");f&&(f.innerHTML="",Object.entries(ne).forEach(([g,v])=>{const w=document.createElement("div");w.className="objectTypeSection";const p=document.createElement("p");p.className="sectionHeader",p.textContent=g,w.appendChild(p);const S=document.createElement("button");S.className="createObjectBtn ButtonWhichUserCanPressToUpdateState",S.setAttribute("data-type",g),S.textContent=`Create ${g}`,w.appendChild(S),f.appendChild(w)}))}a(s,"populateCreationPanel");function u(f){if(!(f in ne)){console.error("[Spawn] Unknown type:",f,"Available:",Object.keys(ne));return}const g=js[f];if(!g){console.error(`No schema found for ${f}`);return}const v=g.parse({}),w={[f]:v};t.addObject(w)}a(u,"createObject");function c(f){var w;const g=t.config;if(f<0||f>=g.objects.length)return;const v=g.objects[f];if(v)try{const p=Le(v,f);(w=p.cleanup)==null||w.call(p)}catch(p){console.error("[Delete] Failed to deserialize for cleanup:",p)}t.deleteObject(f)}a(c,"deleteObjectAtIndex");const d=document.getElementById("objectCreationContent");d&&d.addEventListener("click",f=>{const g=f.target;if(g.classList.contains("createObjectBtn")){const v=g.getAttribute("data-type");v&&(u(v),r())}});const h=document.getElementById("doneContainerForPossibleEditorWindows");h&&h.addEventListener("click",()=>{r()});const y=document.getElementById("toggleReadonlyModeButton");return y&&window.electronAPI&&(y.style.display="flex",y.addEventListener("click",()=>{window.electronAPI.toggleReadonlyMode(),He("Switched to readonly clickthrough mode - use Task Manager to close app"),r()})),{propertyEditor:i,deleteObjectAtIndex:c,showBothPanels:o,hideBothPanels:r}}a(Bs,"createUIHelpers");
