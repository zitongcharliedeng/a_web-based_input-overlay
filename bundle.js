var gn=Object.defineProperty;var a=(e,t)=>gn(e,"name",{value:t,configurable:!0});a(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}a(n,"getFetchOpts");function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}a(o,"processPreload")},"polyfill")();const re={};document.addEventListener("keydown",function(e){re[e.code]!==!0&&(re[e.code]=!0)});document.addEventListener("keyup",function(e){re[e.code]===!0&&(re[e.code]=!1)});const L={x:0,y:0,buttons:{0:!1,1:!1,2:!1,3:!1,4:!1},clicks:{0:!1,1:!1,2:!1,3:!1,4:!1},wheelDelta:{x:0,y:0},wheelEvents:{up:!1,down:!1},update(e){this.wheelDelta.x*=.7*e,this.wheelDelta.y*=.7*e,this.clicks[0]=!1,this.clicks[1]=!1,this.clicks[2]=!1,this.clicks[3]=!1,this.clicks[4]=!1,this.wheelEvents.up=!1,this.wheelEvents.down=!1}},ce=document.getElementById("canvas");ce.addEventListener("mousedown",e=>{L.x=e.x,L.y=e.y;const t=e.button;L.buttons[t]===!1&&(L.buttons[t]=!0,L.clicks[t]=!0)});ce.addEventListener("mouseup",e=>{L.x=e.x,L.y=e.y;const t=e.button;L.buttons[t]===!0&&(L.buttons[t]=!1)});ce.addEventListener("mousemove",e=>{L.x=e.x,L.y=e.y});ce.addEventListener("wheel",e=>{L.wheelDelta.x=e.deltaX,L.wheelDelta.y=e.deltaY,e.deltaY<0?L.wheelEvents.up=!0:e.deltaY>0&&(L.wheelEvents.down=!0)});ce.addEventListener("contextmenu",e=>{e.preventDefault()});const ft={30:"KeyA",48:"KeyB",46:"KeyC",32:"KeyD",18:"KeyE",33:"KeyF",34:"KeyG",35:"KeyH",23:"KeyI",36:"KeyJ",37:"KeyK",38:"KeyL",50:"KeyM",49:"KeyN",24:"KeyO",25:"KeyP",16:"KeyQ",19:"KeyR",31:"KeyS",20:"KeyT",22:"KeyU",47:"KeyV",17:"KeyW",45:"KeyX",21:"KeyY",44:"KeyZ",2:"Digit1",3:"Digit2",4:"Digit3",5:"Digit4",6:"Digit5",7:"Digit6",8:"Digit7",9:"Digit8",10:"Digit9",11:"Digit0",57:"Space",28:"Enter",1:"Escape",14:"Backspace",15:"Tab",42:"ShiftLeft",54:"ShiftRight",29:"ControlLeft",97:"ControlRight",56:"AltLeft",100:"AltRight",103:"ArrowUp",108:"ArrowDown",105:"ArrowLeft",106:"ArrowRight",57416:"ArrowUp",57424:"ArrowDown",57419:"ArrowLeft",57421:"ArrowRight"},pt={1:0,3:1,2:2,4:3,5:4},ye={};let gt=!1;function mt(e,t){var n,o;if(!(e<0)){if(!t.connected){ye[e]=null;return}ye[e]={axes:((n=t.axes)==null?void 0:n.map(Number))??[],buttons:((o=t.buttons)==null?void 0:o.map(i=>({pressed:!!i.pressed,touched:!!i.touched,value:Number(i.value)})))??[],connected:!0,timestamp:t.timestamp,id:t.id??`SDL2 Gamepad ${e}`,index:e,mapping:t.mapping??"standard",hapticActuators:[],vibrationActuator:null}}}a(mt,"updateCache");function mn(){if(!window.electronAPI||gt)return;gt=!0;const e=window.electronAPI;e.onGlobalKeyDown(({keycode:t})=>{const n=ft[t];n&&document.dispatchEvent(new KeyboardEvent("keydown",{code:n,bubbles:!0}))}),e.onGlobalKeyUp(({keycode:t})=>{const n=ft[t];n&&document.dispatchEvent(new KeyboardEvent("keyup",{code:n,bubbles:!0}))}),e.onSDLGamepadState(({index:t,state:n})=>mt(t,n)),e.onGamepadStateUpdate(({index:t,state:n})=>mt(t,n)),e.onGlobalMouseDown(({button:t})=>{var o;const n=pt[t];n!==void 0&&((o=window.mouse)==null?void 0:o.buttons[n])===!1&&(window.mouse.buttons[n]=!0,window.mouse.clicks[n]=!0)}),e.onGlobalMouseUp(({button:t})=>{var o;const n=pt[t];n!==void 0&&((o=window.mouse)==null?void 0:o.buttons[n])===!0&&(window.mouse.buttons[n]=!1)}),e.onGlobalMouseMove(({x:t,y:n})=>{window.mouse&&(window.mouse.x=t,window.mouse.y=n)}),e.onGlobalWheel(({rotation:t})=>{var n,o;(n=window.mouse)!=null&&n.wheelDelta&&(window.mouse.wheelDelta.y=-t),(o=window.mouse)!=null&&o.wheelEvents&&(t<0?window.mouse.wheelEvents.up=!0:t>0&&(window.mouse.wheelEvents.down=!0))})}a(mn,"initializeElectronBridges");mn();const Mt=navigator.getGamepads.bind(navigator);typeof window<"u"&&(window.addEventListener("gamepadconnected",()=>{}),window.addEventListener("gamepaddisconnected",()=>{}),Mt());function yn(){const e=Array.from(Mt()),t=Object.keys(ye).map(Number),n=Math.max(t.length?Math.max(...t):-1,e.length-1),o=[];for(let i=0;i<=n;i++){const r=ye[i],s=e[i];r!=null&&r.connected?o[i]={axes:[...r.axes],buttons:r.buttons.map(c=>({pressed:c.pressed,touched:c.touched,value:c.value})),connected:!0,timestamp:r.timestamp,id:r.id,index:r.index,mapping:r.mapping,hapticActuators:[],vibrationActuator:null}:s!=null&&s.connected?o[i]=s:o[i]=null}return o}a(yn,"getGamepads");const vn=re,k=L,et=class et{constructor(t){this.objArrayIdx=t}};a(et,"CanvasObjectInstance");let Y=et;function ue(e,t){t.lineWidth!==void 0&&(e.lineWidth=t.lineWidth),t.strokeStyle!==void 0&&(e.strokeStyle=t.strokeStyle),t.fillStyle!==void 0&&(e.fillStyle=t.fillStyle),t.lineCap!==void 0&&(e.lineCap=t.lineCap),t.textAlign!==void 0&&(e.textAlign=t.textAlign),t.font!==void 0&&(e.font=t.font)}a(ue,"canvas_properties");function yt(e,t,n,o,i,r){r!==void 0&&ue(e,r);const s=10,c=Math.atan2(i-n,o-t);e.moveTo(t,n),e.lineTo(o,i),e.moveTo(o,i),e.lineTo(o-s*Math.cos(c-Math.PI/6),i-s*Math.sin(c-Math.PI/6)),e.moveTo(o,i),e.lineTo(o-s*Math.cos(c+Math.PI/6),i-s*Math.sin(c+Math.PI/6))}a(yt,"canvas_arrow");function vt(e,t,n,o,i,r){r!==void 0&&ue(e,r),e.moveTo(t,n),e.lineTo(o,i)}a(vt,"canvas_line");function Oe(e,t,n,o,i,r,s){s!==void 0&&ue(e,s),e.arc(t,n,o,i,r)}a(Oe,"canvas_arc");function l(e,t,n){function o(u,d){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(e),t(u,d);for(const y in s.prototype)y in u||Object.defineProperty(u,y,{value:s.prototype[y].bind(u)});u._zod.constr=s,u._zod.def=d}a(o,"init");const i=(n==null?void 0:n.Parent)??Object,c=class c extends i{};a(c,"Definition");let r=c;Object.defineProperty(r,"name",{value:e});function s(u){var d;const h=n!=null&&n.Parent?new r:this;o(h,u),(d=h._zod).deferred??(d.deferred=[]);for(const y of h._zod.deferred)y();return h}return a(s,"_"),Object.defineProperty(s,"init",{value:o}),Object.defineProperty(s,Symbol.hasInstance,{value:a(u=>{var d,h;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(h=(d=u==null?void 0:u._zod)==null?void 0:d.traits)==null?void 0:h.has(e)},"value")}),Object.defineProperty(s,"name",{value:e}),s}a(l,"$constructor");const tt=class tt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};a(tt,"$ZodAsyncError");let W=tt;const nt=class nt extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}};a(nt,"$ZodEncodeError");let ve=nt;const Wt={};function U(e){return Wt}a(U,"config");function bn(e){const t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,i])=>t.indexOf(+o)===-1).map(([o,i])=>i)}a(bn,"getEnumValues");function Te(e,t){return typeof t=="bigint"?t.toString():t}a(Te,"jsonStringifyReplacer");function Ve(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}a(Ve,"cached");function Xe(e){return e==null}a(Xe,"nullish");function Ye(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}a(Ye,"cleanRegex");function wn(e,t){const n=(e.toString().split(".")[1]||"").length,o=t.toString();let i=(o.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(o)){const u=o.match(/\d?e-(\d?)/);u!=null&&u[1]&&(i=Number.parseInt(u[1]))}const r=n>i?n:i,s=Number.parseInt(e.toFixed(r).replace(".","")),c=Number.parseInt(t.toFixed(r).replace(".",""));return s%c/10**r}a(wn,"floatSafeRemainder");const bt=Symbol("evaluating");function P(e,t,n){let o;Object.defineProperty(e,t,{get(){if(o!==bt)return o===void 0&&(o=bt,o=n()),o},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}a(P,"defineLazy");function G(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}a(G,"assignProp");function J(...e){const t={};for(const n of e){const o=Object.getOwnPropertyDescriptors(n);Object.assign(t,o)}return Object.defineProperties({},t)}a(J,"mergeDefs");function wt(e){return JSON.stringify(e)}a(wt,"esc");const Ut="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function be(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}a(be,"isObject");const xn=Ve(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ne(e){if(be(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(be(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}a(ne,"isPlainObject");function Kt(e){return ne(e)?{...e}:Array.isArray(e)?[...e]:e}a(Kt,"shallowClone");const _n=new Set(["string","number","symbol"]);function Ce(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(Ce,"escapeRegex");function V(e,t,n){const o=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(o._zod.parent=e),o}a(V,"clone");function g(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:a(()=>t,"error")};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:a(()=>t.error,"error")}:t}a(g,"normalizeParams");function kn(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}a(kn,"optionalKeys");const Cn={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function zn(e,t){const n=e._zod.def,o=J(e._zod.def,{get shape(){const i={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(i[r]=n.shape[r])}return G(this,"shape",i),i},checks:[]});return V(e,o)}a(zn,"pick");function Sn(e,t){const n=e._zod.def,o=J(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete i[r]}return G(this,"shape",i),i},checks:[]});return V(e,o)}a(Sn,"omit");function In(e,t){if(!ne(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=J(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return G(this,"shape",r),r},checks:[]});return V(e,i)}a(In,"extend");function Pn(e,t){if(!ne(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const o={...e._zod.def.shape,...t};return G(this,"shape",o),o},checks:e._zod.def.checks};return V(e,n)}a(Pn,"safeExtend");function En(e,t){const n=J(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t._zod.def.shape};return G(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return V(e,n)}a(En,"merge");function On(e,t,n){const o=J(t._zod.def,{get shape(){const i=t._zod.def.shape,r={...i};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=e?new e({type:"optional",innerType:i[s]}):i[s])}else for(const s in i)r[s]=e?new e({type:"optional",innerType:i[s]}):i[s];return G(this,"shape",r),r},checks:[]});return V(t,o)}a(On,"partial");function An(e,t,n){const o=J(t._zod.def,{get shape(){const i=t._zod.def.shape,r={...i};if(n)for(const s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=new e({type:"nonoptional",innerType:i[s]}))}else for(const s in i)r[s]=new e({type:"nonoptional",innerType:i[s]});return G(this,"shape",r),r},checks:[]});return V(t,o)}a(An,"required");function q(e,t=0){var n;if(e.aborted===!0)return!0;for(let o=t;o<e.issues.length;o++)if(((n=e.issues[o])==null?void 0:n.continue)!==!0)return!0;return!1}a(q,"aborted");function Q(e,t){return t.map(n=>{var o;return(o=n).path??(o.path=[]),n.path.unshift(e),n})}a(Q,"prefixIssues");function he(e){return typeof e=="string"?e:e==null?void 0:e.message}a(he,"unwrapMessage");function K(e,t,n){var i,r,s,c,u,d;const o={...e,path:e.path??[]};if(!e.message){const h=he((s=(r=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:r.error)==null?void 0:s.call(r,e))??he((c=t==null?void 0:t.error)==null?void 0:c.call(t,e))??he((u=n.customError)==null?void 0:u.call(n,e))??he((d=n.localeError)==null?void 0:d.call(n,e))??"Invalid input";o.message=h}return delete o.inst,delete o.continue,t!=null&&t.reportInput||delete o.input,o}a(K,"finalizeIssue");function Ge(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}a(Ge,"getLengthableOrigin");function se(...e){const[t,n,o]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:o}:{...t}}a(se,"issue");const Vt=a((e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Te,2),Object.defineProperty(e,"toString",{value:a(()=>e.message,"value"),enumerable:!1})},"initializer$1"),Xt=l("$ZodError",Vt),Yt=l("$ZodError",Vt,{Parent:Error});function Zn(e,t=n=>n.message){const n={},o=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):o.push(t(i));return{formErrors:o,fieldErrors:n}}a(Zn,"flattenError");function Tn(e,t=n=>n.message){const n={_errors:[]},o=a(i=>{for(const r of i.issues)if(r.code==="invalid_union"&&r.errors.length)r.errors.map(s=>o({issues:s}));else if(r.code==="invalid_key")o({issues:r.issues});else if(r.code==="invalid_element")o({issues:r.issues});else if(r.path.length===0)n._errors.push(t(r));else{let s=n,c=0;for(;c<r.path.length;){const u=r.path[c];c===r.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(t(r))):s[u]=s[u]||{_errors:[]},s=s[u],c++}}},"processError");return o(e),n}a(Tn,"formatError");const Je=a(e=>(t,n,o,i)=>{const r=o?Object.assign(o,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise)throw new W;if(s.issues.length){const c=new((i==null?void 0:i.Err)??e)(s.issues.map(u=>K(u,r,U())));throw Ut(c,i==null?void 0:i.callee),c}return s.value},"_parse"),He=a(e=>async(t,n,o,i)=>{const r=o?Object.assign(o,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise&&(s=await s),s.issues.length){const c=new((i==null?void 0:i.Err)??e)(s.issues.map(u=>K(u,r,U())));throw Ut(c,i==null?void 0:i.callee),c}return s.value},"_parseAsync"),ze=a(e=>(t,n,o)=>{const i=o?{...o,async:!1}:{async:!1},r=t._zod.run({value:n,issues:[]},i);if(r instanceof Promise)throw new W;return r.issues.length?{success:!1,error:new(e??Xt)(r.issues.map(s=>K(s,i,U())))}:{success:!0,data:r.value}},"_safeParse"),$n=ze(Yt),Se=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},i);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new e(r.issues.map(s=>K(s,i,U())))}:{success:!0,data:r.value}},"_safeParseAsync"),Fn=Se(Yt),jn=a(e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Je(e)(t,n,i)},"_encode"),Ln=a(e=>(t,n,o)=>Je(e)(t,n,o),"_decode"),Dn=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return He(e)(t,n,i)},"_encodeAsync"),Nn=a(e=>async(t,n,o)=>He(e)(t,n,o),"_decodeAsync"),Bn=a(e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ze(e)(t,n,i)},"_safeEncode"),Rn=a(e=>(t,n,o)=>ze(e)(t,n,o),"_safeDecode"),Mn=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Se(e)(t,n,i)},"_safeEncodeAsync"),Wn=a(e=>async(t,n,o)=>Se(e)(t,n,o),"_safeDecodeAsync"),Un=/^[cC][^\s-]{8,}$/,Kn=/^[0-9a-z]+$/,Vn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Xn=/^[0-9a-vA-V]{20}$/,Yn=/^[A-Za-z0-9]{27}$/,Gn=/^[a-zA-Z0-9_-]{21}$/,Jn=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Hn=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,xt=a(e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),qn=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Qn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function eo(){return new RegExp(Qn,"u")}a(eo,"emoji");const to=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,no=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,oo=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,io=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ro=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Gt=/^[A-Za-z0-9_-]*$/,so=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,ao=/^\+(?:[0-9]){6,14}[0-9]$/,Jt="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",co=new RegExp(`^${Jt}$`);function Ht(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}a(Ht,"timeSource");function uo(e){return new RegExp(`^${Ht(e)}$`)}a(uo,"time$1");function lo(e){const t=Ht({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${t}(?:${n.join("|")})`;return new RegExp(`^${Jt}T(?:${o})$`)}a(lo,"datetime$1");const ho=a(e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},"string$1"),fo=/^-?\d+$/,po=/^-?\d+(?:\.\d+)?/,go=/^(?:true|false)$/i,mo=/^[^A-Z]*$/,yo=/^[^a-z]*$/,D=l("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),qt={number:"number",bigint:"bigint",object:"date"},Qt=l("$ZodCheckLessThan",(e,t)=>{D.init(e,t);const n=qt[typeof t.value];e._zod.onattach.push(o=>{const i=o._zod.bag,r=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:n,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),en=l("$ZodCheckGreaterThan",(e,t)=>{D.init(e,t);const n=qt[typeof t.value];e._zod.onattach.push(o=>{const i=o._zod.bag,r=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:n,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),vo=l("$ZodCheckMultipleOf",(e,t)=>{D.init(e,t),e._zod.onattach.push(n=>{var o;(o=n._zod.bag).multipleOf??(o.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):wn(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),bo=l("$ZodCheckNumberFormat",(e,t)=>{var s;D.init(e,t),t.format=t.format||"float64";const n=(s=t.format)==null?void 0:s.includes("int"),o=n?"int":"number",[i,r]=Cn[t.format];e._zod.onattach.push(c=>{const u=c._zod.bag;u.format=t.format,u.minimum=i,u.maximum=r,n&&(u.pattern=fo)}),e._zod.check=c=>{const u=c.value;if(n){if(!Number.isInteger(u)){c.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:u,inst:e});return}if(!Number.isSafeInteger(u)){u>0?c.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):c.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}u<i&&c.issues.push({origin:"number",input:u,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),u>r&&c.issues.push({origin:"number",input:u,code:"too_big",maximum:r,inst:e})}}),wo=l("$ZodCheckMaxLength",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Xe(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{const i=o.value;if(i.length<=t.maximum)return;const s=Ge(i);o.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),xo=l("$ZodCheckMinLength",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Xe(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{const i=o.value;if(i.length>=t.minimum)return;const s=Ge(i);o.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),_o=l("$ZodCheckLengthEquals",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Xe(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=o=>{const i=o.value,r=i.length;if(r===t.length)return;const s=Ge(i),c=r>t.length;o.issues.push({origin:s,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),Ie=l("$ZodCheckStringFormat",(e,t)=>{var n,o;D.init(e,t),e._zod.onattach.push(i=>{const r=i._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),ko=l("$ZodCheckRegex",(e,t)=>{Ie.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Co=l("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=mo),Ie.init(e,t)}),zo=l("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=yo),Ie.init(e,t)}),So=l("$ZodCheckIncludes",(e,t)=>{D.init(e,t);const n=Ce(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=o,e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(o)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),Io=l("$ZodCheckStartsWith",(e,t)=>{D.init(e,t);const n=new RegExp(`^${Ce(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),Po=l("$ZodCheckEndsWith",(e,t)=>{D.init(e,t);const n=new RegExp(`.*${Ce(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}}),Eo=l("$ZodCheckOverwrite",(e,t)=>{D.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}}),ot=class ot{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const o=t.split(`
`).filter(s=>s),i=Math.min(...o.map(s=>s.length-s.trimStart().length)),r=o.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of r)this.content.push(s)}compile(){const t=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(r=>`  ${r}`)];return new t(...n,i.join(`
`))}};a(ot,"Doc");let $e=ot;const Oo={major:4,minor:1,patch:12},Z=l("$ZodType",(e,t)=>{var i;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Oo;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const r of o)for(const s of r._zod.onattach)s(e);if(o.length===0)(n=e._zod).deferred??(n.deferred=[]),(i=e._zod.deferred)==null||i.push(()=>{e._zod.run=e._zod.parse});else{const r=a((c,u,d)=>{let h=q(c),y;for(const v of u){if(v._zod.def.when){if(!v._zod.def.when(c))continue}else if(h)continue;const p=c.issues.length,m=v._zod.check(c);if(m instanceof Promise&&(d==null?void 0:d.async)===!1)throw new W;if(y||m instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await m,c.issues.length!==p&&(h||(h=q(c,p)))});else{if(c.issues.length===p)continue;h||(h=q(c,p))}}return y?y.then(()=>c):c},"runChecks"),s=a((c,u,d)=>{if(q(c))return c.aborted=!0,c;const h=r(u,o,d);if(h instanceof Promise){if(d.async===!1)throw new W;return h.then(y=>e._zod.parse(y,d))}return e._zod.parse(h,d)},"handleCanaryResult");e._zod.run=(c,u)=>{if(u.skipChecks)return e._zod.parse(c,u);if(u.direction==="backward"){const h=e._zod.parse({value:c.value,issues:[]},{...u,skipChecks:!0});return h instanceof Promise?h.then(y=>s(y,c,u)):s(h,c,u)}const d=e._zod.parse(c,u);if(d instanceof Promise){if(u.async===!1)throw new W;return d.then(h=>r(h,o,u))}return r(d,o,u)}}e["~standard"]={validate:a(r=>{var s;try{const c=$n(e,r);return c.success?{value:c.data}:{issues:(s=c.error)==null?void 0:s.issues}}catch{return Fn(e,r).then(u=>{var d;return u.success?{value:u.data}:{issues:(d=u.error)==null?void 0:d.issues}})}},"validate"),vendor:"zod",version:1}}),qe=l("$ZodString",(e,t)=>{var n;Z.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??ho(e._zod.bag),e._zod.parse=(o,i)=>{if(t.coerce)try{o.value=String(o.value)}catch{}return typeof o.value=="string"||o.issues.push({expected:"string",code:"invalid_type",input:o.value,inst:e}),o}}),O=l("$ZodStringFormat",(e,t)=>{Ie.init(e,t),qe.init(e,t)}),Ao=l("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Hn),O.init(e,t)}),Zo=l("$ZodUUID",(e,t)=>{if(t.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=xt(o))}else t.pattern??(t.pattern=xt());O.init(e,t)}),To=l("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=qn),O.init(e,t)}),$o=l("$ZodURL",(e,t)=>{O.init(e,t),e._zod.check=n=>{try{const o=n.value.trim(),i=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:so.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Fo=l("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=eo()),O.init(e,t)}),jo=l("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Gn),O.init(e,t)}),Lo=l("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Un),O.init(e,t)}),Do=l("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Kn),O.init(e,t)}),No=l("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Vn),O.init(e,t)}),Bo=l("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Xn),O.init(e,t)}),Ro=l("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Yn),O.init(e,t)}),Mo=l("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=lo(t)),O.init(e,t)}),Wo=l("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=co),O.init(e,t)}),Uo=l("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=uo(t)),O.init(e,t)}),Ko=l("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Jn),O.init(e,t)}),Vo=l("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=to),O.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv4"})}),Xo=l("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=no),O.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Yo=l("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=oo),O.init(e,t)}),Go=l("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=io),O.init(e,t),e._zod.check=n=>{const o=n.value.split("/");try{if(o.length!==2)throw new Error;const[i,r]=o;if(!r)throw new Error;const s=Number(r);if(`${s}`!==r)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function tn(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}a(tn,"isValidBase64");const Jo=l("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=ro),O.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{tn(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Ho(e){if(!Gt.test(e))return!1;const t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return tn(n)}a(Ho,"isValidBase64URL");const qo=l("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Gt),O.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{Ho(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Qo=l("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ao),O.init(e,t)});function ei(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[o]=n;if(!o)return!1;const i=JSON.parse(atob(o));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}a(ei,"isValidJWT");const ti=l("$ZodJWT",(e,t)=>{O.init(e,t),e._zod.check=n=>{ei(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),nn=l("$ZodNumber",(e,t)=>{Z.init(e,t),e._zod.pattern=e._zod.bag.pattern??po,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const r=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...r?{received:r}:{}}),n}}),ni=l("$ZodNumber",(e,t)=>{bo.init(e,t),nn.init(e,t)}),oi=l("$ZodBoolean",(e,t)=>{Z.init(e,t),e._zod.pattern=go,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),ii=l("$ZodUnknown",(e,t)=>{Z.init(e,t),e._zod.parse=n=>n}),ri=l("$ZodNever",(e,t)=>{Z.init(e,t),e._zod.parse=(n,o)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function _t(e,t,n){e.issues.length&&t.issues.push(...Q(n,e.issues)),t.value[n]=e.value}a(_t,"handleArrayResult");const si=l("$ZodArray",(e,t)=>{Z.init(e,t),e._zod.parse=(n,o)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const r=[];for(let s=0;s<i.length;s++){const c=i[s],u=t.element._zod.run({value:c,issues:[]},o);u instanceof Promise?r.push(u.then(d=>_t(d,n,s))):_t(u,n,s)}return r.length?Promise.all(r).then(()=>n):n}});function we(e,t,n,o){e.issues.length&&t.issues.push(...Q(n,e.issues)),e.value===void 0?n in o&&(t.value[n]=void 0):t.value[n]=e.value}a(we,"handlePropertyResult");function on(e){var o,i,r,s;const t=Object.keys(e.shape);for(const c of t)if(!((s=(r=(i=(o=e.shape)==null?void 0:o[c])==null?void 0:i._zod)==null?void 0:r.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${c}": expected a Zod schema`);const n=kn(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}a(on,"normalizeDef");function rn(e,t,n,o,i,r){const s=[],c=i.keySet,u=i.catchall._zod,d=u.def.type;for(const h of Object.keys(t)){if(c.has(h))continue;if(d==="never"){s.push(h);continue}const y=u.run({value:t[h],issues:[]},o);y instanceof Promise?e.push(y.then(v=>we(v,n,h,t))):we(y,n,h,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:r}),e.length?Promise.all(e).then(()=>n):n}a(rn,"handleCatchall");const ai=l("$ZodObject",(e,t)=>{Z.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const c=t.shape;Object.defineProperty(t,"shape",{get:a(()=>{const u={...c};return Object.defineProperty(t,"shape",{value:u}),u},"get")})}const o=Ve(()=>on(t));P(e._zod,"propValues",()=>{const c=t.shape,u={};for(const d in c){const h=c[d]._zod;if(h.values){u[d]??(u[d]=new Set);for(const y of h.values)u[d].add(y)}}return u});const i=be,r=t.catchall;let s;e._zod.parse=(c,u)=>{s??(s=o.value);const d=c.value;if(!i(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),c;c.value={};const h=[],y=s.shape;for(const v of s.keys){const m=y[v]._zod.run({value:d[v],issues:[]},u);m instanceof Promise?h.push(m.then(b=>we(b,c,v,d))):we(m,c,v,d)}return r?rn(h,d,c,u,o.value,e):h.length?Promise.all(h).then(()=>c):c}}),ci=l("$ZodObjectJIT",(e,t)=>{ai.init(e,t);const n=e._zod.parse,o=Ve(()=>on(t)),i=a(v=>{const p=new $e(["shape","payload","ctx"]),m=o.value,b=a(S=>{const _=wt(S);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`},"parseStr");p.write("const input = payload.value;");const f=Object.create(null);let x=0;for(const S of m.keys)f[S]=`key_${x++}`;p.write("const newResult = {};");for(const S of m.keys){const _=f[S],T=wt(S);p.write(`const ${_} = ${b(S)};`),p.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${T}, ...iss.path] : [${T}]
          })));
        }
        
        
        if (${_}.value === undefined) {
          if (${T} in input) {
            newResult[${T}] = undefined;
          }
        } else {
          newResult[${T}] = ${_}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const j=p.compile();return(S,_)=>j(v,S,_)},"generateFastpass");let r;const s=be,c=!Wt.jitless,d=c&&xn.value,h=t.catchall;let y;e._zod.parse=(v,p)=>{y??(y=o.value);const m=v.value;return s(m)?c&&d&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(r||(r=i(t.shape)),v=r(v,p),h?rn([],m,v,p,y,e):v):n(v,p):(v.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),v)}});function kt(e,t,n,o){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;const i=e.filter(r=>!q(r));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(s=>K(s,o,U())))}),t)}a(kt,"handleUnionResults");const ui=l("$ZodUnion",(e,t)=>{Z.init(e,t),P(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),P(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),P(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),P(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){const i=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${i.map(r=>Ye(r.source)).join("|")})$`)}});const n=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(i,r)=>{if(n)return o(i,r);let s=!1;const c=[];for(const u of t.options){const d=u._zod.run({value:i.value,issues:[]},r);if(d instanceof Promise)c.push(d),s=!0;else{if(d.issues.length===0)return d;c.push(d)}}return s?Promise.all(c).then(u=>kt(u,i,e,r)):kt(c,i,e,r)}}),li=l("$ZodIntersection",(e,t)=>{Z.init(e,t),e._zod.parse=(n,o)=>{const i=n.value,r=t.left._zod.run({value:i,issues:[]},o),s=t.right._zod.run({value:i,issues:[]},o);return r instanceof Promise||s instanceof Promise?Promise.all([r,s]).then(([u,d])=>Ct(n,u,d)):Ct(n,r,s)}});function Fe(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ne(e)&&ne(t)){const n=Object.keys(t),o=Object.keys(e).filter(r=>n.indexOf(r)!==-1),i={...e,...t};for(const r of o){const s=Fe(e[r],t[r]);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};i[r]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let o=0;o<e.length;o++){const i=e[o],r=t[o],s=Fe(i,r);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}a(Fe,"mergeValues");function Ct(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),q(e))return e;const o=Fe(t.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}a(Ct,"handleIntersectionResults");const di=l("$ZodRecord",(e,t)=>{Z.init(e,t),e._zod.parse=(n,o)=>{const i=n.value;if(!ne(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),n;const r=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const u of s)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){const d=t.valueType._zod.run({value:i[u],issues:[]},o);d instanceof Promise?r.push(d.then(h=>{h.issues.length&&n.issues.push(...Q(u,h.issues)),n.value[u]=h.value})):(d.issues.length&&n.issues.push(...Q(u,d.issues)),n.value[u]=d.value)}let c;for(const u in i)s.has(u)||(c=c??[],c.push(u));c&&c.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:c})}else{n.value={};for(const s of Reflect.ownKeys(i)){if(s==="__proto__")continue;const c=t.keyType._zod.run({value:s,issues:[]},o);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(d=>K(d,o,U())),input:s,path:[s],inst:e}),n.value[c.value]=c.value;continue}const u=t.valueType._zod.run({value:i[s],issues:[]},o);u instanceof Promise?r.push(u.then(d=>{d.issues.length&&n.issues.push(...Q(s,d.issues)),n.value[c.value]=d.value})):(u.issues.length&&n.issues.push(...Q(s,u.issues)),n.value[c.value]=u.value)}}return r.length?Promise.all(r).then(()=>n):n}}),hi=l("$ZodEnum",(e,t)=>{Z.init(e,t);const n=bn(t.entries),o=new Set(n);e._zod.values=o,e._zod.pattern=new RegExp(`^(${n.filter(i=>_n.has(typeof i)).map(i=>typeof i=="string"?Ce(i):i.toString()).join("|")})$`),e._zod.parse=(i,r)=>{const s=i.value;return o.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:e}),i}}),fi=l("$ZodTransform",(e,t)=>{Z.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new ve(e.constructor.name);const i=t.transform(n.value,n);if(o.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new W;return n.value=i,n}});function zt(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}a(zt,"handleOptionalResult");const pi=l("$ZodOptional",(e,t)=>{Z.init(e,t),e._zod.optin="optional",e._zod.optout="optional",P(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),P(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ye(n.source)})?$`):void 0}),e._zod.parse=(n,o)=>{if(t.innerType._zod.optin==="optional"){const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>zt(r,n.value)):zt(i,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,o)}}),gi=l("$ZodNullable",(e,t)=>{Z.init(e,t),P(e._zod,"optin",()=>t.innerType._zod.optin),P(e._zod,"optout",()=>t.innerType._zod.optout),P(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ye(n.source)}|null)$`):void 0}),P(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,o)=>n.value===null?n:t.innerType._zod.run(n,o)}),mi=l("$ZodDefault",(e,t)=>{Z.init(e,t),e._zod.optin="optional",P(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>St(r,t)):St(i,t)}});function St(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}a(St,"handleDefaultResult");const yi=l("$ZodPrefault",(e,t)=>{Z.init(e,t),e._zod.optin="optional",P(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>(o.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,o))}),vi=l("$ZodNonOptional",(e,t)=>{Z.init(e,t),P(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(o=>o!==void 0)):void 0}),e._zod.parse=(n,o)=>{const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>It(r,e)):It(i,e)}});function It(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}a(It,"handleNonOptionalResult");const bi=l("$ZodCatch",(e,t)=>{Z.init(e,t),P(e._zod,"optin",()=>t.innerType._zod.optin),P(e._zod,"optout",()=>t.innerType._zod.optout),P(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(s=>K(s,o,U()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(r=>K(r,o,U()))},input:n.value}),n.issues=[]),n)}}),wi=l("$ZodPipe",(e,t)=>{Z.init(e,t),P(e._zod,"values",()=>t.in._zod.values),P(e._zod,"optin",()=>t.in._zod.optin),P(e._zod,"optout",()=>t.out._zod.optout),P(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,o)=>{if(o.direction==="backward"){const r=t.out._zod.run(n,o);return r instanceof Promise?r.then(s=>fe(s,t.in,o)):fe(r,t.in,o)}const i=t.in._zod.run(n,o);return i instanceof Promise?i.then(r=>fe(r,t.out,o)):fe(i,t.out,o)}});function fe(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}a(fe,"handlePipeResult");const xi=l("$ZodReadonly",(e,t)=>{Z.init(e,t),P(e._zod,"propValues",()=>t.innerType._zod.propValues),P(e._zod,"values",()=>t.innerType._zod.values),P(e._zod,"optin",()=>t.innerType._zod.optin),P(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(Pt):Pt(i)}});function Pt(e){return e.value=Object.freeze(e.value),e}a(Pt,"handleReadonlyResult");const _i=l("$ZodCustom",(e,t)=>{D.init(e,t),Z.init(e,t),e._zod.parse=(n,o)=>n,e._zod.check=n=>{const o=n.value,i=t.fn(o);if(i instanceof Promise)return i.then(r=>Et(r,n,o,e));Et(i,n,o,e)}});function Et(e,t,n,o){if(!e){const i={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(i.params=o._zod.def.params),t.issues.push(se(i))}}a(Et,"handleRefineResult");const it=class it{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const o=n[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const o={...this.get(n)??{}};delete o.id;const i={...o,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};a(it,"$ZodRegistry");let je=it;function ki(){return new je}a(ki,"registry");const pe=ki();function Ci(e,t){return new e({type:"string",...g(t)})}a(Ci,"_string");function zi(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...g(t)})}a(zi,"_email");function Ot(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...g(t)})}a(Ot,"_guid");function Si(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...g(t)})}a(Si,"_uuid");function Ii(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...g(t)})}a(Ii,"_uuidv4");function Pi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...g(t)})}a(Pi,"_uuidv6");function Ei(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...g(t)})}a(Ei,"_uuidv7");function Oi(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...g(t)})}a(Oi,"_url");function Ai(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...g(t)})}a(Ai,"_emoji");function Zi(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...g(t)})}a(Zi,"_nanoid");function Ti(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...g(t)})}a(Ti,"_cuid");function $i(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...g(t)})}a($i,"_cuid2");function Fi(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...g(t)})}a(Fi,"_ulid");function ji(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...g(t)})}a(ji,"_xid");function Li(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...g(t)})}a(Li,"_ksuid");function Di(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...g(t)})}a(Di,"_ipv4");function Ni(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...g(t)})}a(Ni,"_ipv6");function Bi(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...g(t)})}a(Bi,"_cidrv4");function Ri(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...g(t)})}a(Ri,"_cidrv6");function Mi(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...g(t)})}a(Mi,"_base64");function Wi(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...g(t)})}a(Wi,"_base64url");function Ui(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...g(t)})}a(Ui,"_e164");function Ki(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...g(t)})}a(Ki,"_jwt");function Vi(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...g(t)})}a(Vi,"_isoDateTime");function Xi(e,t){return new e({type:"string",format:"date",check:"string_format",...g(t)})}a(Xi,"_isoDate");function Yi(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...g(t)})}a(Yi,"_isoTime");function Gi(e,t){return new e({type:"string",format:"duration",check:"string_format",...g(t)})}a(Gi,"_isoDuration");function Ji(e,t){return new e({type:"number",checks:[],...g(t)})}a(Ji,"_number");function Hi(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...g(t)})}a(Hi,"_int");function qi(e,t){return new e({type:"boolean",...g(t)})}a(qi,"_boolean");function Qi(e){return new e({type:"unknown"})}a(Qi,"_unknown");function er(e,t){return new e({type:"never",...g(t)})}a(er,"_never");function At(e,t){return new Qt({check:"less_than",...g(t),value:e,inclusive:!1})}a(At,"_lt");function Ae(e,t){return new Qt({check:"less_than",...g(t),value:e,inclusive:!0})}a(Ae,"_lte");function Zt(e,t){return new en({check:"greater_than",...g(t),value:e,inclusive:!1})}a(Zt,"_gt");function Ze(e,t){return new en({check:"greater_than",...g(t),value:e,inclusive:!0})}a(Ze,"_gte");function Tt(e,t){return new vo({check:"multiple_of",...g(t),value:e})}a(Tt,"_multipleOf");function sn(e,t){return new wo({check:"max_length",...g(t),maximum:e})}a(sn,"_maxLength");function xe(e,t){return new xo({check:"min_length",...g(t),minimum:e})}a(xe,"_minLength");function an(e,t){return new _o({check:"length_equals",...g(t),length:e})}a(an,"_length");function tr(e,t){return new ko({check:"string_format",format:"regex",...g(t),pattern:e})}a(tr,"_regex");function nr(e){return new Co({check:"string_format",format:"lowercase",...g(e)})}a(nr,"_lowercase");function or(e){return new zo({check:"string_format",format:"uppercase",...g(e)})}a(or,"_uppercase");function ir(e,t){return new So({check:"string_format",format:"includes",...g(t),includes:e})}a(ir,"_includes");function rr(e,t){return new Io({check:"string_format",format:"starts_with",...g(t),prefix:e})}a(rr,"_startsWith");function sr(e,t){return new Po({check:"string_format",format:"ends_with",...g(t),suffix:e})}a(sr,"_endsWith");function le(e){return new Eo({check:"overwrite",tx:e})}a(le,"_overwrite");function ar(e){return le(t=>t.normalize(e))}a(ar,"_normalize");function cr(){return le(e=>e.trim())}a(cr,"_trim");function ur(){return le(e=>e.toLowerCase())}a(ur,"_toLowerCase");function lr(){return le(e=>e.toUpperCase())}a(lr,"_toUpperCase");function dr(e,t,n){return new e({type:"array",element:t,...g(n)})}a(dr,"_array");function hr(e,t,n){return new e({type:"custom",check:"custom",fn:t,...g(n)})}a(hr,"_refine");function fr(e){const t=pr(n=>(n.addIssue=o=>{if(typeof o=="string")n.issues.push(se(o,n.value,t._zod.def));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),n.issues.push(se(i))}},e(n.value,n)));return t}a(fr,"_superRefine");function pr(e,t){const n=new D({check:"custom",...g(t)});return n._zod.check=e,n}a(pr,"_check");const gr=l("ZodISODateTime",(e,t)=>{Mo.init(e,t),A.init(e,t)});function mr(e){return Vi(gr,e)}a(mr,"datetime");const yr=l("ZodISODate",(e,t)=>{Wo.init(e,t),A.init(e,t)});function vr(e){return Xi(yr,e)}a(vr,"date");const br=l("ZodISOTime",(e,t)=>{Uo.init(e,t),A.init(e,t)});function wr(e){return Yi(br,e)}a(wr,"time");const xr=l("ZodISODuration",(e,t)=>{Ko.init(e,t),A.init(e,t)});function _r(e){return Gi(xr,e)}a(_r,"duration");const kr=a((e,t)=>{Xt.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:a(n=>Tn(e,n),"value")},flatten:{value:a(n=>Zn(e,n),"value")},addIssue:{value:a(n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Te,2)},"value")},addIssues:{value:a(n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Te,2)},"value")},isEmpty:{get(){return e.issues.length===0}}})},"initializer"),R=l("ZodError",kr,{Parent:Error}),Cr=Je(R),zr=He(R),Sr=ze(R),Ir=Se(R),Pr=jn(R),Er=Ln(R),Or=Dn(R),Ar=Nn(R),Zr=Bn(R),Tr=Rn(R),$r=Mn(R),Fr=Wn(R),F=l("ZodType",(e,t)=>(Z.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(J(t,{checks:[...t.checks??[],...n.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),e.clone=(n,o)=>V(e,n,o),e.brand=()=>e,e.register=((n,o)=>(n.add(e,o),e)),e.parse=(n,o)=>Cr(e,n,o,{callee:e.parse}),e.safeParse=(n,o)=>Sr(e,n,o),e.parseAsync=async(n,o)=>zr(e,n,o,{callee:e.parseAsync}),e.safeParseAsync=async(n,o)=>Ir(e,n,o),e.spa=e.safeParseAsync,e.encode=(n,o)=>Pr(e,n,o),e.decode=(n,o)=>Er(e,n,o),e.encodeAsync=async(n,o)=>Or(e,n,o),e.decodeAsync=async(n,o)=>Ar(e,n,o),e.safeEncode=(n,o)=>Zr(e,n,o),e.safeDecode=(n,o)=>Tr(e,n,o),e.safeEncodeAsync=async(n,o)=>$r(e,n,o),e.safeDecodeAsync=async(n,o)=>Fr(e,n,o),e.refine=(n,o)=>e.check(zs(n,o)),e.superRefine=n=>e.check(Ss(n)),e.overwrite=n=>e.check(le(n)),e.optional=()=>Dt(e),e.nullable=()=>Nt(e),e.nullish=()=>Dt(Nt(e)),e.nonoptional=n=>vs(e,n),e.array=()=>ln(e),e.or=n=>dn([e,n]),e.and=n=>us(e,n),e.transform=n=>Bt(e,hs(n)),e.default=n=>gs(e,n),e.prefault=n=>ys(e,n),e.catch=n=>ws(e,n),e.pipe=n=>Bt(e,n),e.readonly=()=>ks(e),e.describe=n=>{const o=e.clone();return pe.add(o,{description:n}),o},Object.defineProperty(e,"description",{get(){var n;return(n=pe.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return pe.get(e);const o=e.clone();return pe.add(o,n[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),cn=l("_ZodString",(e,t)=>{qe.init(e,t),F.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...o)=>e.check(tr(...o)),e.includes=(...o)=>e.check(ir(...o)),e.startsWith=(...o)=>e.check(rr(...o)),e.endsWith=(...o)=>e.check(sr(...o)),e.min=(...o)=>e.check(xe(...o)),e.max=(...o)=>e.check(sn(...o)),e.length=(...o)=>e.check(an(...o)),e.nonempty=(...o)=>e.check(xe(1,...o)),e.lowercase=o=>e.check(nr(o)),e.uppercase=o=>e.check(or(o)),e.trim=()=>e.check(cr()),e.normalize=(...o)=>e.check(ar(...o)),e.toLowerCase=()=>e.check(ur()),e.toUpperCase=()=>e.check(lr())}),jr=l("ZodString",(e,t)=>{qe.init(e,t),cn.init(e,t),e.email=n=>e.check(zi(Lr,n)),e.url=n=>e.check(Oi(Dr,n)),e.jwt=n=>e.check(Ki(Qr,n)),e.emoji=n=>e.check(Ai(Nr,n)),e.guid=n=>e.check(Ot($t,n)),e.uuid=n=>e.check(Si(ge,n)),e.uuidv4=n=>e.check(Ii(ge,n)),e.uuidv6=n=>e.check(Pi(ge,n)),e.uuidv7=n=>e.check(Ei(ge,n)),e.nanoid=n=>e.check(Zi(Br,n)),e.guid=n=>e.check(Ot($t,n)),e.cuid=n=>e.check(Ti(Rr,n)),e.cuid2=n=>e.check($i(Mr,n)),e.ulid=n=>e.check(Fi(Wr,n)),e.base64=n=>e.check(Mi(Jr,n)),e.base64url=n=>e.check(Wi(Hr,n)),e.xid=n=>e.check(ji(Ur,n)),e.ksuid=n=>e.check(Li(Kr,n)),e.ipv4=n=>e.check(Di(Vr,n)),e.ipv6=n=>e.check(Ni(Xr,n)),e.cidrv4=n=>e.check(Bi(Yr,n)),e.cidrv6=n=>e.check(Ri(Gr,n)),e.e164=n=>e.check(Ui(qr,n)),e.datetime=n=>e.check(mr(n)),e.date=n=>e.check(vr(n)),e.time=n=>e.check(wr(n)),e.duration=n=>e.check(_r(n))});function I(e){return Ci(jr,e)}a(I,"string");const A=l("ZodStringFormat",(e,t)=>{O.init(e,t),cn.init(e,t)}),Lr=l("ZodEmail",(e,t)=>{To.init(e,t),A.init(e,t)}),$t=l("ZodGUID",(e,t)=>{Ao.init(e,t),A.init(e,t)}),ge=l("ZodUUID",(e,t)=>{Zo.init(e,t),A.init(e,t)}),Dr=l("ZodURL",(e,t)=>{$o.init(e,t),A.init(e,t)}),Nr=l("ZodEmoji",(e,t)=>{Fo.init(e,t),A.init(e,t)}),Br=l("ZodNanoID",(e,t)=>{jo.init(e,t),A.init(e,t)}),Rr=l("ZodCUID",(e,t)=>{Lo.init(e,t),A.init(e,t)}),Mr=l("ZodCUID2",(e,t)=>{Do.init(e,t),A.init(e,t)}),Wr=l("ZodULID",(e,t)=>{No.init(e,t),A.init(e,t)}),Ur=l("ZodXID",(e,t)=>{Bo.init(e,t),A.init(e,t)}),Kr=l("ZodKSUID",(e,t)=>{Ro.init(e,t),A.init(e,t)}),Vr=l("ZodIPv4",(e,t)=>{Vo.init(e,t),A.init(e,t)}),Xr=l("ZodIPv6",(e,t)=>{Xo.init(e,t),A.init(e,t)}),Yr=l("ZodCIDRv4",(e,t)=>{Yo.init(e,t),A.init(e,t)}),Gr=l("ZodCIDRv6",(e,t)=>{Go.init(e,t),A.init(e,t)}),Jr=l("ZodBase64",(e,t)=>{Jo.init(e,t),A.init(e,t)}),Hr=l("ZodBase64URL",(e,t)=>{qo.init(e,t),A.init(e,t)}),qr=l("ZodE164",(e,t)=>{Qo.init(e,t),A.init(e,t)}),Qr=l("ZodJWT",(e,t)=>{ti.init(e,t),A.init(e,t)}),un=l("ZodNumber",(e,t)=>{nn.init(e,t),F.init(e,t),e.gt=(o,i)=>e.check(Zt(o,i)),e.gte=(o,i)=>e.check(Ze(o,i)),e.min=(o,i)=>e.check(Ze(o,i)),e.lt=(o,i)=>e.check(At(o,i)),e.lte=(o,i)=>e.check(Ae(o,i)),e.max=(o,i)=>e.check(Ae(o,i)),e.int=o=>e.check(Ft(o)),e.safe=o=>e.check(Ft(o)),e.positive=o=>e.check(Zt(0,o)),e.nonnegative=o=>e.check(Ze(0,o)),e.negative=o=>e.check(At(0,o)),e.nonpositive=o=>e.check(Ae(0,o)),e.multipleOf=(o,i)=>e.check(Tt(o,i)),e.step=(o,i)=>e.check(Tt(o,i)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function w(e){return Ji(un,e)}a(w,"number");const es=l("ZodNumberFormat",(e,t)=>{ni.init(e,t),un.init(e,t)});function Ft(e){return Hi(es,e)}a(Ft,"int");const ts=l("ZodBoolean",(e,t)=>{oi.init(e,t),F.init(e,t)});function oe(e){return qi(ts,e)}a(oe,"boolean");const ns=l("ZodUnknown",(e,t)=>{ii.init(e,t),F.init(e,t)});function jt(){return Qi(ns)}a(jt,"unknown");const os=l("ZodNever",(e,t)=>{ri.init(e,t),F.init(e,t)});function is(e){return er(os,e)}a(is,"never");const rs=l("ZodArray",(e,t)=>{si.init(e,t),F.init(e,t),e.element=t.element,e.min=(n,o)=>e.check(xe(n,o)),e.nonempty=n=>e.check(xe(1,n)),e.max=(n,o)=>e.check(sn(n,o)),e.length=(n,o)=>e.check(an(n,o)),e.unwrap=()=>e.element});function ln(e,t){return dr(rs,e,t)}a(ln,"array");const ss=l("ZodObject",(e,t)=>{ci.init(e,t),F.init(e,t),P(e,"shape",()=>t.shape),e.keyof=()=>M(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:jt()}),e.loose=()=>e.clone({...e._zod.def,catchall:jt()}),e.strict=()=>e.clone({...e._zod.def,catchall:is()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>In(e,n),e.safeExtend=n=>Pn(e,n),e.merge=n=>En(e,n),e.pick=n=>zn(e,n),e.omit=n=>Sn(e,n),e.partial=(...n)=>On(hn,e,n[0]),e.required=(...n)=>An(fn,e,n[0])});function C(e,t){const n={type:"object",shape:e??{},...g(t)};return new ss(n)}a(C,"object");const as=l("ZodUnion",(e,t)=>{ui.init(e,t),F.init(e,t),e.options=t.options});function dn(e,t){return new as({type:"union",options:e,...g(t)})}a(dn,"union");const cs=l("ZodIntersection",(e,t)=>{li.init(e,t),F.init(e,t)});function us(e,t){return new cs({type:"intersection",left:e,right:t})}a(us,"intersection");const ls=l("ZodRecord",(e,t)=>{di.init(e,t),F.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Lt(e,t,n){return new ls({type:"record",keyType:e,valueType:t,...g(n)})}a(Lt,"record");const Le=l("ZodEnum",(e,t)=>{hi.init(e,t),F.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(o,i)=>{const r={};for(const s of o)if(n.has(s))r[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Le({...t,checks:[],...g(i),entries:r})},e.exclude=(o,i)=>{const r={...t.entries};for(const s of o)if(n.has(s))delete r[s];else throw new Error(`Key ${s} not found in enum`);return new Le({...t,checks:[],...g(i),entries:r})}});function M(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Le({type:"enum",entries:n,...g(t)})}a(M,"_enum");const ds=l("ZodTransform",(e,t)=>{fi.init(e,t),F.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new ve(e.constructor.name);n.addIssue=r=>{if(typeof r=="string")n.issues.push(se(r,n.value,t));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(se(s))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(r=>(n.value=r,n)):(n.value=i,n)}});function hs(e){return new ds({type:"transform",transform:e})}a(hs,"transform");const hn=l("ZodOptional",(e,t)=>{pi.init(e,t),F.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Dt(e){return new hn({type:"optional",innerType:e})}a(Dt,"optional");const fs=l("ZodNullable",(e,t)=>{gi.init(e,t),F.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Nt(e){return new fs({type:"nullable",innerType:e})}a(Nt,"nullable");const ps=l("ZodDefault",(e,t)=>{mi.init(e,t),F.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function gs(e,t){return new ps({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Kt(t)}})}a(gs,"_default");const ms=l("ZodPrefault",(e,t)=>{yi.init(e,t),F.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ys(e,t){return new ms({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Kt(t)}})}a(ys,"prefault");const fn=l("ZodNonOptional",(e,t)=>{vi.init(e,t),F.init(e,t),e.unwrap=()=>e._zod.def.innerType});function vs(e,t){return new fn({type:"nonoptional",innerType:e,...g(t)})}a(vs,"nonoptional");const bs=l("ZodCatch",(e,t)=>{bi.init(e,t),F.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function ws(e,t){return new bs({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}a(ws,"_catch");const xs=l("ZodPipe",(e,t)=>{wi.init(e,t),F.init(e,t),e.in=t.in,e.out=t.out});function Bt(e,t){return new xs({type:"pipe",in:e,out:t})}a(Bt,"pipe");const _s=l("ZodReadonly",(e,t)=>{xi.init(e,t),F.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ks(e){return new _s({type:"readonly",innerType:e})}a(ks,"readonly");const Cs=l("ZodCustom",(e,t)=>{_i.init(e,t),F.init(e,t)});function zs(e,t={}){return hr(Cs,e,t)}a(zs,"refine");function Ss(e){return fr(e)}a(Ss,"superRefine");const Is=C({pxFromCanvasLeft:w().default(100),pxFromCanvasTop:w().default(100)}).default({pxFromCanvasLeft:100,pxFromCanvasTop:100}),Ps=C({widthInPx:w().default(50),lengthInPx:w().default(50)}).default({widthInPx:50,lengthInPx:50}),Es=C({width:w().default(1920),height:w().default(1080),backgroundColor:I().default("rgba(0, 0, 0, 0)")}).default({width:1920,height:1080,backgroundColor:"rgba(0, 0, 0, 0)"}),de=C({positionOnCanvas:Is,hitboxSize:Ps,layerLevel:w().default(10)}),E=de.extend({hitboxSize:C({widthInPx:w().default(75),lengthInPx:w().default(75)}).default({widthInPx:75,lengthInPx:75}),input:C({keyboard:C({keyCode:I().nullable().default(null)}).default({keyCode:null}),mouse:C({button:w().nullable().default(null),wheel:M(["up","down"]).nullable().default(null)}).default({button:null,wheel:null}),gamepad:C({controllerIndex:w().nullable().default(0),stick:C({type:M(["left","right"]).nullable().default(null),axis:M(["X","Y"]).nullable().default(null),direction:M(["positive","negative"]).nullable().default(null)}).default({type:null,axis:null,direction:null}),button:C({index:w().nullable().default(null)}).default({index:null})}).default({controllerIndex:0,stick:{type:null,axis:null,direction:null},button:{index:null}})}).default({keyboard:{keyCode:null},mouse:{button:null,wheel:null},gamepad:{controllerIndex:0,stick:{type:null,axis:null,direction:null},button:{index:null}}}),processing:C({radialCompensationAxis:w().default(-1),multiplier:w().default(1),antiDeadzone:w().default(.01),fadeOutDuration:w().default(.2)}).default({radialCompensationAxis:-1,multiplier:1,antiDeadzone:.01,fadeOutDuration:.2}),display:C({text:I().default(""),fillStyle:I().default("#ffffff"),fillStyleBackground:I().default("#000000"),strokeStyle:I().default("#808080"),strokeWidth:w().default(2),fontStyle:C({textAlign:M(["left","right","center","start","end"]).default("center"),fillStyle:I().default("black"),font:I().default("15px Lucida Console"),strokeStyle:I().default("white"),strokeWidth:w().default(2)}).default({textAlign:"center",fillStyle:"black",font:"15px Lucida Console",strokeStyle:"white",strokeWidth:2}),fillDirection:M(["normal","reversed"]).default("normal")}).default({text:"",fillStyle:"#ffffff",fillStyleBackground:"#000000",strokeStyle:"#808080",strokeWidth:2,fontStyle:{textAlign:"center",fillStyle:"black",font:"15px Lucida Console",strokeStyle:"white",strokeWidth:2},fillDirection:"normal"})}),X=C({strokeStyle:I(),fillStyle:I(),lineWidth:w(),opacity:w()}).partial(),ee=de.extend({hitboxSize:C({widthInPx:w().default(200),lengthInPx:w().default(200)}).default({widthInPx:200,lengthInPx:200}),input:C({controllerIndex:w().nullable().default(0),xAxes:Lt(I(),oe()).default({0:!0}),yAxes:Lt(I(),oe()).default({1:!0}),xKeyCodePositive:I().nullable().default("ArrowRight"),xKeyCodeNegative:I().nullable().default("ArrowLeft"),yKeyCodePositive:I().nullable().default("ArrowDown"),yKeyCodeNegative:I().nullable().default("ArrowUp"),invertX:oe().default(!1),invertY:oe().default(!1)}).default({controllerIndex:0,xAxes:{0:!0},yAxes:{1:!0},xKeyCodePositive:"ArrowRight",xKeyCodeNegative:"ArrowLeft",yKeyCodePositive:"ArrowDown",yKeyCodeNegative:"ArrowUp",invertX:!1,invertY:!1}),processing:C({deadzone:w().default(.03),antiDeadzone:w().default(0)}).default({deadzone:.03,antiDeadzone:0}),display:C({radius:w().default(100),stickRadius:w().optional(),fillStyle:I().optional(),fillStyleStick:I().optional(),fillStyleBackground:I().optional(),backgroundStyle:X.default({strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"}),xLineStyle:X.default({strokeStyle:"#FF0000",lineWidth:2,opacity:.5}),yLineStyle:X.default({strokeStyle:"#00FF00",lineWidth:2,opacity:.5}),deadzoneStyle:X.default({fillStyle:"#524d4d"}),inputVectorStyle:X.default({strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5}),unitVectorStyle:X.default({strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5}),crosshairStyle:X.default({fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2})}).default({radius:100,backgroundStyle:{strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"},xLineStyle:{strokeStyle:"#FF0000",lineWidth:2,opacity:.5},yLineStyle:{strokeStyle:"#00FF00",lineWidth:2,opacity:.5},deadzoneStyle:{fillStyle:"#524d4d"},inputVectorStyle:{strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5},unitVectorStyle:{strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5},crosshairStyle:{fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2}})}),Pe=de.extend({hitboxSize:C({widthInPx:w().default(100),lengthInPx:w().default(25)}).default({widthInPx:100,lengthInPx:25}),layerLevel:w().default(20),text:I().default("Sample text"),textStyle:C({textAlign:M(["left","right","center","start","end"]).default("center"),fillStyle:I().default("black"),font:I().default("15px Lucida Console"),strokeStyle:I().default("white"),strokeWidth:w().default(2)}).default({textAlign:"center",fillStyle:"black",font:"15px Lucida Console",strokeStyle:"white",strokeWidth:2}),shouldStroke:oe().default(!0)}),Qe=de.extend({layerLevel:w().default(0),src:I().default("./viewWhichRendersConfigurationAndUi/_assets/images/KeyDefault.png"),opacity:w().min(0).max(1).default(1)}),Ee=de.extend({hitboxSize:C({widthInPx:w().default(640),lengthInPx:w().default(480)}).default({widthInPx:640,lengthInPx:480}),url:I().default("https://www.youtube.com/embed/dQw4w9WgXcQ"),opacity:w().min(0).max(1).default(1),interactionMode:M(["readonly","interactableOnFocus"]).default("interactableOnFocus")}),Os=dn([C({LinearInputIndicator:E}),C({PlanarInputIndicator:ee}),C({Text:Pe}),C({Image:Qe}),C({WebEmbed:Ee})]),As=C({canvas:Es,objects:ln(Os)});function Zs(e){const t=As.safeParse(e);return t.success?{success:!0,data:t.data}:{success:!1,error:t.error}}a(Zs,"validateCustomisableCanvasConfig");function Ts(e){return e.type===null||e.axis===null?null:(e.type==="left"?0:2)+(e.axis==="X"?0:1)}a(Ts,"asConventionalGamepadAxisNumber");const rt=class rt extends Y{constructor(t,n){super(n),this.config=E.parse(t||{}),this.runtimeState={value:0,previousValue:0,opacity:1}}update(t){let n=0,o=0;const i=window.keyboard,r=this.config.input.keyboard.keyCode;n+=r&&i[r]?1:0;const s=window.mouse,c=this.config.input.mouse.button;c!==null&&s.buttons[c]&&(n+=1);const u=this.config.input.mouse.wheel;u!==null&&s.wheelEvents&&(u==="up"&&s.wheelEvents.up||u==="down"&&s.wheelEvents.down)&&(n+=1);const d=this.config.processing.antiDeadzone;let h=Math.max(0,d-o*.5);const y=window.gamepads,v=this.config.input.gamepad.controllerIndex??0;if(y){const f=y[v];if(f){const x=this.config.input.gamepad.stick,j=Ts(x);if(f.axes&&j!==null){const _=f.axes[j],T=x.direction==="negative",$=this.config.processing.radialCompensationAxis,N=$>=0?f.axes[$]:void 0;_!=null&&(T===!0&&_<0||T===!1&&_>0)&&($>=0&&N!==void 0?n+=Math.abs(_)*Math.sqrt(1+2*Math.pow(Math.abs(N),2)):$<0&&(n+=(Math.abs(_)-h)/(1-h))),$>=0&&N!==void 0&&(o+=Math.abs(N))}const S=this.config.input.gamepad.button.index;if(f.buttons&&S!==null){const _=f.buttons[S];_&&(n+=_.value)}}}h>=1&&(h=.999);const p=this.config.processing.multiplier,m=Math.max(Math.min((n-h)/(1-h)*p,1),0),b=this.config.processing.fadeOutDuration;if(m>0)this.runtimeState.value=m,this.runtimeState.opacity=1;else if(b>0&&this.runtimeState.value>0){const f=1/b;this.runtimeState.opacity=this.runtimeState.opacity*Math.exp(-f*t),this.runtimeState.opacity<.001&&(this.runtimeState.opacity=0,this.runtimeState.value=0)}else this.runtimeState.value=0,this.runtimeState.opacity=1;return!0}draw(t,n,o){n.fillStyle=this.config.display.fillStyleBackground,n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx);const i=n.globalAlpha;n.globalAlpha*=this.runtimeState.opacity,n.fillStyle=this.config.display.fillStyle,this.config.display.fillDirection==="reversed"?n.fillRect(0,this.config.hitboxSize.lengthInPx,this.config.hitboxSize.widthInPx,-this.config.hitboxSize.lengthInPx*this.runtimeState.value):n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx*this.runtimeState.value),n.globalAlpha=i,n.strokeStyle=this.config.display.strokeStyle,n.lineWidth=this.config.display.strokeWidth,n.strokeRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx);const s=this.config.display.text,c=this.config.display.fontStyle,u=this.config.hitboxSize.widthInPx*.5,d=this.config.hitboxSize.lengthInPx*.5;ue(n,c),n.strokeStyle=c.strokeStyle??"white",n.lineWidth=(c.strokeWidth??3)*2,n.strokeText(s,u,d),n.fillStyle=c.fillStyle??"black",n.fillText(s,u,d)}};a(rt,"LinearInputIndicator");let De=rt;const z=class z{constructor(t,n,o){this.x=t||0,this.y=n||0,this.z=o||0}negative(){return new z(-this.x,-this.y,-this.z)}add(t){return t instanceof z?new z(this.x+t.x,this.y+t.y,this.z+t.z):new z(this.x+t,this.y+t,this.z+t)}subtract(t){return t instanceof z?new z(this.x-t.x,this.y-t.y,this.z-t.z):new z(this.x-t,this.y-t,this.z-t)}multiply(t){return t instanceof z?new z(this.x*t.x,this.y*t.y,this.z*t.z):new z(this.x*t,this.y*t,this.z*t)}divide(t){return t instanceof z?new z(this.x/t.x,this.y/t.y,this.z/t.z):new z(this.x/t,this.y/t,this.z/t)}equals(t){return this.x==t.x&&this.y==t.y&&this.z==t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new z(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}length(){return Math.sqrt(this.dot(this))}unit(){return this.divide(this.length())}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}}angleTo(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}toArray(t){return[this.x,this.y,this.z].slice(0,t||3)}clone(){return new z(this.x,this.y,this.z)}init(t,n,o){return this.x=t,this.y=n,this.z=o,this}static negative(t,n){return n.x=-t.x,n.y=-t.y,n.z=-t.z,n}static add(t,n,o){return n instanceof z?(o.x=t.x+n.x,o.y=t.y+n.y,o.z=t.z+n.z):(o.x=t.x+n,o.y=t.y+n,o.z=t.z+n),o}static subtract(t,n,o){return n instanceof z?(o.x=t.x-n.x,o.y=t.y-n.y,o.z=t.z-n.z):(o.x=t.x-n,o.y=t.y-n,o.z=t.z-n),o}static multiply(t,n,o){return n instanceof z?(o.x=t.x*n.x,o.y=t.y*n.y,o.z=t.z*n.z):(o.x=t.x*n,o.y=t.y*n,o.z=t.z*n),o}static divide(t,n,o){return n instanceof z?(o.x=t.x/n.x,o.y=t.y/n.y,o.z=t.z/n.z):(o.x=t.x/n,o.y=t.y/n,o.z=t.z/n),o}static cross(t,n,o){return o.x=t.y*n.z-t.z*n.y,o.y=t.z*n.x-t.x*n.z,o.z=t.x*n.y-t.y*n.x,o}static unit(t,n){const o=t.length();return n.x=t.x/o,n.y=t.y/o,n.z=t.z/o,n}static fromAngles(t,n){return new z(Math.cos(t)*Math.cos(n),Math.sin(n),Math.sin(t)*Math.cos(n))}static randomDirection(){return z.fromAngles(Math.random()*Math.PI*2,Math.asin(Math.random()*2-1))}static min(t,n){return new z(Math.min(t.x,n.x),Math.min(t.y,n.y),Math.min(t.z,n.z))}static max(t,n){return new z(Math.max(t.x,n.x),Math.max(t.y,n.y),Math.max(t.z,n.z))}static lerp(t,n,o){return n.subtract(t).multiply(o).add(t)}static fromArray(t){return new z(t[0],t[1],t[2])}static angleBetween(t,n){return t.angleTo(n)}};a(z,"Vector");let ae=z;const st=class st extends Y{constructor(t,n){super(n),this.config=ee.parse(t||{}),this.runtimeState={inputVector:new ae(0,0),previousX:0,previousY:0}}update(){let t=0,n=0;const o=window.keyboard;if(o){const s=this.config.input.xKeyCodePositive,c=this.config.input.xKeyCodeNegative,u=this.config.input.yKeyCodePositive,d=this.config.input.yKeyCodeNegative;s&&o[s]&&(t+=1),c&&o[c]&&(t-=1),u&&o[u]&&(n+=1),d&&o[d]&&(n-=1)}const i=window.gamepads,r=this.config.input.controllerIndex??0;if(i){const s=i[r];if(s&&s.axes)for(let c=0;c<s.axes.length;c++){const u=s.axes[c];this.config.input.xAxes[c]&&u!==void 0&&(t+=u),this.config.input.yAxes[c]&&u!==void 0&&(n+=u)}}return this.config.input.invertX&&(t*=-1),this.config.input.invertY&&(n*=-1),this.runtimeState.previousX=this.runtimeState.inputVector.x,this.runtimeState.previousY=this.runtimeState.inputVector.y,this.runtimeState.inputVector.x=Math.max(Math.min(t,1),-1),this.runtimeState.inputVector.y=Math.max(Math.min(n,1),-1),this.runtimeState.previousX!==this.runtimeState.inputVector.x||this.runtimeState.previousY!==this.runtimeState.inputVector.y}draw(t,n){ue(n,{lineCap:"round"});const o=this.config.display.radius;n.transform(1,0,0,1,o,o),n.beginPath(),Oe(n,0,0,o,0,2*Math.PI,this.config.display.backgroundStyle),n.stroke(),n.fill();const i=this.config.processing.deadzone;if(i>0&&(n.beginPath(),Oe(n,0,0,o*i,0,2*Math.PI,this.config.display.deadzoneStyle),n.fill()),n.save(),this.config.display.xLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.xLineStyle.opacity),n.beginPath(),vt(n,0,0,this.runtimeState.inputVector.x*o,0,this.config.display.xLineStyle),n.stroke(),n.restore(),n.save(),this.config.display.yLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.yLineStyle.opacity),n.beginPath(),vt(n,0,0,0,this.runtimeState.inputVector.y*o,this.config.display.yLineStyle),n.stroke(),n.restore(),this.runtimeState.inputVector.length()>i){const r=this.runtimeState.inputVector.unit(),s=this.runtimeState.inputVector.toAngles(),c=this.config.processing.antiDeadzone,u=ae.fromAngles(s.theta,s.phi).multiply((this.runtimeState.inputVector.length()-c)/(1-c));n.save(),this.config.display.unitVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.unitVectorStyle.opacity),n.beginPath(),yt(n,0,0,r.x*o,r.y*o,this.config.display.unitVectorStyle),n.stroke(),n.restore(),n.save(),this.config.display.inputVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.inputVectorStyle.opacity),n.beginPath(),yt(n,0,0,u.x*o,u.y*o,this.config.display.inputVectorStyle),n.stroke(),n.restore()}n.beginPath(),Oe(n,0,0,2,0,2*Math.PI,this.config.display.crosshairStyle),n.fill(),n.stroke(),n.closePath()}};a(st,"PlanarInputIndicator");let Ne=st;const at=class at extends Y{constructor(t,n){super(n),this.config=Pe.parse(t||{})}update(){return!0}draw(t,n){n.beginPath(),n.textBaseline="middle",n.textAlign="left",n.font=this.config.textStyle.font??"30px Lucida Console";const o=0,i=this.config.hitboxSize.lengthInPx/2;this.config.shouldStroke&&(n.strokeStyle=this.config.textStyle.strokeStyle??"white",n.lineWidth=(this.config.textStyle.strokeWidth??3)*2,n.strokeText(this.config.text,o,i)),n.fillStyle=this.config.textStyle.fillStyle??"black",n.fillText(this.config.text,o,i)}};a(at,"Text");let Be=at;var te;let $s=(te=class extends Y{constructor(t,n){super(n),this.config=Qe.parse(t||{}),this.runtimeState={imageElement:new window.Image},this.runtimeState.imageElement.src=this.config.src}update(){return this.runtimeState.imageElement.complete}draw(t,n){if(this.runtimeState.imageElement.complete){n.save(),n.globalAlpha*=this.config.opacity;try{n.drawImage(this.runtimeState.imageElement,0,0,this.runtimeState.imageElement.width,this.runtimeState.imageElement.height,0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx)}catch{}n.restore()}}},a(te,"Image"),te);const H=new Map,ct=class ct extends Y{constructor(t,n){super(n),this.config=Ee.parse(t||{}),this.initializeEmbed()}initializeEmbed(){const t=H.get(this.objArrayIdx);if(t&&t.parentNode){t.src!==this.config.url&&(t.src=this.config.url);return}const n=50,o=document.createElement("iframe");o.src=this.config.url,o.setAttribute("referrerpolicy","strict-origin-when-cross-origin"),o.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"),o.style.position="absolute",o.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+n+"px",o.style.top=this.config.positionOnCanvas.pxFromCanvasTop+n+"px",o.style.width=this.config.hitboxSize.widthInPx-n*2+"px",o.style.height=this.config.hitboxSize.lengthInPx-n*2+"px",o.style.opacity=this.config.opacity.toString(),o.style.border="2px solid #B4B4B4",o.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto",o.style.zIndex="1",document.body.appendChild(o),H.set(this.objArrayIdx,o)}update(){const t=H.get(this.objArrayIdx);if(!t)return!1;const n=50;return t.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+n+"px",t.style.top=this.config.positionOnCanvas.pxFromCanvasTop+n+"px",t.style.width=this.config.hitboxSize.widthInPx-n*2+"px",t.style.height=this.config.hitboxSize.lengthInPx-n*2+"px",t.style.opacity=this.config.opacity.toString(),t.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto",!1}draw(t,n,o=!1){const r=H.get(this.objArrayIdx);r&&(r.style.display=o?"none":"block"),o&&(n.fillStyle="#808080",n.fillRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.strokeStyle="#B4B4B4",n.lineWidth=2,n.strokeRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.fillStyle="black",n.font="14px monospace",n.fillText(this.config.url,55,40),n.font="20px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText("WebEmbed",this.config.hitboxSize.widthInPx/2,this.config.hitboxSize.lengthInPx/2))}cleanup(){const t=H.get(this.objArrayIdx);t&&(t.parentNode&&t.parentNode.removeChild(t),H.delete(this.objArrayIdx))}};a(ct,"WebEmbed");let _e=ct;const ie={LinearInputIndicator:De,PlanarInputIndicator:Ne,Text:Be,Image:$s,WebEmbed:_e};function Fs(e){return e in ie}a(Fs,"isCanvasObjectClassName");function Re(e,t){for(const n in e)if(Fs(n)){const o=ie[n],i=e[n];return new o(i,t)}throw new Error("Invalid config: no valid class name found")}a(Re,"deserializeCanvasObject");const ut=class ut{constructor(){this.className="PropertyEdit",this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.deleteCallback=null,this.pendingChanges=new Map}hidePropertyEdit(){const t=document.getElementById("propertyTable"),n=document.getElementById("canvasConfigEditor"),o=document.getElementById("sceneConfigText"),i=document.getElementById("leftPanel"),r=document.getElementById("containerForPossibleEditorWindows");if(!(!t||!i)){if(this.configManager&&this.targetObjectIndex!==null&&this.pendingChanges.size>0&&(this.configManager.updateObject(this.targetObjectIndex,this.pendingChanges),this.pendingChanges.clear()),n&&!n.hidden&&this.applySceneConfig&&(document.activeElement===o||o.dataset.modified==="true"))try{const c=JSON.parse(o.value);this.applySceneConfig(c),o.dataset.modified="false"}catch(c){console.error("Invalid JSON in canvas config:",c),alert("Invalid JSON syntax. Please fix the configuration.");return}for(;t.firstChild!==null;)t.removeChild(t.firstChild);n&&(n.hidden=!0),o&&(o.value=""),t&&(t.hidden=!0),i&&(i.hidden=!0),r&&(r.hidden=!0),this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.pendingChanges.clear()}}showPropertyEdit(t,n,o,i,r){this.targetObject=n,this.targetObjectIndex=o,this.configManager=i,this.deleteCallback=r||null,this.pendingChanges.clear();const s=document.getElementById("containerForPossibleEditorWindows"),c=document.getElementById("propertyTable"),u=document.getElementById("canvasConfigEditor"),d=document.getElementById("editorTitle"),h=document.getElementById("leftPanel"),y=document.getElementById("rightPanel");if(!s||!c||!d||!h)return;h.hidden=!1,u&&(u.hidden=!0),c.hidden=!1,y&&(y.hidden=!0);const v=Object.keys(t)[0]||"unknown",p=t[v];for(d.innerHTML=v;c.firstChild!==null;)c.removeChild(c.firstChild);if(this.renderProperties(c,[],p,p),this.deleteCallback){const m=document.createElement("tr");m.className="property";const b=document.createElement("td");b.colSpan=2,b.style.paddingTop="20px";const f=document.createElement("button");f.textContent="Delete Object",f.style.width="100%",f.style.padding="10px",f.style.backgroundColor="rgba(120, 40, 40, 0.9)",f.style.color="#cdc1c1",f.style.border="1px solid #B4B4B4",f.style.cursor="pointer",f.style.fontFamily="Lucida Console",f.style.fontSize="1em",f.addEventListener("click",()=>{confirm("Delete this object?")&&(this.deleteCallback&&this.deleteCallback(),this.hidePropertyEdit())}),b.appendChild(f),m.appendChild(b),c.appendChild(m)}s.hidden=!1}showCanvasConfig(t,n,o){this.targetScene=t,this.applySceneConfig=o;const i=document.getElementById("containerForPossibleEditorWindows"),r=document.getElementById("propertyTable"),s=document.getElementById("canvasConfigEditor"),c=document.getElementById("sceneConfigText"),u=document.getElementById("editorTitle"),d=document.getElementById("leftPanel");!i||!r||!s||!c||!u||!d||(d.hidden=!1,r.hidden=!0,s.hidden=!1,u.innerHTML="Canvas Configuration",c.value=JSON.stringify(t,null,2),c.dataset.modified="false",c.oninput=()=>{c.dataset.modified="true"})}renderProperties(t,n,o,i){if(this.isRecord(o))for(const r in o){const s=[...n,r],c=o[r],u=this.getNestedValue(i,s);if(this.isPlainObject(c)){const d=this.createPropertyHeader(r,n.length);t.appendChild(d),this.renderProperties(t,s,c,i)}else{const d=this.createPropertyRow(r,u,s,i,n.length);t.appendChild(d)}}}isRecord(t){return this.isPlainObject(t)}createPropertyHeader(t,n){const o=document.createElement("div");return o.style.marginLeft=`${n*20}px`,o.style.marginTop="8px",o.style.marginBottom="4px",o.style.color="#AAAAAA",o.style.fontWeight="bold",o.textContent=t+":",o}createPropertyRow(t,n,o,i,r){const s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.marginLeft=`${r*20}px`,s.style.marginBottom="4px",s.style.gap="10px";const c=document.createElement("label");c.textContent=t+":",c.style.minWidth="120px",c.style.color="#FFFFFF",s.appendChild(c);const u=this.createInput(n,o,i);return s.appendChild(u),s}createInput(t,n,o){const i=document.createElement("input");return i.type="text",i.value=this.valueToString(t),i.style.width="200px",i.style.padding="4px",i.style.fontFamily="monospace",i.addEventListener("input",()=>{try{const r=this.parseValue(i.value),s=n.join(".");this.pendingChanges.set(s,{path:n,value:r}),i.style.borderColor="",this.setNestedValue(o,n,r)}catch(r){console.error("[PropertyEdit] Failed to parse input:",r),i.style.borderColor="red"}}),i}valueToString(t){if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean")return String(t);if(typeof t=="object")try{return JSON.stringify(t)}catch{return"[Object]"}return"[Unknown]"}parseValue(t){if(t==="null")return null;if(t==="undefined")return;if(t==="true")return!0;if(t==="false")return!1;if(t==="")return null;const n=Number(t);if(!isNaN(n)&&t.trim()!=="")return n;try{return JSON.parse(t)}catch{return t}}getNestedValue(t,n){if(!this.isRecord(t))return;let o=t;const i=n.filter(r=>r!=="Base Properties");for(const r of i){if(o==null)return;const s=o[r];if(this.isRecord(s))o=s;else return s}return o}setNestedValue(t,n,o){if(!this.isRecord(t))return;let i=t;const r=n.filter(c=>c!=="Base Properties");for(let c=0;c<r.length-1;c++){const u=r[c];if(!u)continue;(i[u]===null||i[u]===void 0)&&(i[u]={});const d=i[u];if(this.isRecord(d))i=d;else{i[u]={};const h=i[u];this.isRecord(h)&&(i=h)}}const s=r[r.length-1];s!==void 0&&(i[s]=o)}isPlainObject(t){return t===null||typeof t!="object"||t instanceof Image||t instanceof HTMLElement||Array.isArray(t)?!1:t.constructor===Object}update(){}draw(){}};a(ut,"PropertyEdit");let Me=ut;function js(e){try{const t=JSON.parse(e),n=Zs(t);return n.success?{success:!0,config:n.data}:{success:!1,error:`Config validation failed: ${n.error.issues.map(i=>`${i.path.join(".")}: ${i.message}`).join("; ")}`}}catch(t){return t instanceof SyntaxError?{success:!1,error:`Invalid JSON: ${t.message}`}:{success:!1,error:`Unknown error: ${String(t)}`}}}a(js,"loadConfigFromJSON");function Ls(e){const t=localStorage.getItem(e);return t?js(t):{success:!1,error:"not_found"}}a(Ls,"loadConfigFromLocalStorage");function Ds(e,t,n,o){if(t<0||t>=e.objects.length)return e;const i=[...e.objects],r=i[t];if(!r)return e;const c=Object.entries(r)[0];if(!c)return e;const[u,d]=c;if(!u||!d)return e;const h={...d,positionOnCanvas:{pxFromCanvasLeft:n,pxFromCanvasTop:o}};return i[t]={[u]:h},{...e,objects:i}}a(Ds,"updateObjectPosition");function Ns(e,t,n){return{...e,canvas:{...e.canvas,width:t,height:n}}}a(Ns,"updateCanvasDimensions");function Bs(e,t){return{...e,objects:[...e.objects,t]}}a(Bs,"addObject");function Rs(e,t){return t<0||t>=e.objects.length?e:{...e,objects:e.objects.filter((n,o)=>o!==t)}}a(Rs,"removeObject");function Ms(e,t,n){if(t<0||t>=e.objects.length||n.size===0)return e;const o=[...e.objects],i=o[t];if(!i)return e;const s=Object.entries(i)[0];if(!s)return e;const[c,u]=s;if(!c||!u)return e;let d=JSON.parse(JSON.stringify(u));return n.forEach(({path:h,value:y})=>{if(h.length===0)return;let v=d;for(let m=0;m<h.length-1;m++){const b=h[m];b&&(v[b]===void 0&&(v[b]={}),v=v[b])}const p=h[h.length-1];p!==void 0&&(v[p]=y)}),o[t]={[c]:d},{...e,objects:o}}a(Ms,"updateObjectByIndex");const lt=class lt{constructor(t){this.changeCallbacks=[],this.saveCallback=null,this._config=t}get config(){return this._config}setConfig(t){t!==this._config&&(this._config=t,this.changeCallbacks.forEach(n=>{n(t)}),this.saveCallback&&this.saveCallback(t))}onChange(t){return this.changeCallbacks.push(t),()=>{this.changeCallbacks=this.changeCallbacks.filter(n=>n!==t)}}onSave(t){this.saveCallback=t}moveObject(t,n,o){const i=Ds(this._config,t,n,o);this.setConfig(i)}resizeCanvas(t,n){const o=Ns(this._config,t,n);this.setConfig(o)}updateObject(t,n){const o=Ms(this._config,t,n);this.setConfig(o)}addObject(t){const n=Bs(this._config,t);this.setConfig(n)}deleteObject(t){const n=Rs(this._config,t);this.setConfig(n)}};a(lt,"ConfigManager");let We=lt;function ke(e,t=2e3){const n=document.getElementById("toastContainer");if(!n){console.warn("[Toast] Container not found");return}const o=document.createElement("div");o.className="BoxWhichNotifiesUserOfStatusUpdates",o.textContent=e,n.appendChild(o),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},t)}a(ke,"showToast");const Ws="#FF00FF",Us=1,Ks="rgba(0, 120, 255, 0.8)",Vs="rgba(0, 120, 255, 0.1)",Xs=2,dt=class dt{constructor(t,n){this.cache=null,this.canvas=t;const o=t.getContext("2d");if(!o)throw new Error("Failed to get 2D context");this.ctx=o,this.deserializer=n}deserializeObjects(t){const n=[];for(let o=0;o<t.objects.length;o++){const i=t.objects[o];if(i)try{n.push(this.deserializer(i,o))}catch(r){console.error("[CanvasRenderer] Deserialization failed:",i,r)}}return n}update(t,n){var i;if(((i=this.cache)==null?void 0:i.config)!==t){const r=this.cache;if(this.cache={config:t,objects:this.deserializeObjects(t)},r)for(let s=0;s<r.objects.length;s++){const c=r.objects[s],u=this.cache.objects[s];c&&(!u||c.constructor!==u.constructor)&&typeof c.cleanup=="function"&&c.cleanup()}}const o=this.cache;if(!o)throw new Error("Cache should be initialized");for(let r=0;r<o.objects.length;r++){const s=o.objects[r];s&&s.update(n)}return o.objects}render(t,n){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const o=n===void 0?null:typeof n=="number"?new Set([n]):n,r=t.map((s,c)=>({obj:s,idx:c})).sort((s,c)=>s.obj.config.layerLevel-c.obj.config.layerLevel);for(const{obj:s,idx:c}of r)o&&o.has(c)||s&&(this.ctx.save(),this.ctx.setTransform(1,0,0,1,s.config.positionOnCanvas.pxFromCanvasLeft,s.config.positionOnCanvas.pxFromCanvasTop),s.draw(this.canvas,this.ctx),this.ctx.closePath(),this.ctx.restore())}renderOverlay(t){t(this.canvas,this.ctx)}renderDebugHitboxes(t,n){for(let o=0;o<t.length;o++){if(n&&!n.has(o))continue;const i=t[o];i&&(this.ctx.setTransform(1,0,0,1,i.config.positionOnCanvas.pxFromCanvasLeft,i.config.positionOnCanvas.pxFromCanvasTop),this.ctx.beginPath(),this.ctx.strokeStyle=Ws,this.ctx.lineWidth=Us,this.ctx.rect(0,0,i.config.hitboxSize.widthInPx,i.config.hitboxSize.lengthInPx),this.ctx.stroke())}}renderSelectionBox(t,n,o,i){const r=Math.min(t,o),s=Math.max(t,o),c=Math.min(n,i),u=Math.max(n,i);this.ctx.setTransform(1,0,0,1,0,0),this.ctx.beginPath(),this.ctx.strokeStyle=Ks,this.ctx.fillStyle=Vs,this.ctx.lineWidth=Xs,this.ctx.rect(r,c,s-r,u-c),this.ctx.fill(),this.ctx.stroke()}};a(dt,"CanvasRenderer");let Ue=dt;const ht=class ht{constructor(){this.selectedObjectIndices=new Set,this.draggingOffset=new ae(0,0),this.gridsize=10,this.editingProperties=!1,this.creationPanelActive=!1,this.dragStartPosition=null,this.lastDragPosition=null,this.disableInteractions=!1,this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1,this.onMoveObject=null,this.onDeleteObject=null,this.onShowPropertyEdit=null,this.onShowCreationPanel=null,this.onCloseEditors=null}setOnMoveObject(t){this.onMoveObject=t}setOnDeleteObject(t){this.onDeleteObject=t}setOnShowPropertyEdit(t){this.onShowPropertyEdit=t}setOnShowCreationPanel(t){this.onShowCreationPanel=t}setOnCloseEditors(t){this.onCloseEditors=t}setEditingProperties(t){this.editingProperties=t}setCreationPanelActive(t){this.creationPanelActive=t}setDisableInteractions(t){this.disableInteractions=t}isClickInDraggableArea(t,n,o){const{positionOnCanvas:i,hitboxSize:r}=t.config;if(!i||!r)return!1;const s=n-i.pxFromCanvasLeft,c=o-i.pxFromCanvasTop;return t instanceof _e?!(s>=50&&s<r.widthInPx-50&&c>=50&&c<r.lengthInPx-50):!0}getSelectedIndices(){return this.selectedObjectIndices}isSelected(t){return this.selectedObjectIndices.has(t)}clearSelection(){this.selectedObjectIndices.clear(),this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1}deleteSelectedObjects(){if(!this.onDeleteObject)return;const t=Array.from(this.selectedObjectIndices).sort((n,o)=>o-n);for(const n of t)this.onDeleteObject(n);this.clearSelection()}update(t){if(this.disableInteractions)return!1;if(k.clicks[0]===!0){let n=null;for(let o=t.length-1;o>=0;o--){const i=t[o];if(!i)continue;const{positionOnCanvas:r,hitboxSize:s}=i.config;if(!(!r||!s)&&k.x>r.pxFromCanvasLeft&&k.y>r.pxFromCanvasTop&&k.x<r.pxFromCanvasLeft+s.widthInPx&&k.y<r.pxFromCanvasTop+s.lengthInPx&&this.isClickInDraggableArea(i,k.x,k.y)){n=o;break}}if(n!==null){const o=t[n],{positionOnCanvas:i}=o.config;this.selectedObjectIndices.has(n)?i&&(this.draggingOffset.x=i.pxFromCanvasLeft-k.x,this.draggingOffset.y=i.pxFromCanvasTop-k.y,this.dragStartPosition={x:i.pxFromCanvasLeft,y:i.pxFromCanvasTop}):(this.selectedObjectIndices.clear(),this.selectedObjectIndices.add(n),i&&(this.draggingOffset.x=i.pxFromCanvasLeft-k.x,this.draggingOffset.y=i.pxFromCanvasTop-k.y,this.dragStartPosition={x:i.pxFromCanvasLeft,y:i.pxFromCanvasTop})),this.isSelectingBox=!1}else this.selectedObjectIndices.clear(),this.selectionBoxStart={x:k.x,y:k.y},this.selectionBoxEnd={x:k.x,y:k.y},this.isSelectingBox=!0,this.dragStartPosition=null,this.lastDragPosition=null}if(k.buttons[0]===!0){if(this.isSelectingBox&&this.selectionBoxStart)this.selectionBoxEnd={x:k.x,y:k.y};else if(this.selectedObjectIndices.size>0&&this.dragStartPosition){const n=Math.round((k.x+this.draggingOffset.x)/this.gridsize)*this.gridsize,o=Math.round((k.y+this.draggingOffset.y)/this.gridsize)*this.gridsize;this.lastDragPosition={x:n,y:o}}}if(k.buttons[0]===!1){if(this.isSelectingBox&&this.selectionBoxStart&&this.selectionBoxEnd){const n=Math.min(this.selectionBoxStart.x,this.selectionBoxEnd.x),o=Math.max(this.selectionBoxStart.x,this.selectionBoxEnd.x),i=Math.min(this.selectionBoxStart.y,this.selectionBoxEnd.y),r=Math.max(this.selectionBoxStart.y,this.selectionBoxEnd.y);this.selectedObjectIndices.clear();for(let s=0;s<t.length;s++){const c=t[s];if(!c)continue;const{positionOnCanvas:u,hitboxSize:d}=c.config;if(!u||!d)continue;const h=u.pxFromCanvasLeft,y=h+d.widthInPx,v=u.pxFromCanvasTop,p=v+d.lengthInPx;y<n||h>o||p<i||v>r||this.selectedObjectIndices.add(s)}this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1}else if(this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition){const n=this.lastDragPosition.x-this.dragStartPosition.x,o=this.lastDragPosition.y-this.dragStartPosition.y;if((n!==0||o!==0)&&this.onMoveObject)for(const i of this.selectedObjectIndices){const r=t[i];if(!r)continue;const{positionOnCanvas:s}=r.config;if(!s)continue;const c=s.pxFromCanvasLeft+n,u=s.pxFromCanvasTop+o;this.onMoveObject(i,c,u)}this.dragStartPosition=null,this.lastDragPosition=null}}if(k.clicks[2]===!0){let n=null;for(let o=t.length-1;o>=0;o--){const i=t[o];if(!i)continue;const{positionOnCanvas:r,hitboxSize:s}=i.config;if(!(!r||!s)&&k.x>r.pxFromCanvasLeft&&k.y>r.pxFromCanvasTop&&k.x<r.pxFromCanvasLeft+s.widthInPx&&k.y<r.pxFromCanvasTop+s.lengthInPx&&this.isClickInDraggableArea(i,k.x,k.y)){n=o;break}}n!==null&&!this.editingProperties&&!this.creationPanelActive?this.onShowPropertyEdit&&this.onShowPropertyEdit(t[n]):n===null&&!this.editingProperties&&!this.creationPanelActive&&this.onShowCreationPanel&&this.onShowCreationPanel()}return!1}hasSelection(){return this.selectedObjectIndices.size>0}getSelectionBox(){return this.isSelectingBox&&this.selectionBoxStart&&this.selectionBoxEnd?{startX:this.selectionBoxStart.x,startY:this.selectionBoxStart.y,endX:this.selectionBoxEnd.x,endY:this.selectionBoxEnd.y}:null}getDragPreview(){return this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition?{deltaX:this.lastDragPosition.x-this.dragStartPosition.x,deltaY:this.lastDragPosition.y-this.dragStartPosition.y}:null}getDragOriginalPosition(){return this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition?{x:this.dragStartPosition.x,y:this.dragStartPosition.y}:null}};a(ht,"UserEditModeInteractionsController");let Ke=ht;const Ys={LinearInputIndicator:E,PlanarInputIndicator:ee,Text:Pe,Image:Qe,WebEmbed:Ee};window.gamepads=null;window.keyboard=vn;window.mouse=k;const Rt="Delete";window.addEventListener("load",function(){const e=document.getElementById("canvas");if(!e)throw new Error("Canvas element not found");if(!e.getContext("2d"))throw new Error("Could not get 2D context");e.width=window.innerWidth,e.height=window.innerHeight;const n=new We({canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:[]}),o=new Ue(e,Re),i=new Ke;if(window.electronAPI){const f=window.electronAPI.isAppInReadonlyClickthroughMode();i.setDisableInteractions(f),console.log("[default.ts] Readonly/clickthrough mode:",f)}const r=pn(e),s=Hs(e,n,i);i.setOnMoveObject((f,x,j)=>{n.moveObject(f,x,j)}),i.setOnDeleteObject(f=>{s.deleteObjectAtIndex(f)}),i.setOnShowPropertyEdit(f=>{const x=f.objArrayIdx,S=n.config.objects[x];if(!S){console.error("[PropertyEdit] Could not find config for object at index",x);return}s.propertyEditor.showPropertyEdit(S,f,x,n,()=>{s.deleteObjectAtIndex(x)}),i.setEditingProperties(!0)}),i.setOnShowCreationPanel(()=>{s.showBothPanels()}),i.setOnCloseEditors(()=>{s.hideBothPanels()}),e.addEventListener("contextmenu",f=>{if(f.preventDefault(),window.electronAPI&&window.electronAPI.isAppInReadonlyClickthroughMode())return;let x=!1;const S=n.config.objects.map((_,T)=>Re(_,T));for(let _=0;_<S.length;_++){const T=S[_];if(T){const{positionOnCanvas:$,hitboxSize:N}=T.config;if($&&N&&f.offsetX>$.pxFromCanvasLeft&&f.offsetY>$.pxFromCanvasTop&&f.offsetX<$.pxFromCanvasLeft+N.widthInPx&&f.offsetY<$.pxFromCanvasTop+N.lengthInPx){x=!0;break}}}x||s.showBothPanels()});const u=Js()||r;u.canvas&&(e.width=u.canvas.width,e.height=u.canvas.height),n.onSave(f=>{Gs(f),ke("Saved")}),n.setConfig(u);let d=[];function h(){const f=i.getSelectedIndices(),x=i.getDragPreview(),j=x&&f.size>0?f:void 0;o.render(d,j);const S=i.getSelectionBox();if(S&&o.renderSelectionBox(S.startX,S.startY,S.endX,S.endY),i.hasSelection()&&o.renderDebugHitboxes(d,f),x&&f.size>0)for(const _ of f){const T=d[_];if(!T)continue;const{positionOnCanvas:$}=T.config;$&&(o.renderOverlay((N,B)=>{B.save(),B.globalAlpha=.5,B.setTransform(1,0,0,1,$.pxFromCanvasLeft,$.pxFromCanvasTop),T.draw(N,B,!0),B.restore()}),o.renderOverlay((N,B)=>{B.save(),B.globalAlpha=1,B.setTransform(1,0,0,1,$.pxFromCanvasLeft+x.deltaX,$.pxFromCanvasTop+x.deltaY),T.draw(N,B,!0),B.restore()}))}}a(h,"frameUpdate");let y=0;function v(f){const x=(f-y)/1e3;y=f;let j=!1;if(window.gamepads=yn(),!window._gamepadDebugLogged){const _=window.gamepads;let T=0;for(let $=0;$<_.length;$++)_[$]&&T++;T>0&&(window._gamepadDebugLogged=!0)}const S=n.config;d=o.update(S,x),j=!0,i.update(d),b(),j&&h(),k.update(x),window.requestAnimationFrame(v)}a(v,"updateLoop"),window.requestAnimationFrame(v),h();function p(){e.width=window.innerWidth,e.height=window.innerHeight,h()}a(p,"resizeCanvas"),window.addEventListener("resize",p);const m=document.getElementById("deleteSelectedSnackbar");m&&(m.textContent=`PRESS ${Rt.toUpperCase()} TO DELETE SELECTED CANVAS OBJECTS`);function b(){m&&(i.hasSelection()?m.style.display="block":m.style.display="none")}a(b,"updateDeleteSnackbarVisibility"),document.addEventListener("keydown",f=>{if(f.key===Rt&&i.hasSelection()){f.preventDefault();const x=i.getSelectedIndices().size,j=x===1?"Delete this object?":`Delete ${x} objects?`;confirm(j)&&i.deleteSelectedObjects()}})},!1);const me="analogKeyboardOverlay_sceneConfig";function Gs(e){try{const t={version:"28b0dd1",...e};localStorage.setItem(me,JSON.stringify(t))}catch(t){console.error("[Config] Failed to save:",t)}}a(Gs,"saveSceneConfig");function Js(){try{const e=localStorage.getItem(me);if(!e)return null;const t=JSON.parse(e);if(t.version!=="28b0dd1")return console.warn(`[Config] Version mismatch: stored=${t.version}, current=28b0dd1. Clearing localStorage.`),localStorage.removeItem(me),ke("Config version changed - reset to defaults"),null;const n=Ls(me);return n.success?n.config:(console.error("[Config] Validation failed:",n.error),console.error("[Config] Raw data from localStorage:",e),null)}catch(e){return console.error("[Config] Failed to load:",e),null}}a(Js,"loadSceneConfig");function pn(e){const t=[{Text:Pe.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:20},hitboxSize:{widthInPx:600,lengthInPx:25},text:"This is a text box and the two joystick arrow keys, one has circle correction, check it out!",textStyle:{textAlign:"left",font:"15px Lucida Console"}})},{PlanarInputIndicator:ee.parse({positionOnCanvas:{pxFromCanvasLeft:120,pxFromCanvasTop:80}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:183,pxFromCanvasTop:80},input:{keyboard:{keyCode:"ArrowUp"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},processing:{radialCompensationAxis:0},display:{text:""}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:120,pxFromCanvasTop:155},input:{keyboard:{keyCode:"ArrowLeft"},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},processing:{radialCompensationAxis:1},display:{text:""}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:195,pxFromCanvasTop:155},input:{keyboard:{keyCode:"ArrowDown"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},processing:{radialCompensationAxis:0},display:{text:""}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:270,pxFromCanvasTop:155},input:{keyboard:{keyCode:"ArrowRight"},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},processing:{radialCompensationAxis:1},display:{text:""}})},{PlanarInputIndicator:ee.parse({positionOnCanvas:{pxFromCanvasLeft:470,pxFromCanvasTop:80}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:533,pxFromCanvasTop:80},input:{keyboard:{keyCode:"ArrowUp"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},display:{text:""}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:470,pxFromCanvasTop:155},input:{keyboard:{keyCode:"ArrowLeft"},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},display:{text:""}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:545,pxFromCanvasTop:155},input:{keyboard:{keyCode:"ArrowDown"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},display:{text:""}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:620,pxFromCanvasTop:155},input:{keyboard:{keyCode:"ArrowRight"},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},display:{text:""}})},{PlanarInputIndicator:ee.parse({positionOnCanvas:{pxFromCanvasLeft:860,pxFromCanvasTop:440}})},{WebEmbed:Ee.parse({positionOnCanvas:{pxFromCanvasLeft:1330,pxFromCanvasTop:300}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:740},input:{keyboard:{keyCode:"KeyW"}},display:{text:"Zip"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:105,pxFromCanvasTop:740},input:{keyboard:{keyCode:"KeyW"}},display:{text:"Crouch"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:190,pxFromCanvasTop:740},input:{keyboard:{keyCode:"KeyW"}},display:{text:"Dash"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:275,pxFromCanvasTop:740},input:{keyboard:{keyCode:"KeyW"}},display:{text:"Jump"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:360,pxFromCanvasTop:740},input:{keyboard:{keyCode:"KeyW"}},display:{text:"Melee"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:445,pxFromCanvasTop:740},input:{keyboard:{keyCode:"KeyW"}},display:{text:"Reload"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:105,pxFromCanvasTop:825},input:{keyboard:{keyCode:"KeyW"}},display:{text:"A1"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:190,pxFromCanvasTop:825},input:{keyboard:{keyCode:"KeyW"}},display:{text:"A2"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:275,pxFromCanvasTop:825},input:{keyboard:{keyCode:"KeyW"}},display:{text:"A3"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:360,pxFromCanvasTop:825},input:{keyboard:{keyCode:"KeyW"}},display:{text:"A4"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:105,pxFromCanvasTop:910},input:{keyboard:{keyCode:"KeyW"}},display:{text:"I1"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:190,pxFromCanvasTop:910},input:{keyboard:{keyCode:"KeyW"}},display:{text:"I2"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:275,pxFromCanvasTop:910},input:{keyboard:{keyCode:"KeyW"}},display:{text:"I3"}})},{LinearInputIndicator:E.parse({positionOnCanvas:{pxFromCanvasLeft:360,pxFromCanvasTop:910},input:{keyboard:{keyCode:"KeyW"}},display:{text:"I4"}})}];return{canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:t}}a(pn,"createDefaultConfig");function Hs(e,t,n){const o=new Me;function i(){n.setCreationPanelActive(!0),o.showCanvasConfig(t.config,e,f=>{t.setConfig(f)});const p=document.getElementById("leftPanel"),m=document.getElementById("rightPanel");p&&(p.hidden=!1),m&&(m.hidden=!1);const b=document.getElementById("containerForPossibleEditorWindows");b&&(b.hidden=!1),s(),n.setEditingProperties(!0)}a(i,"showBothPanels");function r(){try{o.hidePropertyEdit()}finally{n.setCreationPanelActive(!1),n.setEditingProperties(!1)}const p=document.getElementById("leftPanel"),m=document.getElementById("rightPanel");p&&(p.hidden=!0),m&&(m.hidden=!0);const b=document.getElementById("containerForPossibleEditorWindows");b&&(b.hidden=!0)}a(r,"hideBothPanels");function s(){const p=document.getElementById("objectCreationContent");p&&(p.innerHTML="",Object.entries(ie).forEach(([m,b])=>{const f=document.createElement("div");f.className="objectTypeSection";const x=document.createElement("p");x.className="sectionHeader",x.textContent=m,f.appendChild(x);const j=document.createElement("button");j.className="createObjectBtn ButtonWhichUserCanPressToUpdateState",j.setAttribute("data-type",m),j.textContent=`Create ${m}`,f.appendChild(j),p.appendChild(f)}))}a(s,"populateCreationPanel");function c(p){if(!(p in ie)){console.error("[Spawn] Unknown type:",p,"Available:",Object.keys(ie));return}const m=Ys[p];if(!m){console.error(`No schema found for ${p}`);return}const b=m.parse({}),f={[p]:b};t.addObject(f)}a(c,"createObject");function u(p){var f;const m=t.config;if(p<0||p>=m.objects.length)return;const b=m.objects[p];if(b)try{const x=Re(b,p);(f=x.cleanup)==null||f.call(x)}catch(x){console.error("[Delete] Failed to deserialize for cleanup:",x)}t.deleteObject(p)}a(u,"deleteObjectAtIndex");const d=document.getElementById("objectCreationContent");d&&d.addEventListener("click",p=>{const m=p.target;if(m.classList.contains("createObjectBtn")){const b=m.getAttribute("data-type");b&&(c(b),r())}});const h=document.getElementById("doneContainerForPossibleEditorWindows");h&&h.addEventListener("click",()=>{r()});const y=document.getElementById("toggleReadonlyModeButton");y&&window.electronAPI&&(y.style.display="flex",y.addEventListener("click",()=>{confirm(`Switch to readonly clickthrough mode?

You will need Task Manager to close the app.`)&&(n.setDisableInteractions(!0),window.electronAPI.toggleReadonlyMode(),ke("Readonly mode active - use Task Manager to close"),r())}));const v=document.getElementById("resetToDefaultConfigButton");return v&&v.addEventListener("click",()=>{if(!confirm(`Reset to default configuration?

This will replace your current config with the default layout.`))return;const m=pn(e);t.setConfig(m),ke("Reset to default config"),r()}),{propertyEditor:o,deleteObjectAtIndex:u,showBothPanels:i,hideBothPanels:r}}a(Hs,"createUIHelpers");
