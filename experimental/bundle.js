var cn=Object.defineProperty;var a=(e,t)=>cn(e,"name",{value:t,configurable:!0});a(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}a(n,"getFetchOpts");function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}a(o,"processPreload")},"polyfill")();const w={x:0,y:0,buttons:{0:!1,1:!1,2:!1,3:!1,4:!1},clicks:{0:!1,1:!1,2:!1,3:!1,4:!1},wheelDelta:{x:0,y:0},wheelEvents:{up:!1,down:!1},update(e){this.wheelDelta.x*=.7*e,this.wheelDelta.y*=.7*e,this.clicks[0]=!1,this.clicks[1]=!1,this.clicks[2]=!1,this.clicks[3]=!1,this.clicks[4]=!1,this.wheelEvents.up=!1,this.wheelEvents.down=!1}},re=document.getElementById("canvas");re.addEventListener("mousedown",e=>{w.x=e.x,w.y=e.y;const t=e.button;w.buttons[t]===!1&&(w.buttons[t]=!0,w.clicks[t]=!0)});re.addEventListener("mouseup",e=>{w.x=e.x,w.y=e.y;const t=e.button;w.buttons[t]===!0&&(w.buttons[t]=!1)});re.addEventListener("mousemove",e=>{w.x=e.x,w.y=e.y});re.addEventListener("wheel",e=>{w.wheelDelta.x=e.deltaX,w.wheelDelta.y=e.deltaY,e.deltaY<0?w.wheelEvents.up=!0:e.deltaY>0&&(w.wheelEvents.down=!0)});re.addEventListener("contextmenu",e=>{e.preventDefault()});const ne={};document.addEventListener("keydown",function(e){ne[e.code]!==!0&&(ne[e.code]=!0)});document.addEventListener("keyup",function(e){ne[e.code]===!0&&(ne[e.code]=!1)});const lt={30:"KeyA",48:"KeyB",46:"KeyC",32:"KeyD",18:"KeyE",33:"KeyF",34:"KeyG",35:"KeyH",23:"KeyI",36:"KeyJ",37:"KeyK",38:"KeyL",50:"KeyM",49:"KeyN",24:"KeyO",25:"KeyP",16:"KeyQ",19:"KeyR",31:"KeyS",20:"KeyT",22:"KeyU",47:"KeyV",17:"KeyW",45:"KeyX",21:"KeyY",44:"KeyZ",2:"Digit1",3:"Digit2",4:"Digit3",5:"Digit4",6:"Digit5",7:"Digit6",8:"Digit7",9:"Digit8",10:"Digit9",11:"Digit0",57:"Space",28:"Enter",1:"Escape",14:"Backspace",15:"Tab",42:"ShiftLeft",54:"ShiftRight",29:"ControlLeft",97:"ControlRight",56:"AltLeft",100:"AltRight",103:"ArrowUp",108:"ArrowDown",105:"ArrowLeft",106:"ArrowRight",57416:"ArrowUp",57424:"ArrowDown",57419:"ArrowLeft",57421:"ArrowRight"};let fe=null;const un=navigator.getGamepads.bind(navigator);navigator.getGamepads=function(){return fe&&fe.connected?[fe,null,null,null]:un()};function ln(){window.electronAPI&&(window.electronAPI.onGlobalKeyDown(e=>{const t=lt[e.keycode];t&&document.dispatchEvent(new KeyboardEvent("keydown",{code:t,bubbles:!0,cancelable:!0}))}),window.electronAPI.onGlobalKeyUp(e=>{const t=lt[e.keycode];t&&document.dispatchEvent(new KeyboardEvent("keyup",{code:t,bubbles:!0,cancelable:!0}))}),window.electronAPI.onGlobalGamepadState(e=>{fe={axes:e.axes,buttons:e.buttons,connected:e.connected,timestamp:e.timestamp,id:"SDL2 Gamepad (sdl2-gamecontroller)",index:0,mapping:"standard"}}),window.electronAPI.onGlobalMouseDown(e=>{const n={1:0,3:1,2:2,4:3,5:4}[e.button];n!==void 0&&window.mouse&&window.mouse.buttons&&window.mouse.buttons[n]===!1&&(window.mouse.buttons[n]=!0,window.mouse.clicks[n]=!0)}),window.electronAPI.onGlobalMouseUp(e=>{const n={1:0,3:1,2:2,4:3,5:4}[e.button];n!==void 0&&window.mouse&&window.mouse.buttons&&window.mouse.buttons[n]===!0&&(window.mouse.buttons[n]=!1)}),window.electronAPI.onGlobalMouseMove(e=>{window.mouse&&(window.mouse.x=e.x,window.mouse.y=e.y)}),window.electronAPI.onGlobalWheel(e=>{window.mouse&&window.mouse.wheelDelta&&(window.mouse.wheelDelta.y=-e.rotation),window.mouse&&window.mouse.wheelEvents&&(e.rotation<0?window.mouse.wheelEvents.up=!0:e.rotation>0&&(window.mouse.wheelEvents.down=!0))}))}a(ln,"initializeElectronBridges");ln();const He=class He{constructor(t){this.objArrayIdx=t}};a(He,"CanvasObjectInstance");let K=He;function Q(e,t){t.lineWidth!==void 0&&(e.lineWidth=t.lineWidth),t.strokeStyle!==void 0&&(e.strokeStyle=t.strokeStyle),t.fillStyle!==void 0&&(e.fillStyle=t.fillStyle),t.lineCap!==void 0&&(e.lineCap=t.lineCap),t.textAlign!==void 0&&(e.textAlign=t.textAlign),t.font!==void 0&&(e.font=t.font)}a(Q,"canvas_properties");function dt(e,t,n,o,i,r){r!==void 0&&Q(e,r);const s=10,u=Math.atan2(i-n,o-t);e.moveTo(t,n),e.lineTo(o,i),e.moveTo(o,i),e.lineTo(o-s*Math.cos(u-Math.PI/6),i-s*Math.sin(u-Math.PI/6)),e.moveTo(o,i),e.lineTo(o-s*Math.cos(u+Math.PI/6),i-s*Math.sin(u+Math.PI/6))}a(dt,"canvas_arrow");function ht(e,t,n,o,i,r){r!==void 0&&Q(e,r),e.moveTo(t,n),e.lineTo(o,i)}a(ht,"canvas_line");function ze(e,t,n,o,i,r,s){s!==void 0&&Q(e,s),e.arc(t,n,o,i,r)}a(ze,"canvas_arc");function Ft(e,t,n,o,i){i!==void 0&&Q(e,i),e.fillText(o,t,n)}a(Ft,"canvas_text");function l(e,t,n){function o(c,d){var h;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(h=c._zod).traits??(h.traits=new Set),c._zod.traits.add(e),t(c,d);for(const f in s.prototype)f in c||Object.defineProperty(c,f,{value:s.prototype[f].bind(c)});c._zod.constr=s,c._zod.def=d}a(o,"init");const i=(n==null?void 0:n.Parent)??Object,u=class u extends i{};a(u,"Definition");let r=u;Object.defineProperty(r,"name",{value:e});function s(c){var d;const h=n!=null&&n.Parent?new r:this;o(h,c),(d=h._zod).deferred??(d.deferred=[]);for(const f of h._zod.deferred)f();return h}return a(s,"_"),Object.defineProperty(s,"init",{value:o}),Object.defineProperty(s,Symbol.hasInstance,{value:a(c=>{var d,h;return n!=null&&n.Parent&&c instanceof n.Parent?!0:(h=(d=c==null?void 0:c._zod)==null?void 0:d.traits)==null?void 0:h.has(e)},"value")}),Object.defineProperty(s,"name",{value:e}),s}a(l,"$constructor");const qe=class qe extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};a(qe,"$ZodAsyncError");let R=qe;const Qe=class Qe extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}};a(Qe,"$ZodEncodeError");let me=Qe;const jt={};function M(e){return jt}a(M,"config");function dn(e){const t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,i])=>t.indexOf(+o)===-1).map(([o,i])=>i)}a(dn,"getEnumValues");function Pe(e,t){return typeof t=="bigint"?t.toString():t}a(Pe,"jsonStringifyReplacer");function Be(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}a(Be,"cached");function Ue(e){return e==null}a(Ue,"nullish");function We(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}a(We,"cleanRegex");function hn(e,t){const n=(e.toString().split(".")[1]||"").length,o=t.toString();let i=(o.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(o)){const c=o.match(/\d?e-(\d?)/);c!=null&&c[1]&&(i=Number.parseInt(c[1]))}const r=n>i?n:i,s=Number.parseInt(e.toFixed(r).replace(".","")),u=Number.parseInt(t.toFixed(r).replace(".",""));return s%u/10**r}a(hn,"floatSafeRemainder");const ft=Symbol("evaluating");function C(e,t,n){let o;Object.defineProperty(e,t,{get(){if(o!==ft)return o===void 0&&(o=ft,o=n()),o},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}a(C,"defineLazy");function V(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}a(V,"assignProp");function G(...e){const t={};for(const n of e){const o=Object.getOwnPropertyDescriptors(n);Object.assign(t,o)}return Object.defineProperties({},t)}a(G,"mergeDefs");function pt(e){return JSON.stringify(e)}a(pt,"esc");const Lt="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ge(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}a(ge,"isObject");const fn=Be(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function q(e){if(ge(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(ge(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}a(q,"isPlainObject");function Dt(e){return q(e)?{...e}:Array.isArray(e)?[...e]:e}a(Dt,"shallowClone");const pn=new Set(["string","number","symbol"]);function be(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(be,"escapeRegex");function U(e,t,n){const o=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(o._zod.parent=e),o}a(U,"clone");function m(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:a(()=>t,"error")};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:a(()=>t.error,"error")}:t}a(m,"normalizeParams");function mn(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}a(mn,"optionalKeys");const gn={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function yn(e,t){const n=e._zod.def,o=G(e._zod.def,{get shape(){const i={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(i[r]=n.shape[r])}return V(this,"shape",i),i},checks:[]});return U(e,o)}a(yn,"pick");function vn(e,t){const n=e._zod.def,o=G(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete i[r]}return V(this,"shape",i),i},checks:[]});return U(e,o)}a(vn,"omit");function bn(e,t){if(!q(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=G(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return V(this,"shape",r),r},checks:[]});return U(e,i)}a(bn,"extend");function wn(e,t){if(!q(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const o={...e._zod.def.shape,...t};return V(this,"shape",o),o},checks:e._zod.def.checks};return U(e,n)}a(wn,"safeExtend");function xn(e,t){const n=G(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t._zod.def.shape};return V(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return U(e,n)}a(xn,"merge");function _n(e,t,n){const o=G(t._zod.def,{get shape(){const i=t._zod.def.shape,r={...i};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=e?new e({type:"optional",innerType:i[s]}):i[s])}else for(const s in i)r[s]=e?new e({type:"optional",innerType:i[s]}):i[s];return V(this,"shape",r),r},checks:[]});return U(t,o)}a(_n,"partial");function kn(e,t,n){const o=G(t._zod.def,{get shape(){const i=t._zod.def.shape,r={...i};if(n)for(const s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=new e({type:"nonoptional",innerType:i[s]}))}else for(const s in i)r[s]=new e({type:"nonoptional",innerType:i[s]});return V(this,"shape",r),r},checks:[]});return U(t,o)}a(kn,"required");function J(e,t=0){var n;if(e.aborted===!0)return!0;for(let o=t;o<e.issues.length;o++)if(((n=e.issues[o])==null?void 0:n.continue)!==!0)return!0;return!1}a(J,"aborted");function X(e,t){return t.map(n=>{var o;return(o=n).path??(o.path=[]),n.path.unshift(e),n})}a(X,"prefixIssues");function ue(e){return typeof e=="string"?e:e==null?void 0:e.message}a(ue,"unwrapMessage");function B(e,t,n){var i,r,s,u,c,d;const o={...e,path:e.path??[]};if(!e.message){const h=ue((s=(r=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:r.error)==null?void 0:s.call(r,e))??ue((u=t==null?void 0:t.error)==null?void 0:u.call(t,e))??ue((c=n.customError)==null?void 0:c.call(n,e))??ue((d=n.localeError)==null?void 0:d.call(n,e))??"Invalid input";o.message=h}return delete o.inst,delete o.continue,t!=null&&t.reportInput||delete o.input,o}a(B,"finalizeIssue");function Ke(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}a(Ke,"getLengthableOrigin");function oe(...e){const[t,n,o]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:o}:{...t}}a(oe,"issue");const Nt=a((e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Pe,2),Object.defineProperty(e,"toString",{value:a(()=>e.message,"value"),enumerable:!1})},"initializer$1"),Rt=l("$ZodError",Nt),Mt=l("$ZodError",Nt,{Parent:Error});function zn(e,t=n=>n.message){const n={},o=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):o.push(t(i));return{formErrors:o,fieldErrors:n}}a(zn,"flattenError");function Cn(e,t=n=>n.message){const n={_errors:[]},o=a(i=>{for(const r of i.issues)if(r.code==="invalid_union"&&r.errors.length)r.errors.map(s=>o({issues:s}));else if(r.code==="invalid_key")o({issues:r.issues});else if(r.code==="invalid_element")o({issues:r.issues});else if(r.path.length===0)n._errors.push(t(r));else{let s=n,u=0;for(;u<r.path.length;){const c=r.path[u];u===r.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(t(r))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}},"processError");return o(e),n}a(Cn,"formatError");const Ve=a(e=>(t,n,o,i)=>{const r=o?Object.assign(o,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise)throw new R;if(s.issues.length){const u=new((i==null?void 0:i.Err)??e)(s.issues.map(c=>B(c,r,M())));throw Lt(u,i==null?void 0:i.callee),u}return s.value},"_parse"),Ge=a(e=>async(t,n,o,i)=>{const r=o?Object.assign(o,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise&&(s=await s),s.issues.length){const u=new((i==null?void 0:i.Err)??e)(s.issues.map(c=>B(c,r,M())));throw Lt(u,i==null?void 0:i.callee),u}return s.value},"_parseAsync"),we=a(e=>(t,n,o)=>{const i=o?{...o,async:!1}:{async:!1},r=t._zod.run({value:n,issues:[]},i);if(r instanceof Promise)throw new R;return r.issues.length?{success:!1,error:new(e??Rt)(r.issues.map(s=>B(s,i,M())))}:{success:!0,data:r.value}},"_safeParse"),Sn=we(Mt),xe=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},i);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new e(r.issues.map(s=>B(s,i,M())))}:{success:!0,data:r.value}},"_safeParseAsync"),In=xe(Mt),Pn=a(e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ve(e)(t,n,i)},"_encode"),On=a(e=>(t,n,o)=>Ve(e)(t,n,o),"_decode"),En=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ge(e)(t,n,i)},"_encodeAsync"),An=a(e=>async(t,n,o)=>Ge(e)(t,n,o),"_decodeAsync"),Zn=a(e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return we(e)(t,n,i)},"_safeEncode"),$n=a(e=>(t,n,o)=>we(e)(t,n,o),"_safeDecode"),Tn=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return xe(e)(t,n,i)},"_safeEncodeAsync"),Fn=a(e=>async(t,n,o)=>xe(e)(t,n,o),"_safeDecodeAsync"),jn=/^[cC][^\s-]{8,}$/,Ln=/^[0-9a-z]+$/,Dn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Nn=/^[0-9a-vA-V]{20}$/,Rn=/^[A-Za-z0-9]{27}$/,Mn=/^[a-zA-Z0-9_-]{21}$/,Bn=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Un=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,mt=a(e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),Wn=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Kn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Vn(){return new RegExp(Kn,"u")}a(Vn,"emoji");const Gn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Yn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Jn=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Xn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Hn=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Bt=/^[A-Za-z0-9_-]*$/,qn=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Qn=/^\+(?:[0-9]){6,14}[0-9]$/,Ut="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",eo=new RegExp(`^${Ut}$`);function Wt(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}a(Wt,"timeSource");function to(e){return new RegExp(`^${Wt(e)}$`)}a(to,"time$1");function no(e){const t=Wt({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${t}(?:${n.join("|")})`;return new RegExp(`^${Ut}T(?:${o})$`)}a(no,"datetime$1");const oo=a(e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},"string$1"),io=/^-?\d+$/,ro=/^-?\d+(?:\.\d+)?/,so=/^(?:true|false)$/i,ao=/^[^A-Z]*$/,co=/^[^a-z]*$/,F=l("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Kt={number:"number",bigint:"bigint",object:"date"},Vt=l("$ZodCheckLessThan",(e,t)=>{F.init(e,t);const n=Kt[typeof t.value];e._zod.onattach.push(o=>{const i=o._zod.bag,r=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:n,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Gt=l("$ZodCheckGreaterThan",(e,t)=>{F.init(e,t);const n=Kt[typeof t.value];e._zod.onattach.push(o=>{const i=o._zod.bag,r=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:n,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),uo=l("$ZodCheckMultipleOf",(e,t)=>{F.init(e,t),e._zod.onattach.push(n=>{var o;(o=n._zod.bag).multipleOf??(o.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):hn(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),lo=l("$ZodCheckNumberFormat",(e,t)=>{var s;F.init(e,t),t.format=t.format||"float64";const n=(s=t.format)==null?void 0:s.includes("int"),o=n?"int":"number",[i,r]=gn[t.format];e._zod.onattach.push(u=>{const c=u._zod.bag;c.format=t.format,c.minimum=i,c.maximum=r,n&&(c.pattern=io)}),e._zod.check=u=>{const c=u.value;if(n){if(!Number.isInteger(c)){u.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?u.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):u.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}c<i&&u.issues.push({origin:"number",input:c,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),c>r&&u.issues.push({origin:"number",input:c,code:"too_big",maximum:r,inst:e})}}),ho=l("$ZodCheckMaxLength",(e,t)=>{var n;F.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Ue(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{const i=o.value;if(i.length<=t.maximum)return;const s=Ke(i);o.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),fo=l("$ZodCheckMinLength",(e,t)=>{var n;F.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Ue(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{const i=o.value;if(i.length>=t.minimum)return;const s=Ke(i);o.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),po=l("$ZodCheckLengthEquals",(e,t)=>{var n;F.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!Ue(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=o=>{const i=o.value,r=i.length;if(r===t.length)return;const s=Ke(i),u=r>t.length;o.issues.push({origin:s,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),_e=l("$ZodCheckStringFormat",(e,t)=>{var n,o;F.init(e,t),e._zod.onattach.push(i=>{const r=i._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),mo=l("$ZodCheckRegex",(e,t)=>{_e.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),go=l("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ao),_e.init(e,t)}),yo=l("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=co),_e.init(e,t)}),vo=l("$ZodCheckIncludes",(e,t)=>{F.init(e,t);const n=be(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=o,e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(o)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),bo=l("$ZodCheckStartsWith",(e,t)=>{F.init(e,t);const n=new RegExp(`^${be(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),wo=l("$ZodCheckEndsWith",(e,t)=>{F.init(e,t);const n=new RegExp(`.*${be(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}}),xo=l("$ZodCheckOverwrite",(e,t)=>{F.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}}),et=class et{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const o=t.split(`
`).filter(s=>s),i=Math.min(...o.map(s=>s.length-s.trimStart().length)),r=o.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of r)this.content.push(s)}compile(){const t=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(r=>`  ${r}`)];return new t(...n,i.join(`
`))}};a(et,"Doc");let Oe=et;const _o={major:4,minor:1,patch:12},E=l("$ZodType",(e,t)=>{var i;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=_o;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const r of o)for(const s of r._zod.onattach)s(e);if(o.length===0)(n=e._zod).deferred??(n.deferred=[]),(i=e._zod.deferred)==null||i.push(()=>{e._zod.run=e._zod.parse});else{const r=a((u,c,d)=>{let h=J(u),f;for(const g of c){if(g._zod.def.when){if(!g._zod.def.when(u))continue}else if(h)continue;const v=u.issues.length,p=g._zod.check(u);if(p instanceof Promise&&(d==null?void 0:d.async)===!1)throw new R;if(f||p instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await p,u.issues.length!==v&&(h||(h=J(u,v)))});else{if(u.issues.length===v)continue;h||(h=J(u,v))}}return f?f.then(()=>u):u},"runChecks"),s=a((u,c,d)=>{if(J(u))return u.aborted=!0,u;const h=r(c,o,d);if(h instanceof Promise){if(d.async===!1)throw new R;return h.then(f=>e._zod.parse(f,d))}return e._zod.parse(h,d)},"handleCanaryResult");e._zod.run=(u,c)=>{if(c.skipChecks)return e._zod.parse(u,c);if(c.direction==="backward"){const h=e._zod.parse({value:u.value,issues:[]},{...c,skipChecks:!0});return h instanceof Promise?h.then(f=>s(f,u,c)):s(h,u,c)}const d=e._zod.parse(u,c);if(d instanceof Promise){if(c.async===!1)throw new R;return d.then(h=>r(h,o,c))}return r(d,o,c)}}e["~standard"]={validate:a(r=>{var s;try{const u=Sn(e,r);return u.success?{value:u.data}:{issues:(s=u.error)==null?void 0:s.issues}}catch{return In(e,r).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},"validate"),vendor:"zod",version:1}}),Ye=l("$ZodString",(e,t)=>{var n;E.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??oo(e._zod.bag),e._zod.parse=(o,i)=>{if(t.coerce)try{o.value=String(o.value)}catch{}return typeof o.value=="string"||o.issues.push({expected:"string",code:"invalid_type",input:o.value,inst:e}),o}}),P=l("$ZodStringFormat",(e,t)=>{_e.init(e,t),Ye.init(e,t)}),ko=l("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Un),P.init(e,t)}),zo=l("$ZodUUID",(e,t)=>{if(t.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=mt(o))}else t.pattern??(t.pattern=mt());P.init(e,t)}),Co=l("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Wn),P.init(e,t)}),So=l("$ZodURL",(e,t)=>{P.init(e,t),e._zod.check=n=>{try{const o=n.value.trim(),i=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:qn.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Io=l("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Vn()),P.init(e,t)}),Po=l("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Mn),P.init(e,t)}),Oo=l("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=jn),P.init(e,t)}),Eo=l("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Ln),P.init(e,t)}),Ao=l("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Dn),P.init(e,t)}),Zo=l("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Nn),P.init(e,t)}),$o=l("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Rn),P.init(e,t)}),To=l("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=no(t)),P.init(e,t)}),Fo=l("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=eo),P.init(e,t)}),jo=l("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=to(t)),P.init(e,t)}),Lo=l("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Bn),P.init(e,t)}),Do=l("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Gn),P.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv4"})}),No=l("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Yn),P.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Ro=l("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Jn),P.init(e,t)}),Mo=l("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Xn),P.init(e,t),e._zod.check=n=>{const o=n.value.split("/");try{if(o.length!==2)throw new Error;const[i,r]=o;if(!r)throw new Error;const s=Number(r);if(`${s}`!==r)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Yt(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}a(Yt,"isValidBase64");const Bo=l("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Hn),P.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Yt(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Uo(e){if(!Bt.test(e))return!1;const t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Yt(n)}a(Uo,"isValidBase64URL");const Wo=l("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Bt),P.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{Uo(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Ko=l("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Qn),P.init(e,t)});function Vo(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[o]=n;if(!o)return!1;const i=JSON.parse(atob(o));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}a(Vo,"isValidJWT");const Go=l("$ZodJWT",(e,t)=>{P.init(e,t),e._zod.check=n=>{Vo(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Jt=l("$ZodNumber",(e,t)=>{E.init(e,t),e._zod.pattern=e._zod.bag.pattern??ro,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const r=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...r?{received:r}:{}}),n}}),Yo=l("$ZodNumber",(e,t)=>{lo.init(e,t),Jt.init(e,t)}),Jo=l("$ZodBoolean",(e,t)=>{E.init(e,t),e._zod.pattern=so,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),Xo=l("$ZodUnknown",(e,t)=>{E.init(e,t),e._zod.parse=n=>n}),Ho=l("$ZodNever",(e,t)=>{E.init(e,t),e._zod.parse=(n,o)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function gt(e,t,n){e.issues.length&&t.issues.push(...X(n,e.issues)),t.value[n]=e.value}a(gt,"handleArrayResult");const qo=l("$ZodArray",(e,t)=>{E.init(e,t),e._zod.parse=(n,o)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const r=[];for(let s=0;s<i.length;s++){const u=i[s],c=t.element._zod.run({value:u,issues:[]},o);c instanceof Promise?r.push(c.then(d=>gt(d,n,s))):gt(c,n,s)}return r.length?Promise.all(r).then(()=>n):n}});function ye(e,t,n,o){e.issues.length&&t.issues.push(...X(n,e.issues)),e.value===void 0?n in o&&(t.value[n]=void 0):t.value[n]=e.value}a(ye,"handlePropertyResult");function Xt(e){var o,i,r,s;const t=Object.keys(e.shape);for(const u of t)if(!((s=(r=(i=(o=e.shape)==null?void 0:o[u])==null?void 0:i._zod)==null?void 0:r.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=mn(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}a(Xt,"normalizeDef");function Ht(e,t,n,o,i,r){const s=[],u=i.keySet,c=i.catchall._zod,d=c.def.type;for(const h of Object.keys(t)){if(u.has(h))continue;if(d==="never"){s.push(h);continue}const f=c.run({value:t[h],issues:[]},o);f instanceof Promise?e.push(f.then(g=>ye(g,n,h,t))):ye(f,n,h,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:r}),e.length?Promise.all(e).then(()=>n):n}a(Ht,"handleCatchall");const Qo=l("$ZodObject",(e,t)=>{E.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const u=t.shape;Object.defineProperty(t,"shape",{get:a(()=>{const c={...u};return Object.defineProperty(t,"shape",{value:c}),c},"get")})}const o=Be(()=>Xt(t));C(e._zod,"propValues",()=>{const u=t.shape,c={};for(const d in u){const h=u[d]._zod;if(h.values){c[d]??(c[d]=new Set);for(const f of h.values)c[d].add(f)}}return c});const i=ge,r=t.catchall;let s;e._zod.parse=(u,c)=>{s??(s=o.value);const d=u.value;if(!i(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),u;u.value={};const h=[],f=s.shape;for(const g of s.keys){const p=f[g]._zod.run({value:d[g],issues:[]},c);p instanceof Promise?h.push(p.then(y=>ye(y,u,g,d))):ye(p,u,g,d)}return r?Ht(h,d,u,c,o.value,e):h.length?Promise.all(h).then(()=>u):u}}),ei=l("$ZodObjectJIT",(e,t)=>{Qo.init(e,t);const n=e._zod.parse,o=Be(()=>Xt(t)),i=a(g=>{const v=new Oe(["shape","payload","ctx"]),p=o.value,y=a($=>{const _=pt($);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`},"parseStr");v.write("const input = payload.value;");const b=Object.create(null);let T=0;for(const $ of p.keys)b[$]=`key_${T++}`;v.write("const newResult = {};");for(const $ of p.keys){const _=b[$],j=pt($);v.write(`const ${_} = ${y($)};`),v.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        
        if (${_}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${_}.value;
        }
        
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const S=v.compile();return($,_)=>S(g,$,_)},"generateFastpass");let r;const s=ge,u=!jt.jitless,d=u&&fn.value,h=t.catchall;let f;e._zod.parse=(g,v)=>{f??(f=o.value);const p=g.value;return s(p)?u&&d&&(v==null?void 0:v.async)===!1&&v.jitless!==!0?(r||(r=i(t.shape)),g=r(g,v),h?Ht([],p,g,v,f,e):g):n(g,v):(g.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),g)}});function yt(e,t,n,o){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;const i=e.filter(r=>!J(r));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(s=>B(s,o,M())))}),t)}a(yt,"handleUnionResults");const ti=l("$ZodUnion",(e,t)=>{E.init(e,t),C(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),C(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),C(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),C(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){const i=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${i.map(r=>We(r.source)).join("|")})$`)}});const n=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(i,r)=>{if(n)return o(i,r);let s=!1;const u=[];for(const c of t.options){const d=c._zod.run({value:i.value,issues:[]},r);if(d instanceof Promise)u.push(d),s=!0;else{if(d.issues.length===0)return d;u.push(d)}}return s?Promise.all(u).then(c=>yt(c,i,e,r)):yt(u,i,e,r)}}),ni=l("$ZodIntersection",(e,t)=>{E.init(e,t),e._zod.parse=(n,o)=>{const i=n.value,r=t.left._zod.run({value:i,issues:[]},o),s=t.right._zod.run({value:i,issues:[]},o);return r instanceof Promise||s instanceof Promise?Promise.all([r,s]).then(([c,d])=>vt(n,c,d)):vt(n,r,s)}});function Ee(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(q(e)&&q(t)){const n=Object.keys(t),o=Object.keys(e).filter(r=>n.indexOf(r)!==-1),i={...e,...t};for(const r of o){const s=Ee(e[r],t[r]);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};i[r]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let o=0;o<e.length;o++){const i=e[o],r=t[o],s=Ee(i,r);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}a(Ee,"mergeValues");function vt(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),J(e))return e;const o=Ee(t.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}a(vt,"handleIntersectionResults");const oi=l("$ZodRecord",(e,t)=>{E.init(e,t),e._zod.parse=(n,o)=>{const i=n.value;if(!q(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),n;const r=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const c of s)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const d=t.valueType._zod.run({value:i[c],issues:[]},o);d instanceof Promise?r.push(d.then(h=>{h.issues.length&&n.issues.push(...X(c,h.issues)),n.value[c]=h.value})):(d.issues.length&&n.issues.push(...X(c,d.issues)),n.value[c]=d.value)}let u;for(const c in i)s.has(c)||(u=u??[],u.push(c));u&&u.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:u})}else{n.value={};for(const s of Reflect.ownKeys(i)){if(s==="__proto__")continue;const u=t.keyType._zod.run({value:s,issues:[]},o);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(u.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:u.issues.map(d=>B(d,o,M())),input:s,path:[s],inst:e}),n.value[u.value]=u.value;continue}const c=t.valueType._zod.run({value:i[s],issues:[]},o);c instanceof Promise?r.push(c.then(d=>{d.issues.length&&n.issues.push(...X(s,d.issues)),n.value[u.value]=d.value})):(c.issues.length&&n.issues.push(...X(s,c.issues)),n.value[u.value]=c.value)}}return r.length?Promise.all(r).then(()=>n):n}}),ii=l("$ZodEnum",(e,t)=>{E.init(e,t);const n=dn(t.entries),o=new Set(n);e._zod.values=o,e._zod.pattern=new RegExp(`^(${n.filter(i=>pn.has(typeof i)).map(i=>typeof i=="string"?be(i):i.toString()).join("|")})$`),e._zod.parse=(i,r)=>{const s=i.value;return o.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:e}),i}}),ri=l("$ZodTransform",(e,t)=>{E.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new me(e.constructor.name);const i=t.transform(n.value,n);if(o.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new R;return n.value=i,n}});function bt(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}a(bt,"handleOptionalResult");const si=l("$ZodOptional",(e,t)=>{E.init(e,t),e._zod.optin="optional",e._zod.optout="optional",C(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),C(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${We(n.source)})?$`):void 0}),e._zod.parse=(n,o)=>{if(t.innerType._zod.optin==="optional"){const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>bt(r,n.value)):bt(i,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,o)}}),ai=l("$ZodNullable",(e,t)=>{E.init(e,t),C(e._zod,"optin",()=>t.innerType._zod.optin),C(e._zod,"optout",()=>t.innerType._zod.optout),C(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${We(n.source)}|null)$`):void 0}),C(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,o)=>n.value===null?n:t.innerType._zod.run(n,o)}),ci=l("$ZodDefault",(e,t)=>{E.init(e,t),e._zod.optin="optional",C(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>wt(r,t)):wt(i,t)}});function wt(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}a(wt,"handleDefaultResult");const ui=l("$ZodPrefault",(e,t)=>{E.init(e,t),e._zod.optin="optional",C(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>(o.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,o))}),li=l("$ZodNonOptional",(e,t)=>{E.init(e,t),C(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(o=>o!==void 0)):void 0}),e._zod.parse=(n,o)=>{const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>xt(r,e)):xt(i,e)}});function xt(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}a(xt,"handleNonOptionalResult");const di=l("$ZodCatch",(e,t)=>{E.init(e,t),C(e._zod,"optin",()=>t.innerType._zod.optin),C(e._zod,"optout",()=>t.innerType._zod.optout),C(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(s=>B(s,o,M()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(r=>B(r,o,M()))},input:n.value}),n.issues=[]),n)}}),hi=l("$ZodPipe",(e,t)=>{E.init(e,t),C(e._zod,"values",()=>t.in._zod.values),C(e._zod,"optin",()=>t.in._zod.optin),C(e._zod,"optout",()=>t.out._zod.optout),C(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,o)=>{if(o.direction==="backward"){const r=t.out._zod.run(n,o);return r instanceof Promise?r.then(s=>le(s,t.in,o)):le(r,t.in,o)}const i=t.in._zod.run(n,o);return i instanceof Promise?i.then(r=>le(r,t.out,o)):le(i,t.out,o)}});function le(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}a(le,"handlePipeResult");const fi=l("$ZodReadonly",(e,t)=>{E.init(e,t),C(e._zod,"propValues",()=>t.innerType._zod.propValues),C(e._zod,"values",()=>t.innerType._zod.values),C(e._zod,"optin",()=>t.innerType._zod.optin),C(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(_t):_t(i)}});function _t(e){return e.value=Object.freeze(e.value),e}a(_t,"handleReadonlyResult");const pi=l("$ZodCustom",(e,t)=>{F.init(e,t),E.init(e,t),e._zod.parse=(n,o)=>n,e._zod.check=n=>{const o=n.value,i=t.fn(o);if(i instanceof Promise)return i.then(r=>kt(r,n,o,e));kt(i,n,o,e)}});function kt(e,t,n,o){if(!e){const i={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(i.params=o._zod.def.params),t.issues.push(oe(i))}}a(kt,"handleRefineResult");const tt=class tt{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const o=n[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const o={...this.get(n)??{}};delete o.id;const i={...o,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};a(tt,"$ZodRegistry");let Ae=tt;function mi(){return new Ae}a(mi,"registry");const de=mi();function gi(e,t){return new e({type:"string",...m(t)})}a(gi,"_string");function yi(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...m(t)})}a(yi,"_email");function zt(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...m(t)})}a(zt,"_guid");function vi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...m(t)})}a(vi,"_uuid");function bi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...m(t)})}a(bi,"_uuidv4");function wi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...m(t)})}a(wi,"_uuidv6");function xi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...m(t)})}a(xi,"_uuidv7");function _i(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...m(t)})}a(_i,"_url");function ki(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...m(t)})}a(ki,"_emoji");function zi(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...m(t)})}a(zi,"_nanoid");function Ci(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...m(t)})}a(Ci,"_cuid");function Si(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...m(t)})}a(Si,"_cuid2");function Ii(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...m(t)})}a(Ii,"_ulid");function Pi(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...m(t)})}a(Pi,"_xid");function Oi(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...m(t)})}a(Oi,"_ksuid");function Ei(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...m(t)})}a(Ei,"_ipv4");function Ai(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...m(t)})}a(Ai,"_ipv6");function Zi(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...m(t)})}a(Zi,"_cidrv4");function $i(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...m(t)})}a($i,"_cidrv6");function Ti(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...m(t)})}a(Ti,"_base64");function Fi(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...m(t)})}a(Fi,"_base64url");function ji(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...m(t)})}a(ji,"_e164");function Li(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...m(t)})}a(Li,"_jwt");function Di(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...m(t)})}a(Di,"_isoDateTime");function Ni(e,t){return new e({type:"string",format:"date",check:"string_format",...m(t)})}a(Ni,"_isoDate");function Ri(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...m(t)})}a(Ri,"_isoTime");function Mi(e,t){return new e({type:"string",format:"duration",check:"string_format",...m(t)})}a(Mi,"_isoDuration");function Bi(e,t){return new e({type:"number",checks:[],...m(t)})}a(Bi,"_number");function Ui(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...m(t)})}a(Ui,"_int");function Wi(e,t){return new e({type:"boolean",...m(t)})}a(Wi,"_boolean");function Ki(e){return new e({type:"unknown"})}a(Ki,"_unknown");function Vi(e,t){return new e({type:"never",...m(t)})}a(Vi,"_never");function Ct(e,t){return new Vt({check:"less_than",...m(t),value:e,inclusive:!1})}a(Ct,"_lt");function Ce(e,t){return new Vt({check:"less_than",...m(t),value:e,inclusive:!0})}a(Ce,"_lte");function St(e,t){return new Gt({check:"greater_than",...m(t),value:e,inclusive:!1})}a(St,"_gt");function Se(e,t){return new Gt({check:"greater_than",...m(t),value:e,inclusive:!0})}a(Se,"_gte");function It(e,t){return new uo({check:"multiple_of",...m(t),value:e})}a(It,"_multipleOf");function qt(e,t){return new ho({check:"max_length",...m(t),maximum:e})}a(qt,"_maxLength");function ve(e,t){return new fo({check:"min_length",...m(t),minimum:e})}a(ve,"_minLength");function Qt(e,t){return new po({check:"length_equals",...m(t),length:e})}a(Qt,"_length");function Gi(e,t){return new mo({check:"string_format",format:"regex",...m(t),pattern:e})}a(Gi,"_regex");function Yi(e){return new go({check:"string_format",format:"lowercase",...m(e)})}a(Yi,"_lowercase");function Ji(e){return new yo({check:"string_format",format:"uppercase",...m(e)})}a(Ji,"_uppercase");function Xi(e,t){return new vo({check:"string_format",format:"includes",...m(t),includes:e})}a(Xi,"_includes");function Hi(e,t){return new bo({check:"string_format",format:"starts_with",...m(t),prefix:e})}a(Hi,"_startsWith");function qi(e,t){return new wo({check:"string_format",format:"ends_with",...m(t),suffix:e})}a(qi,"_endsWith");function se(e){return new xo({check:"overwrite",tx:e})}a(se,"_overwrite");function Qi(e){return se(t=>t.normalize(e))}a(Qi,"_normalize");function er(){return se(e=>e.trim())}a(er,"_trim");function tr(){return se(e=>e.toLowerCase())}a(tr,"_toLowerCase");function nr(){return se(e=>e.toUpperCase())}a(nr,"_toUpperCase");function or(e,t,n){return new e({type:"array",element:t,...m(n)})}a(or,"_array");function ir(e,t,n){return new e({type:"custom",check:"custom",fn:t,...m(n)})}a(ir,"_refine");function rr(e){const t=sr(n=>(n.addIssue=o=>{if(typeof o=="string")n.issues.push(oe(o,n.value,t._zod.def));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),n.issues.push(oe(i))}},e(n.value,n)));return t}a(rr,"_superRefine");function sr(e,t){const n=new F({check:"custom",...m(t)});return n._zod.check=e,n}a(sr,"_check");const ar=l("ZodISODateTime",(e,t)=>{To.init(e,t),O.init(e,t)});function cr(e){return Di(ar,e)}a(cr,"datetime");const ur=l("ZodISODate",(e,t)=>{Fo.init(e,t),O.init(e,t)});function lr(e){return Ni(ur,e)}a(lr,"date");const dr=l("ZodISOTime",(e,t)=>{jo.init(e,t),O.init(e,t)});function hr(e){return Ri(dr,e)}a(hr,"time");const fr=l("ZodISODuration",(e,t)=>{Lo.init(e,t),O.init(e,t)});function pr(e){return Mi(fr,e)}a(pr,"duration");const mr=a((e,t)=>{Rt.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:a(n=>Cn(e,n),"value")},flatten:{value:a(n=>zn(e,n),"value")},addIssue:{value:a(n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Pe,2)},"value")},addIssues:{value:a(n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Pe,2)},"value")},isEmpty:{get(){return e.issues.length===0}}})},"initializer"),L=l("ZodError",mr,{Parent:Error}),gr=Ve(L),yr=Ge(L),vr=we(L),br=xe(L),wr=Pn(L),xr=On(L),_r=En(L),kr=An(L),zr=Zn(L),Cr=$n(L),Sr=Tn(L),Ir=Fn(L),Z=l("ZodType",(e,t)=>(E.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(G(t,{checks:[...t.checks??[],...n.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),e.clone=(n,o)=>U(e,n,o),e.brand=()=>e,e.register=((n,o)=>(n.add(e,o),e)),e.parse=(n,o)=>gr(e,n,o,{callee:e.parse}),e.safeParse=(n,o)=>vr(e,n,o),e.parseAsync=async(n,o)=>yr(e,n,o,{callee:e.parseAsync}),e.safeParseAsync=async(n,o)=>br(e,n,o),e.spa=e.safeParseAsync,e.encode=(n,o)=>wr(e,n,o),e.decode=(n,o)=>xr(e,n,o),e.encodeAsync=async(n,o)=>_r(e,n,o),e.decodeAsync=async(n,o)=>kr(e,n,o),e.safeEncode=(n,o)=>zr(e,n,o),e.safeDecode=(n,o)=>Cr(e,n,o),e.safeEncodeAsync=async(n,o)=>Sr(e,n,o),e.safeDecodeAsync=async(n,o)=>Ir(e,n,o),e.refine=(n,o)=>e.check(ys(n,o)),e.superRefine=n=>e.check(vs(n)),e.overwrite=n=>e.check(se(n)),e.optional=()=>Zt(e),e.nullable=()=>$t(e),e.nullish=()=>Zt($t(e)),e.nonoptional=n=>ls(e,n),e.array=()=>nn(e),e.or=n=>on([e,n]),e.and=n=>ts(e,n),e.transform=n=>Tt(e,is(n)),e.default=n=>as(e,n),e.prefault=n=>us(e,n),e.catch=n=>hs(e,n),e.pipe=n=>Tt(e,n),e.readonly=()=>ms(e),e.describe=n=>{const o=e.clone();return de.add(o,{description:n}),o},Object.defineProperty(e,"description",{get(){var n;return(n=de.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return de.get(e);const o=e.clone();return de.add(o,n[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),en=l("_ZodString",(e,t)=>{Ye.init(e,t),Z.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...o)=>e.check(Gi(...o)),e.includes=(...o)=>e.check(Xi(...o)),e.startsWith=(...o)=>e.check(Hi(...o)),e.endsWith=(...o)=>e.check(qi(...o)),e.min=(...o)=>e.check(ve(...o)),e.max=(...o)=>e.check(qt(...o)),e.length=(...o)=>e.check(Qt(...o)),e.nonempty=(...o)=>e.check(ve(1,...o)),e.lowercase=o=>e.check(Yi(o)),e.uppercase=o=>e.check(Ji(o)),e.trim=()=>e.check(er()),e.normalize=(...o)=>e.check(Qi(...o)),e.toLowerCase=()=>e.check(tr()),e.toUpperCase=()=>e.check(nr())}),Pr=l("ZodString",(e,t)=>{Ye.init(e,t),en.init(e,t),e.email=n=>e.check(yi(Or,n)),e.url=n=>e.check(_i(Er,n)),e.jwt=n=>e.check(Li(Kr,n)),e.emoji=n=>e.check(ki(Ar,n)),e.guid=n=>e.check(zt(Pt,n)),e.uuid=n=>e.check(vi(he,n)),e.uuidv4=n=>e.check(bi(he,n)),e.uuidv6=n=>e.check(wi(he,n)),e.uuidv7=n=>e.check(xi(he,n)),e.nanoid=n=>e.check(zi(Zr,n)),e.guid=n=>e.check(zt(Pt,n)),e.cuid=n=>e.check(Ci($r,n)),e.cuid2=n=>e.check(Si(Tr,n)),e.ulid=n=>e.check(Ii(Fr,n)),e.base64=n=>e.check(Ti(Br,n)),e.base64url=n=>e.check(Fi(Ur,n)),e.xid=n=>e.check(Pi(jr,n)),e.ksuid=n=>e.check(Oi(Lr,n)),e.ipv4=n=>e.check(Ei(Dr,n)),e.ipv6=n=>e.check(Ai(Nr,n)),e.cidrv4=n=>e.check(Zi(Rr,n)),e.cidrv6=n=>e.check($i(Mr,n)),e.e164=n=>e.check(ji(Wr,n)),e.datetime=n=>e.check(cr(n)),e.date=n=>e.check(lr(n)),e.time=n=>e.check(hr(n)),e.duration=n=>e.check(pr(n))});function I(e){return gi(Pr,e)}a(I,"string");const O=l("ZodStringFormat",(e,t)=>{P.init(e,t),en.init(e,t)}),Or=l("ZodEmail",(e,t)=>{Co.init(e,t),O.init(e,t)}),Pt=l("ZodGUID",(e,t)=>{ko.init(e,t),O.init(e,t)}),he=l("ZodUUID",(e,t)=>{zo.init(e,t),O.init(e,t)}),Er=l("ZodURL",(e,t)=>{So.init(e,t),O.init(e,t)}),Ar=l("ZodEmoji",(e,t)=>{Io.init(e,t),O.init(e,t)}),Zr=l("ZodNanoID",(e,t)=>{Po.init(e,t),O.init(e,t)}),$r=l("ZodCUID",(e,t)=>{Oo.init(e,t),O.init(e,t)}),Tr=l("ZodCUID2",(e,t)=>{Eo.init(e,t),O.init(e,t)}),Fr=l("ZodULID",(e,t)=>{Ao.init(e,t),O.init(e,t)}),jr=l("ZodXID",(e,t)=>{Zo.init(e,t),O.init(e,t)}),Lr=l("ZodKSUID",(e,t)=>{$o.init(e,t),O.init(e,t)}),Dr=l("ZodIPv4",(e,t)=>{Do.init(e,t),O.init(e,t)}),Nr=l("ZodIPv6",(e,t)=>{No.init(e,t),O.init(e,t)}),Rr=l("ZodCIDRv4",(e,t)=>{Ro.init(e,t),O.init(e,t)}),Mr=l("ZodCIDRv6",(e,t)=>{Mo.init(e,t),O.init(e,t)}),Br=l("ZodBase64",(e,t)=>{Bo.init(e,t),O.init(e,t)}),Ur=l("ZodBase64URL",(e,t)=>{Wo.init(e,t),O.init(e,t)}),Wr=l("ZodE164",(e,t)=>{Ko.init(e,t),O.init(e,t)}),Kr=l("ZodJWT",(e,t)=>{Go.init(e,t),O.init(e,t)}),tn=l("ZodNumber",(e,t)=>{Jt.init(e,t),Z.init(e,t),e.gt=(o,i)=>e.check(St(o,i)),e.gte=(o,i)=>e.check(Se(o,i)),e.min=(o,i)=>e.check(Se(o,i)),e.lt=(o,i)=>e.check(Ct(o,i)),e.lte=(o,i)=>e.check(Ce(o,i)),e.max=(o,i)=>e.check(Ce(o,i)),e.int=o=>e.check(Ot(o)),e.safe=o=>e.check(Ot(o)),e.positive=o=>e.check(St(0,o)),e.nonnegative=o=>e.check(Se(0,o)),e.negative=o=>e.check(Ct(0,o)),e.nonpositive=o=>e.check(Ce(0,o)),e.multipleOf=(o,i)=>e.check(It(o,i)),e.step=(o,i)=>e.check(It(o,i)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function x(e){return Bi(tn,e)}a(x,"number");const Vr=l("ZodNumberFormat",(e,t)=>{Yo.init(e,t),tn.init(e,t)});function Ot(e){return Ui(Vr,e)}a(Ot,"int");const Gr=l("ZodBoolean",(e,t)=>{Jo.init(e,t),Z.init(e,t)});function ee(e){return Wi(Gr,e)}a(ee,"boolean");const Yr=l("ZodUnknown",(e,t)=>{Xo.init(e,t),Z.init(e,t)});function Et(){return Ki(Yr)}a(Et,"unknown");const Jr=l("ZodNever",(e,t)=>{Ho.init(e,t),Z.init(e,t)});function Xr(e){return Vi(Jr,e)}a(Xr,"never");const Hr=l("ZodArray",(e,t)=>{qo.init(e,t),Z.init(e,t),e.element=t.element,e.min=(n,o)=>e.check(ve(n,o)),e.nonempty=n=>e.check(ve(1,n)),e.max=(n,o)=>e.check(qt(n,o)),e.length=(n,o)=>e.check(Qt(n,o)),e.unwrap=()=>e.element});function nn(e,t){return or(Hr,e,t)}a(nn,"array");const qr=l("ZodObject",(e,t)=>{ei.init(e,t),Z.init(e,t),C(e,"shape",()=>t.shape),e.keyof=()=>D(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Et()}),e.loose=()=>e.clone({...e._zod.def,catchall:Et()}),e.strict=()=>e.clone({...e._zod.def,catchall:Xr()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>bn(e,n),e.safeExtend=n=>wn(e,n),e.merge=n=>xn(e,n),e.pick=n=>yn(e,n),e.omit=n=>vn(e,n),e.partial=(...n)=>_n(rn,e,n[0]),e.required=(...n)=>kn(sn,e,n[0])});function z(e,t){const n={type:"object",shape:e??{},...m(t)};return new qr(n)}a(z,"object");const Qr=l("ZodUnion",(e,t)=>{ti.init(e,t),Z.init(e,t),e.options=t.options});function on(e,t){return new Qr({type:"union",options:e,...m(t)})}a(on,"union");const es=l("ZodIntersection",(e,t)=>{ni.init(e,t),Z.init(e,t)});function ts(e,t){return new es({type:"intersection",left:e,right:t})}a(ts,"intersection");const ns=l("ZodRecord",(e,t)=>{oi.init(e,t),Z.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function At(e,t,n){return new ns({type:"record",keyType:e,valueType:t,...m(n)})}a(At,"record");const Ze=l("ZodEnum",(e,t)=>{ii.init(e,t),Z.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(o,i)=>{const r={};for(const s of o)if(n.has(s))r[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ze({...t,checks:[],...m(i),entries:r})},e.exclude=(o,i)=>{const r={...t.entries};for(const s of o)if(n.has(s))delete r[s];else throw new Error(`Key ${s} not found in enum`);return new Ze({...t,checks:[],...m(i),entries:r})}});function D(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Ze({type:"enum",entries:n,...m(t)})}a(D,"_enum");const os=l("ZodTransform",(e,t)=>{ri.init(e,t),Z.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new me(e.constructor.name);n.addIssue=r=>{if(typeof r=="string")n.issues.push(oe(r,n.value,t));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(oe(s))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(r=>(n.value=r,n)):(n.value=i,n)}});function is(e){return new os({type:"transform",transform:e})}a(is,"transform");const rn=l("ZodOptional",(e,t)=>{si.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zt(e){return new rn({type:"optional",innerType:e})}a(Zt,"optional");const rs=l("ZodNullable",(e,t)=>{ai.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $t(e){return new rs({type:"nullable",innerType:e})}a($t,"nullable");const ss=l("ZodDefault",(e,t)=>{ci.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function as(e,t){return new ss({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Dt(t)}})}a(as,"_default");const cs=l("ZodPrefault",(e,t)=>{ui.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function us(e,t){return new cs({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Dt(t)}})}a(us,"prefault");const sn=l("ZodNonOptional",(e,t)=>{li.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ls(e,t){return new sn({type:"nonoptional",innerType:e,...m(t)})}a(ls,"nonoptional");const ds=l("ZodCatch",(e,t)=>{di.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function hs(e,t){return new ds({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}a(hs,"_catch");const fs=l("ZodPipe",(e,t)=>{hi.init(e,t),Z.init(e,t),e.in=t.in,e.out=t.out});function Tt(e,t){return new fs({type:"pipe",in:e,out:t})}a(Tt,"pipe");const ps=l("ZodReadonly",(e,t)=>{fi.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ms(e){return new ps({type:"readonly",innerType:e})}a(ms,"readonly");const gs=l("ZodCustom",(e,t)=>{pi.init(e,t),Z.init(e,t)});function ys(e,t={}){return ir(gs,e,t)}a(ys,"refine");function vs(e){return rr(e)}a(vs,"superRefine");const bs=z({pxFromCanvasLeft:x().default(100),pxFromCanvasTop:x().default(100)}).default({pxFromCanvasLeft:100,pxFromCanvasTop:100}),ws=z({widthInPx:x().default(100),lengthInPx:x().default(100)}).default({widthInPx:100,lengthInPx:100}),xs=z({width:x().default(1920),height:x().default(1080),backgroundColor:I().default("rgba(0, 0, 0, 0)")}).default({width:1920,height:1080,backgroundColor:"rgba(0, 0, 0, 0)"}),ae=z({positionOnCanvas:bs,hitboxSize:ws,layerLevel:x().default(10)}),A=ae.extend({input:z({keyboard:z({keyCode:I().nullable().default(null)}).default({keyCode:null}),mouse:z({button:x().nullable().default(null),wheel:D(["up","down"]).nullable().default(null)}).default({button:null,wheel:null}),gamepad:z({stick:z({type:D(["left","right"]).nullable().default(null),axis:D(["X","Y"]).nullable().default(null),direction:D(["positive","negative"]).nullable().default(null)}).default({type:null,axis:null,direction:null}),button:z({index:x().nullable().default(null)}).default({index:null})}).default({stick:{type:null,axis:null,direction:null},button:{index:null}})}).default({keyboard:{keyCode:null},mouse:{button:null,wheel:null},gamepad:{stick:{type:null,axis:null,direction:null},button:{index:null}}}),processing:z({radialCompensationAxis:x().default(-1),multiplier:x().default(1),antiDeadzone:x().default(.01),fadeOutDuration:x().default(.2)}).default({radialCompensationAxis:-1,multiplier:1,antiDeadzone:.01,fadeOutDuration:.2}),display:z({text:I().default(""),fillStyle:I().default("#00ff00"),fillStyleBackground:I().default("#808080"),fontStyle:z({textAlign:D(["left","right","center","start","end"]).default("center"),fillStyle:I().default("black"),font:I().default("30px Lucida Console"),strokeStyle:I().default("white"),strokeWidth:x().default(3)}).default({textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3}),fillDirection:D(["normal","reversed"]).default("normal")}).default({text:"",fillStyle:"#00ff00",fillStyleBackground:"#808080",fontStyle:{textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3},fillDirection:"normal"})}),W=z({strokeStyle:I(),fillStyle:I(),lineWidth:x(),opacity:x()}).partial(),ke=ae.extend({hitboxSize:z({widthInPx:x().default(200),lengthInPx:x().default(200)}).default({widthInPx:200,lengthInPx:200}),input:z({xAxes:At(I(),ee()).default({0:!0}),yAxes:At(I(),ee()).default({1:!0}),xKeyCodePositive:I().nullable().default("ArrowRight"),xKeyCodeNegative:I().nullable().default("ArrowLeft"),yKeyCodePositive:I().nullable().default("ArrowDown"),yKeyCodeNegative:I().nullable().default("ArrowUp"),invertX:ee().default(!1),invertY:ee().default(!1)}).default({xAxes:{0:!0},yAxes:{1:!0},xKeyCodePositive:"ArrowRight",xKeyCodeNegative:"ArrowLeft",yKeyCodePositive:"ArrowDown",yKeyCodeNegative:"ArrowUp",invertX:!1,invertY:!1}),processing:z({deadzone:x().default(.03),antiDeadzone:x().default(0)}).default({deadzone:.03,antiDeadzone:0}),display:z({radius:x().default(100),stickRadius:x().optional(),fillStyle:I().optional(),fillStyleStick:I().optional(),fillStyleBackground:I().optional(),backgroundStyle:W.default({strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"}),xLineStyle:W.default({strokeStyle:"#FF0000",lineWidth:2,opacity:.5}),yLineStyle:W.default({strokeStyle:"#00FF00",lineWidth:2,opacity:.5}),deadzoneStyle:W.default({fillStyle:"#524d4d"}),inputVectorStyle:W.default({strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5}),unitVectorStyle:W.default({strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5}),crosshairStyle:W.default({fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2})}).default({radius:100,backgroundStyle:{strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"},xLineStyle:{strokeStyle:"#FF0000",lineWidth:2,opacity:.5},yLineStyle:{strokeStyle:"#00FF00",lineWidth:2,opacity:.5},deadzoneStyle:{fillStyle:"#524d4d"},inputVectorStyle:{strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5},unitVectorStyle:{strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5},crosshairStyle:{fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2}})}),N=ae.extend({hitboxSize:z({widthInPx:x().default(200),lengthInPx:x().default(50)}).default({widthInPx:200,lengthInPx:50}),layerLevel:x().default(20),text:I().default("Sample text"),textStyle:z({textAlign:D(["left","right","center","start","end"]).default("center"),fillStyle:I().default("black"),font:I().default("30px Lucida Console"),strokeStyle:I().default("white"),strokeWidth:x().default(3)}).default({textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3}),shouldStroke:ee().default(!0)}),Je=ae.extend({layerLevel:x().default(0),src:I().default("./viewWhichRendersConfigurationAndUi/_assets/images/KeyDefault.png"),opacity:x().min(0).max(1).default(1)}),Xe=ae.extend({hitboxSize:z({widthInPx:x().default(640),lengthInPx:x().default(480)}).default({widthInPx:640,lengthInPx:480}),url:I().default("https://www.youtube.com/embed/dQw4w9WgXcQ"),opacity:x().min(0).max(1).default(1),interactionMode:D(["readonly","interactableOnFocus"]).default("interactableOnFocus")}),_s=on([z({LinearInputIndicator:A}),z({PlanarInputIndicator:ke}),z({Text:N}),z({Image:Je}),z({WebEmbed:Xe})]),ks=z({canvas:xs,objects:nn(_s)});function zs(e){const t=ks.safeParse(e);return t.success?{success:!0,data:t.data}:{success:!1,error:t.error}}a(zs,"validateCustomisableCanvasConfig");function Cs(e){return e.type===null||e.axis===null?null:(e.type==="left"?0:2)+(e.axis==="X"?0:1)}a(Cs,"asConventionalGamepadAxisNumber");const nt=class nt extends K{constructor(t,n){super(n),this.config=A.parse(t||{}),this.runtimeState={value:0,previousValue:0,opacity:1}}update(t){let n=0,o=0;const i=window.keyboard,r=this.config.input.keyboard.keyCode;n+=r&&i[r]?1:0;const s=window.mouse,u=this.config.input.mouse.button;u!==null&&s.buttons[u]&&(n+=1);const c=this.config.input.mouse.wheel;c!==null&&s.wheelEvents&&(c==="up"&&s.wheelEvents.up||c==="down"&&s.wheelEvents.down)&&(n+=1);const d=this.config.processing.antiDeadzone;let h=Math.max(0,d-o*.5);const f=window.gamepads;if(f)for(let y=0;y<f.length;y++){const b=f[y];if(!b)continue;const T=this.config.input.gamepad.stick,S=Cs(T);if(b.axes&&S!==null){const _=b.axes[S],j=T.direction==="negative",Y=this.config.processing.radialCompensationAxis,ce=Y>=0?b.axes[Y]:void 0;_!=null&&(j===!0&&_<0||j===!1&&_>0)&&(Y>=0&&ce!==void 0?n+=Math.abs(_)*Math.sqrt(1+2*Math.pow(Math.abs(ce),2)):Y<0&&(n+=(Math.abs(_)-h)/(1-h))),Y>=0&&ce!==void 0&&(o+=Math.abs(ce))}const $=this.config.input.gamepad.button.index;if(b.buttons&&$!==null){const _=b.buttons[$];_&&(n+=_.value)}}h>=1&&(h=.999);const g=this.config.processing.multiplier,v=Math.max(Math.min((n-h)/(1-h)*g,1),0),p=this.config.processing.fadeOutDuration;if(v>0)this.runtimeState.value=v,this.runtimeState.opacity=1;else if(p>0&&this.runtimeState.value>0){const y=1/p;this.runtimeState.opacity=this.runtimeState.opacity*Math.exp(-y*t),this.runtimeState.opacity<.001&&(this.runtimeState.opacity=0,this.runtimeState.value=0)}else this.runtimeState.value=0,this.runtimeState.opacity=1;return!0}draw(t,n){n.fillStyle=this.config.display.fillStyleBackground,n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx);const o=n.globalAlpha;n.globalAlpha*=this.runtimeState.opacity,n.fillStyle=this.config.display.fillStyle,this.config.display.fillDirection==="reversed"?n.fillRect(0,this.config.hitboxSize.lengthInPx,this.config.hitboxSize.widthInPx,-this.config.hitboxSize.lengthInPx*this.runtimeState.value):n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx*this.runtimeState.value),n.globalAlpha=o;const r=this.config.display.text,s=this.config.display.fontStyle,u=this.config.hitboxSize.widthInPx*.5,c=this.config.hitboxSize.lengthInPx*.5;Q(n,s),n.strokeStyle=s.strokeStyle??"white",n.lineWidth=s.strokeWidth??3,n.strokeText(r,u,c),Ft(n,u,c,r,s)}};a(nt,"LinearInputIndicator");let $e=nt;const k=class k{constructor(t,n,o){this.x=t||0,this.y=n||0,this.z=o||0}negative(){return new k(-this.x,-this.y,-this.z)}add(t){return t instanceof k?new k(this.x+t.x,this.y+t.y,this.z+t.z):new k(this.x+t,this.y+t,this.z+t)}subtract(t){return t instanceof k?new k(this.x-t.x,this.y-t.y,this.z-t.z):new k(this.x-t,this.y-t,this.z-t)}multiply(t){return t instanceof k?new k(this.x*t.x,this.y*t.y,this.z*t.z):new k(this.x*t,this.y*t,this.z*t)}divide(t){return t instanceof k?new k(this.x/t.x,this.y/t.y,this.z/t.z):new k(this.x/t,this.y/t,this.z/t)}equals(t){return this.x==t.x&&this.y==t.y&&this.z==t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new k(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}length(){return Math.sqrt(this.dot(this))}unit(){return this.divide(this.length())}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}}angleTo(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}toArray(t){return[this.x,this.y,this.z].slice(0,t||3)}clone(){return new k(this.x,this.y,this.z)}init(t,n,o){return this.x=t,this.y=n,this.z=o,this}static negative(t,n){return n.x=-t.x,n.y=-t.y,n.z=-t.z,n}static add(t,n,o){return n instanceof k?(o.x=t.x+n.x,o.y=t.y+n.y,o.z=t.z+n.z):(o.x=t.x+n,o.y=t.y+n,o.z=t.z+n),o}static subtract(t,n,o){return n instanceof k?(o.x=t.x-n.x,o.y=t.y-n.y,o.z=t.z-n.z):(o.x=t.x-n,o.y=t.y-n,o.z=t.z-n),o}static multiply(t,n,o){return n instanceof k?(o.x=t.x*n.x,o.y=t.y*n.y,o.z=t.z*n.z):(o.x=t.x*n,o.y=t.y*n,o.z=t.z*n),o}static divide(t,n,o){return n instanceof k?(o.x=t.x/n.x,o.y=t.y/n.y,o.z=t.z/n.z):(o.x=t.x/n,o.y=t.y/n,o.z=t.z/n),o}static cross(t,n,o){return o.x=t.y*n.z-t.z*n.y,o.y=t.z*n.x-t.x*n.z,o.z=t.x*n.y-t.y*n.x,o}static unit(t,n){const o=t.length();return n.x=t.x/o,n.y=t.y/o,n.z=t.z/o,n}static fromAngles(t,n){return new k(Math.cos(t)*Math.cos(n),Math.sin(n),Math.sin(t)*Math.cos(n))}static randomDirection(){return k.fromAngles(Math.random()*Math.PI*2,Math.asin(Math.random()*2-1))}static min(t,n){return new k(Math.min(t.x,n.x),Math.min(t.y,n.y),Math.min(t.z,n.z))}static max(t,n){return new k(Math.max(t.x,n.x),Math.max(t.y,n.y),Math.max(t.z,n.z))}static lerp(t,n,o){return n.subtract(t).multiply(o).add(t)}static fromArray(t){return new k(t[0],t[1],t[2])}static angleBetween(t,n){return t.angleTo(n)}};a(k,"Vector");let ie=k;const ot=class ot extends K{constructor(t,n){super(n),this.config=ke.parse(t||{}),this.runtimeState={inputVector:new ie(0,0),previousX:0,previousY:0}}update(){let t=0,n=0;const o=window.keyboard;if(o){const r=this.config.input.xKeyCodePositive,s=this.config.input.xKeyCodeNegative,u=this.config.input.yKeyCodePositive,c=this.config.input.yKeyCodeNegative;r&&o[r]&&(t+=1),s&&o[s]&&(t-=1),u&&o[u]&&(n+=1),c&&o[c]&&(n-=1)}const i=window.gamepads;if(i)for(let r=0;r<i.length;r++){const s=i[r];if(s&&s.axes)for(let u=0;u<s.axes.length;u++){const c=s.axes[u];this.config.input.xAxes[u]&&c!==void 0&&(t+=c),this.config.input.yAxes[u]&&c!==void 0&&(n+=c)}}return this.config.input.invertX&&(t*=-1),this.config.input.invertY&&(n*=-1),this.runtimeState.previousX=this.runtimeState.inputVector.x,this.runtimeState.previousY=this.runtimeState.inputVector.y,this.runtimeState.inputVector.x=Math.max(Math.min(t,1),-1),this.runtimeState.inputVector.y=Math.max(Math.min(n,1),-1),this.runtimeState.previousX!==this.runtimeState.inputVector.x||this.runtimeState.previousY!==this.runtimeState.inputVector.y}draw(t,n){Q(n,{lineCap:"round"});const o=this.config.display.radius;n.transform(1,0,0,1,o,o),n.beginPath(),ze(n,0,0,o,0,2*Math.PI,this.config.display.backgroundStyle),n.stroke(),n.fill();const i=this.config.processing.deadzone;if(i>0&&(n.beginPath(),ze(n,0,0,o*i,0,2*Math.PI,this.config.display.deadzoneStyle),n.fill()),n.save(),this.config.display.xLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.xLineStyle.opacity),n.beginPath(),ht(n,0,0,this.runtimeState.inputVector.x*o,0,this.config.display.xLineStyle),n.stroke(),n.restore(),n.save(),this.config.display.yLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.yLineStyle.opacity),n.beginPath(),ht(n,0,0,0,this.runtimeState.inputVector.y*o,this.config.display.yLineStyle),n.stroke(),n.restore(),this.runtimeState.inputVector.length()>i){const r=this.runtimeState.inputVector.unit(),s=this.runtimeState.inputVector.toAngles(),u=this.config.processing.antiDeadzone,c=ie.fromAngles(s.theta,s.phi).multiply((this.runtimeState.inputVector.length()-u)/(1-u));n.save(),this.config.display.unitVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.unitVectorStyle.opacity),n.beginPath(),dt(n,0,0,r.x*o,r.y*o,this.config.display.unitVectorStyle),n.stroke(),n.restore(),n.save(),this.config.display.inputVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.inputVectorStyle.opacity),n.beginPath(),dt(n,0,0,c.x*o,c.y*o,this.config.display.inputVectorStyle),n.stroke(),n.restore()}n.beginPath(),ze(n,0,0,2,0,2*Math.PI,this.config.display.crosshairStyle),n.fill(),n.stroke(),n.closePath()}};a(ot,"PlanarInputIndicator");let Te=ot;const it=class it extends K{constructor(t,n){super(n),this.config=N.parse(t||{})}update(){return!0}draw(t,n){n.beginPath(),n.textBaseline="middle",n.textAlign="left";const o=0,i=this.config.hitboxSize.lengthInPx/2;this.config.shouldStroke&&(n.strokeStyle=this.config.textStyle.strokeStyle??"white",n.lineWidth=this.config.textStyle.strokeWidth??3,n.strokeText(this.config.text,o,i)),Ft(n,o,i,this.config.text,this.config.textStyle)}};a(it,"Text");let Fe=it;var H;let Ss=(H=class extends K{constructor(t,n){super(n),this.config=Je.parse(t||{}),this.runtimeState={imageElement:new window.Image},this.runtimeState.imageElement.src=this.config.src}update(){return this.runtimeState.imageElement.complete}draw(t,n){if(this.runtimeState.imageElement.complete){n.save(),n.globalAlpha*=this.config.opacity;try{n.drawImage(this.runtimeState.imageElement,0,0,this.runtimeState.imageElement.width,this.runtimeState.imageElement.height,0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx)}catch{}n.restore()}}},a(H,"Image"),H);const Ie=new Map,rt=class rt extends K{constructor(t,n){super(n),this.config=Xe.parse(t||{}),this.runtimeState={iframe:null},this.findOrCreateIframe()}findOrCreateIframe(){const t=Ie.get(this.objArrayIdx);if(t&&t.parentNode){this.runtimeState.iframe=t,this.runtimeState.iframe.src!==this.config.url&&(this.runtimeState.iframe.src=this.config.url);return}this.runtimeState.iframe=document.createElement("iframe"),this.runtimeState.iframe.src=this.config.url,this.runtimeState.iframe.style.position="absolute";const n=50;this.runtimeState.iframe.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+n+"px",this.runtimeState.iframe.style.top=this.config.positionOnCanvas.pxFromCanvasTop+n+"px",this.runtimeState.iframe.style.width=this.config.hitboxSize.widthInPx-n*2+"px",this.runtimeState.iframe.style.height=this.config.hitboxSize.lengthInPx-n*2+"px",this.runtimeState.iframe.style.opacity=this.config.opacity.toString(),this.runtimeState.iframe.style.border="2px solid #B4B4B4",this.runtimeState.iframe.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto",this.runtimeState.iframe.style.zIndex="1",this.runtimeState.iframe.setAttribute("allowfullscreen",""),this.runtimeState.iframe.setAttribute("allowtransparency","true"),document.body.appendChild(this.runtimeState.iframe),Ie.set(this.objArrayIdx,this.runtimeState.iframe)}update(){return this.runtimeState.iframe&&(this.runtimeState.iframe.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+50+"px",this.runtimeState.iframe.style.top=this.config.positionOnCanvas.pxFromCanvasTop+50+"px",this.runtimeState.iframe.style.width=this.config.hitboxSize.widthInPx-100+"px",this.runtimeState.iframe.style.height=this.config.hitboxSize.lengthInPx-100+"px",this.runtimeState.iframe.style.opacity=this.config.opacity.toString(),this.runtimeState.iframe.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto"),!1}draw(t,n,o=!1){this.runtimeState.iframe&&(this.runtimeState.iframe.style.display=o?"none":"block"),n.strokeStyle="#FF00FF",n.lineWidth=2,n.strokeRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx),o&&(n.fillStyle="#808080",n.fillRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.strokeStyle="#B4B4B4",n.lineWidth=2,n.strokeRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.fillStyle="black",n.font="14px monospace",n.fillText(this.config.url,55,40),n.font="20px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText("WebEmbed",this.config.hitboxSize.widthInPx/2,this.config.hitboxSize.lengthInPx/2))}cleanup(){this.runtimeState.iframe&&this.runtimeState.iframe.parentNode&&(this.runtimeState.iframe.parentNode.removeChild(this.runtimeState.iframe),this.runtimeState.iframe=null),Ie.delete(this.objArrayIdx)}};a(rt,"WebEmbed");let je=rt;const te={LinearInputIndicator:$e,PlanarInputIndicator:Te,Text:Fe,Image:Ss,WebEmbed:je};function Is(e){return e in te}a(Is,"isCanvasObjectClassName");function Le(e,t){for(const n in e)if(Is(n)){const o=te[n],i=e[n];return new o(i,t)}throw new Error("Invalid config: no valid class name found")}a(Le,"deserializeCanvasObject");const st=class st{constructor(){this.className="PropertyEdit",this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.deleteCallback=null,this.pendingChanges=new Map}hidePropertyEdit(){const t=document.getElementById("propertyTable"),n=document.getElementById("sceneConfigText"),o=document.getElementById("leftPanel"),i=document.getElementById("containerForPossibleEditorWindows");if(!(!t||!o)){if(this.configManager&&this.targetObjectIndex!==null&&this.pendingChanges.size>0&&(this.configManager.updateObject(this.targetObjectIndex,this.pendingChanges),this.pendingChanges.clear()),n&&!n.hidden&&this.applySceneConfig&&(document.activeElement===n||n.dataset.modified==="true"))try{const s=JSON.parse(n.value);this.applySceneConfig(s),n.dataset.modified="false"}catch(s){console.error("Invalid JSON in canvas config:",s),alert("Invalid JSON syntax. Please fix the configuration.");return}for(;t.firstChild!==null;)t.removeChild(t.firstChild);n&&(n.hidden=!0,n.value=""),t&&(t.hidden=!0),o&&(o.hidden=!0),i&&(i.hidden=!0),this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.pendingChanges.clear()}}showPropertyEdit(t,n,o,i,r){this.targetObject=n,this.targetObjectIndex=o,this.configManager=i,this.deleteCallback=r||null,this.pendingChanges.clear();const s=document.getElementById("containerForPossibleEditorWindows"),u=document.getElementById("propertyTable"),c=document.getElementById("sceneConfigText"),d=document.getElementById("editorTitle"),h=document.getElementById("leftPanel"),f=document.getElementById("rightPanel");if(!s||!u||!d||!h)return;h.hidden=!1,c&&(c.hidden=!0),u.hidden=!1,f&&(f.hidden=!0);const g=Object.keys(t)[0]||"unknown",v=t[g];for(d.innerHTML=g;u.firstChild!==null;)u.removeChild(u.firstChild);if(this.renderProperties(u,[],v,v),this.deleteCallback){const p=document.createElement("tr");p.className="property";const y=document.createElement("td");y.colSpan=2,y.style.paddingTop="20px";const b=document.createElement("button");b.textContent="Delete Object",b.style.width="100%",b.style.padding="10px",b.style.backgroundColor="rgba(120, 40, 40, 0.9)",b.style.color="#cdc1c1",b.style.border="1px solid #B4B4B4",b.style.cursor="pointer",b.style.fontFamily="Lucida Console",b.style.fontSize="1em",b.addEventListener("click",()=>{confirm("Delete this object?")&&(this.deleteCallback&&this.deleteCallback(),this.hidePropertyEdit())}),y.appendChild(b),p.appendChild(y),u.appendChild(p)}s.hidden=!1}showCanvasConfig(t,n,o){this.targetScene=t,this.applySceneConfig=o;const i=document.getElementById("containerForPossibleEditorWindows"),r=document.getElementById("propertyTable"),s=document.getElementById("sceneConfigText"),u=document.getElementById("editorTitle"),c=document.getElementById("leftPanel");!i||!r||!s||!u||!c||(c.hidden=!1,r.hidden=!0,s.hidden=!1,u.innerHTML="Canvas Configuration",s.value=JSON.stringify(t,null,2),s.dataset.modified="false",s.oninput=()=>{s.dataset.modified="true"})}renderProperties(t,n,o,i){if(this.isRecord(o))for(const r in o){const s=[...n,r],u=o[r],c=this.getNestedValue(i,s);if(this.isPlainObject(u)){const d=this.createPropertyHeader(r,n.length);t.appendChild(d),this.renderProperties(t,s,u,i)}else{const d=this.createPropertyRow(r,c,s,i,n.length);t.appendChild(d)}}}isRecord(t){return this.isPlainObject(t)}createPropertyHeader(t,n){const o=document.createElement("div");return o.style.marginLeft=`${n*20}px`,o.style.marginTop="8px",o.style.marginBottom="4px",o.style.color="#AAAAAA",o.style.fontWeight="bold",o.textContent=t+":",o}createPropertyRow(t,n,o,i,r){const s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.marginLeft=`${r*20}px`,s.style.marginBottom="4px",s.style.gap="10px";const u=document.createElement("label");u.textContent=t+":",u.style.minWidth="120px",u.style.color="#FFFFFF",s.appendChild(u);const c=this.createInput(n,o,i);return s.appendChild(c),s}createInput(t,n,o){const i=document.createElement("input");return i.type="text",i.value=this.valueToString(t),i.style.width="200px",i.style.padding="4px",i.style.fontFamily="monospace",i.addEventListener("input",()=>{try{const r=this.parseValue(i.value),s=n.join(".");this.pendingChanges.set(s,{path:n,value:r}),i.style.borderColor="",this.setNestedValue(o,n,r)}catch(r){console.error("[PropertyEdit] Failed to parse input:",r),i.style.borderColor="red"}}),i}valueToString(t){if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean")return String(t);if(typeof t=="object")try{return JSON.stringify(t)}catch{return"[Object]"}return"[Unknown]"}parseValue(t){if(t==="null")return null;if(t==="undefined")return;if(t==="true")return!0;if(t==="false")return!1;if(t==="")return null;const n=Number(t);if(!isNaN(n)&&t.trim()!=="")return n;try{return JSON.parse(t)}catch{return t}}getNestedValue(t,n){if(!this.isRecord(t))return;let o=t;const i=n.filter(r=>r!=="Base Properties");for(const r of i){if(o==null)return;const s=o[r];if(this.isRecord(s))o=s;else return s}return o}setNestedValue(t,n,o){if(!this.isRecord(t))return;let i=t;const r=n.filter(u=>u!=="Base Properties");for(let u=0;u<r.length-1;u++){const c=r[u];if(!c)continue;(i[c]===null||i[c]===void 0)&&(i[c]={});const d=i[c];if(this.isRecord(d))i=d;else{i[c]={};const h=i[c];this.isRecord(h)&&(i=h)}}const s=r[r.length-1];s!==void 0&&(i[s]=o)}isPlainObject(t){return t===null||typeof t!="object"||t instanceof Image||t instanceof HTMLElement||Array.isArray(t)?!1:t.constructor===Object}update(){}draw(){}};a(st,"PropertyEdit");let De=st;function Ps(e){try{const t=JSON.parse(e),n=zs(t);return n.success?{success:!0,config:n.data}:{success:!1,error:`Config validation failed: ${n.error.issues.map(i=>`${i.path.join(".")}: ${i.message}`).join("; ")}`}}catch(t){return t instanceof SyntaxError?{success:!1,error:`Invalid JSON: ${t.message}`}:{success:!1,error:`Unknown error: ${String(t)}`}}}a(Ps,"loadConfigFromJSON");function Os(e){const t=localStorage.getItem(e);return t?Ps(t):{success:!1,error:"not_found"}}a(Os,"loadConfigFromLocalStorage");function Es(e,t,n,o){if(t<0||t>=e.objects.length)return e;const i=[...e.objects],r=i[t];if(!r)return e;const u=Object.entries(r)[0];if(!u)return e;const[c,d]=u;if(!c||!d)return e;const h={...d,positionOnCanvas:{pxFromCanvasLeft:n,pxFromCanvasTop:o}};return i[t]={[c]:h},{...e,objects:i}}a(Es,"updateObjectPosition");function As(e,t,n){return{...e,canvas:{...e.canvas,width:t,height:n}}}a(As,"updateCanvasDimensions");function Zs(e,t){return{...e,objects:[...e.objects,t]}}a(Zs,"addObject");function $s(e,t){return t<0||t>=e.objects.length?e:{...e,objects:e.objects.filter((n,o)=>o!==t)}}a($s,"removeObject");function Ts(e,t,n){if(t<0||t>=e.objects.length||n.size===0)return e;const o=[...e.objects],i=o[t];if(!i)return e;const s=Object.entries(i)[0];if(!s)return e;const[u,c]=s;if(!u||!c)return e;let d=JSON.parse(JSON.stringify(c));return n.forEach(({path:h,value:f})=>{if(h.length===0)return;let g=d;for(let p=0;p<h.length-1;p++){const y=h[p];y&&(g[y]===void 0&&(g[y]={}),g=g[y])}const v=h[h.length-1];v!==void 0&&(g[v]=f)}),o[t]={[u]:d},{...e,objects:o}}a(Ts,"updateObjectByIndex");const at=class at{constructor(t){this.changeCallbacks=[],this.saveCallback=null,this._config=t}get config(){return this._config}setConfig(t){t!==this._config&&(this._config=t,this.changeCallbacks.forEach(n=>{n(t)}),this.saveCallback&&this.saveCallback(t))}onChange(t){return this.changeCallbacks.push(t),()=>{this.changeCallbacks=this.changeCallbacks.filter(n=>n!==t)}}onSave(t){this.saveCallback=t}moveObject(t,n,o){const i=Es(this._config,t,n,o);this.setConfig(i)}resizeCanvas(t,n){const o=As(this._config,t,n);this.setConfig(o)}updateObject(t,n){const o=Ts(this._config,t,n);this.setConfig(o)}addObject(t){const n=Zs(this._config,t);this.setConfig(n)}deleteObject(t){const n=$s(this._config,t);this.setConfig(n)}};a(at,"ConfigManager");let Ne=at;function an(e,t=2e3){const n=document.getElementById("toastContainer");if(!n){console.warn("[Toast] Container not found");return}const o=document.createElement("div");o.className="BoxWhichNotifiesUserOfStatusUpdates",o.textContent=e,n.appendChild(o),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},t)}a(an,"showToast");const ct=class ct{constructor(t,n){this.cache=null,this.canvas=t;const o=t.getContext("2d");if(!o)throw new Error("Failed to get 2D context");this.ctx=o,this.deserializer=n}deserializeObjects(t){const n=[];for(let o=0;o<t.objects.length;o++){const i=t.objects[o];if(i)try{n.push(this.deserializer(i,o))}catch(r){console.error("[CanvasRenderer] Deserialization failed:",i,r)}}return n}update(t,n){var i;((i=this.cache)==null?void 0:i.config)!==t&&(this.cache={config:t,objects:this.deserializeObjects(t)});const o=this.cache;if(!o)throw new Error("Cache should be initialized");for(let r=0;r<o.objects.length;r++){const s=o.objects[r];s&&s.update(n)}return o.objects}render(t){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let n=0;n<t.length;n++){const o=t[n];o&&(this.ctx.setTransform(1,0,0,1,o.config.positionOnCanvas.pxFromCanvasLeft,o.config.positionOnCanvas.pxFromCanvasTop),o.draw(this.canvas,this.ctx),this.ctx.closePath())}}renderOverlay(t){t(this.canvas,this.ctx)}renderDebugHitboxes(t){for(let n=0;n<t.length;n++){const o=t[n];o&&(this.ctx.setTransform(1,0,0,1,o.config.positionOnCanvas.pxFromCanvasLeft,o.config.positionOnCanvas.pxFromCanvasTop),this.ctx.beginPath(),this.ctx.strokeStyle="#FF00FF",this.ctx.lineWidth=1,this.ctx.rect(0,0,o.config.hitboxSize.widthInPx,o.config.hitboxSize.lengthInPx),this.ctx.stroke())}}};a(ct,"CanvasRenderer");let Re=ct;const ut=class ut{constructor(){this.clickedObjectIndex=null,this.draggingOffset=new ie(0,0),this.gridsize=10,this.editingProperties=!1,this.creationPanelActive=!1,this.dragStartPosition=null,this.lastDragPosition=null,this.disableInteractions=!1,this.onMoveObject=null,this.onDeleteObject=null,this.onShowPropertyEdit=null,this.onShowCreationPanel=null,this.onCloseEditors=null}setOnMoveObject(t){this.onMoveObject=t}setOnDeleteObject(t){this.onDeleteObject=t}setOnShowPropertyEdit(t){this.onShowPropertyEdit=t}setOnShowCreationPanel(t){this.onShowCreationPanel=t}setOnCloseEditors(t){this.onCloseEditors=t}setEditingProperties(t){this.editingProperties=t}setCreationPanelActive(t){this.creationPanelActive=t}setDisableInteractions(t){this.disableInteractions=t}getClickedObjectIndex(){return this.clickedObjectIndex}clearSelection(){this.clickedObjectIndex=null}update(t){var o,i,r,s;if(this.disableInteractions)return!1;if(w.clicks[0]===!0||w.clicks[2]===!0){this.clickedObjectIndex=null,this.dragStartPosition=null,this.lastDragPosition=null;for(let u=0;u<t.length;u++){const c=t[u];if(!c)continue;const{positionOnCanvas:d,hitboxSize:h}=c.config;if(!(!d||!h)&&w.x>d.pxFromCanvasLeft&&w.y>d.pxFromCanvasTop&&w.x<d.pxFromCanvasLeft+h.widthInPx&&w.y<d.pxFromCanvasTop+h.lengthInPx){this.draggingOffset.x=d.pxFromCanvasLeft-w.x,this.draggingOffset.y=d.pxFromCanvasTop-w.y,this.clickedObjectIndex=u,this.dragStartPosition={x:d.pxFromCanvasLeft,y:d.pxFromCanvasTop};break}}}const n=this.clickedObjectIndex!==null?t[this.clickedObjectIndex]:void 0;if(n&&w.buttons[0]===!0){const u=Math.round((w.x+this.draggingOffset.x)/this.gridsize)*this.gridsize,c=Math.round((w.y+this.draggingOffset.y)/this.gridsize)*this.gridsize;this.lastDragPosition={x:u,y:c}}if(w.buttons[0]===!1&&n&&this.dragStartPosition){const u=((o=this.lastDragPosition)==null?void 0:o.x)??((i=n.config.positionOnCanvas)==null?void 0:i.pxFromCanvasLeft),c=((r=this.lastDragPosition)==null?void 0:r.y)??((s=n.config.positionOnCanvas)==null?void 0:s.pxFromCanvasTop);if(u===void 0||c===void 0)return console.warn("[UserEditModeInteractionsController] Object missing positionOnCanvas on release"),this.dragStartPosition=null,this.lastDragPosition=null,!1;(u!==this.dragStartPosition.x||c!==this.dragStartPosition.y)&&this.clickedObjectIndex!==null&&this.onMoveObject&&this.onMoveObject(this.clickedObjectIndex,u,c),this.dragStartPosition=null,this.lastDragPosition=null}return w.clicks[2]===!0&&n&&!this.editingProperties&&!this.creationPanelActive&&this.onShowPropertyEdit&&this.onShowPropertyEdit(n),w.clicks[2]===!0&&!n&&!this.editingProperties&&!this.creationPanelActive&&this.onShowCreationPanel&&this.onShowCreationPanel(),!1}hasSelection(){return this.clickedObjectIndex!==null}getDragPreview(){return this.clickedObjectIndex!==null&&this.lastDragPosition?{objectIndex:this.clickedObjectIndex,x:this.lastDragPosition.x,y:this.lastDragPosition.y}:null}getDragOriginalPosition(){return this.clickedObjectIndex!==null&&this.dragStartPosition&&this.lastDragPosition?{objectIndex:this.clickedObjectIndex,x:this.dragStartPosition.x,y:this.dragStartPosition.y}:null}};a(ut,"UserEditModeInteractionsController");let Me=ut;const Fs={LinearInputIndicator:A,PlanarInputIndicator:ke,Text:N,Image:Je,WebEmbed:Xe};window.gamepads=null;window.keyboard=ne;window.mouse=w;window.addEventListener("load",function(){const e=document.getElementById("canvas");if(!e)throw new Error("Canvas element not found");if(!e.getContext("2d"))throw new Error("Could not get 2D context");e.width=window.innerWidth,e.height=window.innerHeight;const n=new Ne({canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:[]}),o=new Re(e,Le),i=new Me;if(window.electronAPI){const p=window.electronAPI.isAppInReadonlyClickthroughMode();i.setDisableInteractions(p),console.log("[default.ts] Readonly/clickthrough mode:",p)}const r=Ds(e),s=Ns(e,n,i);i.setOnMoveObject((p,y,b)=>{n.moveObject(p,y,b)}),i.setOnDeleteObject(p=>{s.deleteObjectAtIndex(p)}),i.setOnShowPropertyEdit(p=>{const y=p.objArrayIdx,T=n.config.objects[y];if(!T){console.error("[PropertyEdit] Could not find config for object at index",y);return}s.propertyEditor.showPropertyEdit(T,p,y,n,()=>{s.deleteObjectAtIndex(y)}),i.setEditingProperties(!0)}),i.setOnShowCreationPanel(()=>{s.showBothPanels()}),i.setOnCloseEditors(()=>{s.hideBothPanels()}),e.addEventListener("contextmenu",p=>{if(p.preventDefault(),window.electronAPI&&window.electronAPI.isAppInReadonlyClickthroughMode())return;let y=!1;const T=n.config.objects.map((S,$)=>Le(S,$));for(let S=0;S<T.length;S++){const $=T[S];if($){const{positionOnCanvas:_,hitboxSize:j}=$.config;if(_&&j&&p.offsetX>_.pxFromCanvasLeft&&p.offsetY>_.pxFromCanvasTop&&p.offsetX<_.pxFromCanvasLeft+j.widthInPx&&p.offsetY<_.pxFromCanvasTop+j.lengthInPx){y=!0;break}}}y||s.showBothPanels()});const c=Ls()||r;c.canvas&&(e.width=c.canvas.width,e.height=c.canvas.height),n.onSave(p=>{js(p),an("Saved")}),n.setConfig(c);let d=[];function h(){o.render(d),i.hasSelection()&&o.renderDebugHitboxes(d);const p=i.getDragOriginalPosition();if(p){const b=d[p.objectIndex];b&&o.renderOverlay((T,S)=>{S.save(),S.globalAlpha=.5,S.setTransform(1,0,0,1,p.x,p.y),b.draw(T,S,!0),S.restore()})}const y=i.getDragPreview();if(y){const b=d[y.objectIndex];b&&o.renderOverlay((T,S)=>{S.save(),S.globalAlpha=1,S.setTransform(1,0,0,1,y.x,y.y),b.draw(T,S,!0),S.restore()})}}a(h,"frameUpdate");let f=0;function g(p){const y=(p-f)/1e3;f=p;let b=!1;if(window.gamepads=navigator.getGamepads(),!window._gamepadDebugLogged){const S=window.gamepads;let $=0;for(let _=0;_<S.length;_++)S[_]&&$++;$>0&&(window._gamepadDebugLogged=!0)}const T=n.config;d=o.update(T,y),b=!0,i.update(d),b&&h(),w.update(y),window.requestAnimationFrame(g)}a(g,"updateLoop"),window.requestAnimationFrame(g),h();function v(){e.width=window.innerWidth,e.height=window.innerHeight,h()}a(v,"resizeCanvas"),window.addEventListener("resize",v)},!1);const pe="analogKeyboardOverlay_sceneConfig";function js(e){try{const t={version:"c32b33a",...e};localStorage.setItem(pe,JSON.stringify(t))}catch(t){console.error("[Config] Failed to save:",t)}}a(js,"saveSceneConfig");function Ls(){try{const e=localStorage.getItem(pe);if(!e)return null;const t=JSON.parse(e);if(t.version!=="c32b33a")return console.warn(`[Config] Version mismatch: stored=${t.version}, current=c32b33a. Clearing localStorage.`),localStorage.removeItem(pe),an("Config version changed - reset to defaults"),null;const n=Os(pe);return n.success?n.config:(console.error("[Config] Validation failed:",n.error),console.error("[Config] Raw data from localStorage:",e),null)}catch(e){return console.error("[Config] Failed to load:",e),null}}a(Ls,"loadSceneConfig");function Ds(e){const t=[{Text:N.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:20},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 1: Left Stick + WASD + Mouse - WITH radial compensation vs WITHOUT",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:N.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:45},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Move diagonally: LEFT shows ~100% (compensated), RIGHT shows ~70% (raw circular)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{PlanarInputIndicator:ke.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:80},input:{xAxes:{0:!0},yAxes:{1:!0}}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:240,pxFromCanvasTop:80},input:{keyboard:{keyCode:"KeyW"},mouse:{button:3,wheel:"up"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},processing:{radialCompensationAxis:0},display:{text:"W"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:150,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyA"},mouse:{button:0},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},processing:{radialCompensationAxis:1},display:{text:"A"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:250,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyS"},mouse:{button:4,wheel:"down"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},processing:{radialCompensationAxis:0},display:{text:"S"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:350,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyD"},mouse:{button:1},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},processing:{radialCompensationAxis:1},display:{text:"D"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:740,pxFromCanvasTop:80},input:{keyboard:{keyCode:"KeyW"},mouse:{button:3,wheel:"up"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},display:{text:"W"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:650,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyA"},mouse:{button:0},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},display:{text:"A"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:750,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyS"},mouse:{button:4,wheel:"down"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},display:{text:"S"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:850,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyD"},mouse:{button:1},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},display:{text:"D"}})},{Text:N.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:20},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 1B: Right Gamepad Stick (IJKL)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:N.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:45},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Same as Test 1, but using right stick",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:1150,pxFromCanvasTop:80},input:{gamepad:{stick:{type:"right",axis:"Y",direction:"negative"}}},processing:{radialCompensationAxis:2},display:{text:"I"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"X",direction:"negative"}}},processing:{radialCompensationAxis:3},display:{text:"J"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:1150,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"Y",direction:"positive"}}},processing:{radialCompensationAxis:2},display:{text:"K"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:1250,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"X",direction:"positive"}}},processing:{radialCompensationAxis:3},display:{text:"L"}})},{Text:N.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:300},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 3: Gamepad Buttons (Digital)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:N.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:325},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Face buttons (A/B/X/Y) - digital on/off, no pressure sensitivity",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:150,pxFromCanvasTop:360},input:{gamepad:{button:{index:0}}},display:{text:"A"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:250,pxFromCanvasTop:360},input:{gamepad:{button:{index:1}}},display:{text:"B"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:350,pxFromCanvasTop:360},input:{gamepad:{button:{index:2}}},display:{text:"X"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:450,pxFromCanvasTop:360},input:{gamepad:{button:{index:3}}},display:{text:"Y"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:550,pxFromCanvasTop:360},input:{gamepad:{button:{index:6}}},display:{text:"LT"}})},{LinearInputIndicator:A.parse({positionOnCanvas:{pxFromCanvasLeft:650,pxFromCanvasTop:360},input:{gamepad:{button:{index:7}}},display:{text:"RT"}})}];return{canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:t}}a(Ds,"createDefaultConfig");function Ns(e,t,n){const o=new De;function i(){n.setCreationPanelActive(!0),o.showCanvasConfig(t.config,e,p=>{t.setConfig(p)});const f=document.getElementById("leftPanel"),g=document.getElementById("rightPanel");f&&(f.hidden=!1),g&&(g.hidden=!1);const v=document.getElementById("containerForPossibleEditorWindows");v&&(v.hidden=!1),s(),n.setEditingProperties(!0)}a(i,"showBothPanels");function r(){try{o.hidePropertyEdit()}finally{n.setCreationPanelActive(!1),n.setEditingProperties(!1)}const f=document.getElementById("leftPanel"),g=document.getElementById("rightPanel");f&&(f.hidden=!0),g&&(g.hidden=!0);const v=document.getElementById("containerForPossibleEditorWindows");v&&(v.hidden=!0)}a(r,"hideBothPanels");function s(){const f=document.getElementById("objectCreationContent");f&&(f.innerHTML="",Object.entries(te).forEach(([g,v])=>{const p=document.createElement("div");p.className="objectTypeSection";const y=document.createElement("p");y.className="sectionHeader",y.textContent=g,p.appendChild(y);const b=document.createElement("button");b.className="createObjectBtn ButtonWhichUserCanPressToUpdateState",b.setAttribute("data-type",g),b.textContent=`Create ${g}`,p.appendChild(b),f.appendChild(p)}))}a(s,"populateCreationPanel");function u(f){if(!(f in te)){console.error("[Spawn] Unknown type:",f,"Available:",Object.keys(te));return}const g=Fs[f];if(!g){console.error(`No schema found for ${f}`);return}const v=g.parse({}),p={[f]:v};t.addObject(p)}a(u,"createObject");function c(f){var p;const g=t.config;if(f<0||f>=g.objects.length)return;const v=g.objects[f];if(v)try{const y=Le(v,f);(p=y.cleanup)==null||p.call(y)}catch(y){console.error("[Delete] Failed to deserialize for cleanup:",y)}t.deleteObject(f)}a(c,"deleteObjectAtIndex");const d=document.getElementById("objectCreationContent");d&&d.addEventListener("click",f=>{const g=f.target;if(g.classList.contains("createObjectBtn")){const v=g.getAttribute("data-type");v&&(u(v),r())}});const h=document.getElementById("doneContainerForPossibleEditorWindows");return h&&h.addEventListener("click",()=>{r()}),{propertyEditor:o,deleteObjectAtIndex:c,showBothPanels:i,hideBothPanels:r}}a(Ns,"createUIHelpers");
