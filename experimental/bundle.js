var un=Object.defineProperty;var a=(e,t)=>un(e,"name",{value:t,configurable:!0});a(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}a(n,"getFetchOpts");function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}a(o,"processPreload")},"polyfill")();const b={x:0,y:0,buttons:{0:!1,1:!1,2:!1,3:!1,4:!1},clicks:{0:!1,1:!1,2:!1,3:!1,4:!1},wheelDelta:{x:0,y:0},wheelEvents:{up:!1,down:!1},update(e){this.wheelDelta.x*=.7*e,this.wheelDelta.y*=.7*e,this.clicks[0]=!1,this.clicks[1]=!1,this.clicks[2]=!1,this.clicks[3]=!1,this.clicks[4]=!1,this.wheelEvents.up=!1,this.wheelEvents.down=!1}},se=document.getElementById("canvas");se.addEventListener("mousedown",e=>{b.x=e.x,b.y=e.y;const t=e.button;b.buttons[t]===!1&&(b.buttons[t]=!0,b.clicks[t]=!0)});se.addEventListener("mouseup",e=>{b.x=e.x,b.y=e.y;const t=e.button;b.buttons[t]===!0&&(b.buttons[t]=!1)});se.addEventListener("mousemove",e=>{b.x=e.x,b.y=e.y});se.addEventListener("wheel",e=>{b.wheelDelta.x=e.deltaX,b.wheelDelta.y=e.deltaY,e.deltaY<0?b.wheelEvents.up=!0:e.deltaY>0&&(b.wheelEvents.down=!0)});se.addEventListener("contextmenu",e=>{e.preventDefault()});const oe={};document.addEventListener("keydown",function(e){oe[e.code]!==!0&&(oe[e.code]=!0)});document.addEventListener("keyup",function(e){oe[e.code]===!0&&(oe[e.code]=!1)});const dt={30:"KeyA",48:"KeyB",46:"KeyC",32:"KeyD",18:"KeyE",33:"KeyF",34:"KeyG",35:"KeyH",23:"KeyI",36:"KeyJ",37:"KeyK",38:"KeyL",50:"KeyM",49:"KeyN",24:"KeyO",25:"KeyP",16:"KeyQ",19:"KeyR",31:"KeyS",20:"KeyT",22:"KeyU",47:"KeyV",17:"KeyW",45:"KeyX",21:"KeyY",44:"KeyZ",2:"Digit1",3:"Digit2",4:"Digit3",5:"Digit4",6:"Digit5",7:"Digit6",8:"Digit7",9:"Digit8",10:"Digit9",11:"Digit0",57:"Space",28:"Enter",1:"Escape",14:"Backspace",15:"Tab",42:"ShiftLeft",54:"ShiftRight",29:"ControlLeft",97:"ControlRight",56:"AltLeft",100:"AltRight",103:"ArrowUp",108:"ArrowDown",105:"ArrowLeft",106:"ArrowRight",57416:"ArrowUp",57424:"ArrowDown",57419:"ArrowLeft",57421:"ArrowRight"};let fe=null,ht=!1;function ln(){const e=navigator.getGamepads(),t=Array.from(e);return fe&&fe.connected&&(t[0]=fe),t}a(ln,"getMergedGamepads");function dn(){if(window.electronAPI){if(ht){console.warn("[ElectronBridge] Already initialized, skipping");return}ht=!0,window.electronAPI.onGlobalKeyDown(e=>{const t=dt[e.keycode];t&&document.dispatchEvent(new KeyboardEvent("keydown",{code:t,bubbles:!0,cancelable:!0}))}),window.electronAPI.onGlobalKeyUp(e=>{const t=dt[e.keycode];t&&document.dispatchEvent(new KeyboardEvent("keyup",{code:t,bubbles:!0,cancelable:!0}))}),window.electronAPI.onGlobalGamepadState(e=>{fe={axes:e.axes,buttons:e.buttons,connected:e.connected,timestamp:e.timestamp,id:"SDL2 Gamepad (sdl2-gamecontroller)",index:0,mapping:"standard"}}),window.electronAPI.onGlobalMouseDown(e=>{const n={1:0,3:1,2:2,4:3,5:4}[e.button];n!==void 0&&window.mouse&&window.mouse.buttons&&window.mouse.buttons[n]===!1&&(window.mouse.buttons[n]=!0,window.mouse.clicks[n]=!0)}),window.electronAPI.onGlobalMouseUp(e=>{const n={1:0,3:1,2:2,4:3,5:4}[e.button];n!==void 0&&window.mouse&&window.mouse.buttons&&window.mouse.buttons[n]===!0&&(window.mouse.buttons[n]=!1)}),window.electronAPI.onGlobalMouseMove(e=>{window.mouse&&(window.mouse.x=e.x,window.mouse.y=e.y)}),window.electronAPI.onGlobalWheel(e=>{window.mouse&&window.mouse.wheelDelta&&(window.mouse.wheelDelta.y=-e.rotation),window.mouse&&window.mouse.wheelEvents&&(e.rotation<0?window.mouse.wheelEvents.up=!0:e.rotation>0&&(window.mouse.wheelEvents.down=!0))})}}a(dn,"initializeElectronBridges");const qe=class qe{constructor(t){this.objArrayIdx=t}};a(qe,"CanvasObjectInstance");let Y=qe;function te(e,t){t.lineWidth!==void 0&&(e.lineWidth=t.lineWidth),t.strokeStyle!==void 0&&(e.strokeStyle=t.strokeStyle),t.fillStyle!==void 0&&(e.fillStyle=t.fillStyle),t.lineCap!==void 0&&(e.lineCap=t.lineCap),t.textAlign!==void 0&&(e.textAlign=t.textAlign),t.font!==void 0&&(e.font=t.font)}a(te,"canvas_properties");function ft(e,t,n,o,i,r){r!==void 0&&te(e,r);const s=10,u=Math.atan2(i-n,o-t);e.moveTo(t,n),e.lineTo(o,i),e.moveTo(o,i),e.lineTo(o-s*Math.cos(u-Math.PI/6),i-s*Math.sin(u-Math.PI/6)),e.moveTo(o,i),e.lineTo(o-s*Math.cos(u+Math.PI/6),i-s*Math.sin(u+Math.PI/6))}a(ft,"canvas_arrow");function pt(e,t,n,o,i,r){r!==void 0&&te(e,r),e.moveTo(t,n),e.lineTo(o,i)}a(pt,"canvas_line");function Se(e,t,n,o,i,r,s){s!==void 0&&te(e,s),e.arc(t,n,o,i,r)}a(Se,"canvas_arc");function Lt(e,t,n,o,i){i!==void 0&&te(e,i),e.fillText(o,t,n)}a(Lt,"canvas_text");function l(e,t,n){function o(c,d){var h;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(h=c._zod).traits??(h.traits=new Set),c._zod.traits.add(e),t(c,d);for(const y in s.prototype)y in c||Object.defineProperty(c,y,{value:s.prototype[y].bind(c)});c._zod.constr=s,c._zod.def=d}a(o,"init");const i=(n==null?void 0:n.Parent)??Object,u=class u extends i{};a(u,"Definition");let r=u;Object.defineProperty(r,"name",{value:e});function s(c){var d;const h=n!=null&&n.Parent?new r:this;o(h,c),(d=h._zod).deferred??(d.deferred=[]);for(const y of h._zod.deferred)y();return h}return a(s,"_"),Object.defineProperty(s,"init",{value:o}),Object.defineProperty(s,Symbol.hasInstance,{value:a(c=>{var d,h;return n!=null&&n.Parent&&c instanceof n.Parent?!0:(h=(d=c==null?void 0:c._zod)==null?void 0:d.traits)==null?void 0:h.has(e)},"value")}),Object.defineProperty(s,"name",{value:e}),s}a(l,"$constructor");const Qe=class Qe extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};a(Qe,"$ZodAsyncError");let R=Qe;const et=class et extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}};a(et,"$ZodEncodeError");let ge=et;const Dt={};function W(e){return Dt}a(W,"config");function hn(e){const t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,i])=>t.indexOf(+o)===-1).map(([o,i])=>i)}a(hn,"getEnumValues");function Pe(e,t){return typeof t=="bigint"?t.toString():t}a(Pe,"jsonStringifyReplacer");function Re(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}a(Re,"cached");function We(e){return e==null}a(We,"nullish");function Ue(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}a(Ue,"cleanRegex");function fn(e,t){const n=(e.toString().split(".")[1]||"").length,o=t.toString();let i=(o.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(o)){const c=o.match(/\d?e-(\d?)/);c!=null&&c[1]&&(i=Number.parseInt(c[1]))}const r=n>i?n:i,s=Number.parseInt(e.toFixed(r).replace(".","")),u=Number.parseInt(t.toFixed(r).replace(".",""));return s%u/10**r}a(fn,"floatSafeRemainder");const gt=Symbol("evaluating");function I(e,t,n){let o;Object.defineProperty(e,t,{get(){if(o!==gt)return o===void 0&&(o=gt,o=n()),o},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}a(I,"defineLazy");function X(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}a(X,"assignProp");function G(...e){const t={};for(const n of e){const o=Object.getOwnPropertyDescriptors(n);Object.assign(t,o)}return Object.defineProperties({},t)}a(G,"mergeDefs");function mt(e){return JSON.stringify(e)}a(mt,"esc");const Nt="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function me(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}a(me,"isObject");const pn=Re(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ee(e){if(me(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(me(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}a(ee,"isPlainObject");function Bt(e){return ee(e)?{...e}:Array.isArray(e)?[...e]:e}a(Bt,"shallowClone");const gn=new Set(["string","number","symbol"]);function be(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(be,"escapeRegex");function K(e,t,n){const o=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(o._zod.parent=e),o}a(K,"clone");function g(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:a(()=>t,"error")};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:a(()=>t.error,"error")}:t}a(g,"normalizeParams");function mn(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}a(mn,"optionalKeys");const yn={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function vn(e,t){const n=e._zod.def,o=G(e._zod.def,{get shape(){const i={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(i[r]=n.shape[r])}return X(this,"shape",i),i},checks:[]});return K(e,o)}a(vn,"pick");function bn(e,t){const n=e._zod.def,o=G(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete i[r]}return X(this,"shape",i),i},checks:[]});return K(e,o)}a(bn,"omit");function wn(e,t){if(!ee(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=G(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return X(this,"shape",r),r},checks:[]});return K(e,i)}a(wn,"extend");function xn(e,t){if(!ee(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const o={...e._zod.def.shape,...t};return X(this,"shape",o),o},checks:e._zod.def.checks};return K(e,n)}a(xn,"safeExtend");function _n(e,t){const n=G(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t._zod.def.shape};return X(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return K(e,n)}a(_n,"merge");function kn(e,t,n){const o=G(t._zod.def,{get shape(){const i=t._zod.def.shape,r={...i};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=e?new e({type:"optional",innerType:i[s]}):i[s])}else for(const s in i)r[s]=e?new e({type:"optional",innerType:i[s]}):i[s];return X(this,"shape",r),r},checks:[]});return K(t,o)}a(kn,"partial");function Sn(e,t,n){const o=G(t._zod.def,{get shape(){const i=t._zod.def.shape,r={...i};if(n)for(const s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(r[s]=new e({type:"nonoptional",innerType:i[s]}))}else for(const s in i)r[s]=new e({type:"nonoptional",innerType:i[s]});return X(this,"shape",r),r},checks:[]});return K(t,o)}a(Sn,"required");function J(e,t=0){var n;if(e.aborted===!0)return!0;for(let o=t;o<e.issues.length;o++)if(((n=e.issues[o])==null?void 0:n.continue)!==!0)return!0;return!1}a(J,"aborted");function H(e,t){return t.map(n=>{var o;return(o=n).path??(o.path=[]),n.path.unshift(e),n})}a(H,"prefixIssues");function ue(e){return typeof e=="string"?e:e==null?void 0:e.message}a(ue,"unwrapMessage");function U(e,t,n){var i,r,s,u,c,d;const o={...e,path:e.path??[]};if(!e.message){const h=ue((s=(r=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:r.error)==null?void 0:s.call(r,e))??ue((u=t==null?void 0:t.error)==null?void 0:u.call(t,e))??ue((c=n.customError)==null?void 0:c.call(n,e))??ue((d=n.localeError)==null?void 0:d.call(n,e))??"Invalid input";o.message=h}return delete o.inst,delete o.continue,t!=null&&t.reportInput||delete o.input,o}a(U,"finalizeIssue");function Ke(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}a(Ke,"getLengthableOrigin");function ie(...e){const[t,n,o]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:o}:{...t}}a(ie,"issue");const Mt=a((e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Pe,2),Object.defineProperty(e,"toString",{value:a(()=>e.message,"value"),enumerable:!1})},"initializer$1"),Rt=l("$ZodError",Mt),Wt=l("$ZodError",Mt,{Parent:Error});function Cn(e,t=n=>n.message){const n={},o=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):o.push(t(i));return{formErrors:o,fieldErrors:n}}a(Cn,"flattenError");function zn(e,t=n=>n.message){const n={_errors:[]},o=a(i=>{for(const r of i.issues)if(r.code==="invalid_union"&&r.errors.length)r.errors.map(s=>o({issues:s}));else if(r.code==="invalid_key")o({issues:r.issues});else if(r.code==="invalid_element")o({issues:r.issues});else if(r.path.length===0)n._errors.push(t(r));else{let s=n,u=0;for(;u<r.path.length;){const c=r.path[u];u===r.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(t(r))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}},"processError");return o(e),n}a(zn,"formatError");const Ve=a(e=>(t,n,o,i)=>{const r=o?Object.assign(o,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise)throw new R;if(s.issues.length){const u=new((i==null?void 0:i.Err)??e)(s.issues.map(c=>U(c,r,W())));throw Nt(u,i==null?void 0:i.callee),u}return s.value},"_parse"),Ye=a(e=>async(t,n,o,i)=>{const r=o?Object.assign(o,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise&&(s=await s),s.issues.length){const u=new((i==null?void 0:i.Err)??e)(s.issues.map(c=>U(c,r,W())));throw Nt(u,i==null?void 0:i.callee),u}return s.value},"_parseAsync"),we=a(e=>(t,n,o)=>{const i=o?{...o,async:!1}:{async:!1},r=t._zod.run({value:n,issues:[]},i);if(r instanceof Promise)throw new R;return r.issues.length?{success:!1,error:new(e??Rt)(r.issues.map(s=>U(s,i,W())))}:{success:!0,data:r.value}},"_safeParse"),In=we(Wt),xe=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},i);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new e(r.issues.map(s=>U(s,i,W())))}:{success:!0,data:r.value}},"_safeParseAsync"),Pn=xe(Wt),En=a(e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ve(e)(t,n,i)},"_encode"),On=a(e=>(t,n,o)=>Ve(e)(t,n,o),"_decode"),An=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ye(e)(t,n,i)},"_encodeAsync"),Zn=a(e=>async(t,n,o)=>Ye(e)(t,n,o),"_decodeAsync"),Tn=a(e=>(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return we(e)(t,n,i)},"_safeEncode"),$n=a(e=>(t,n,o)=>we(e)(t,n,o),"_safeDecode"),Fn=a(e=>async(t,n,o)=>{const i=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return xe(e)(t,n,i)},"_safeEncodeAsync"),jn=a(e=>async(t,n,o)=>xe(e)(t,n,o),"_safeDecodeAsync"),Ln=/^[cC][^\s-]{8,}$/,Dn=/^[0-9a-z]+$/,Nn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Bn=/^[0-9a-vA-V]{20}$/,Mn=/^[A-Za-z0-9]{27}$/,Rn=/^[a-zA-Z0-9_-]{21}$/,Wn=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Un=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,yt=a(e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,"uuid"),Kn=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Vn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Yn(){return new RegExp(Vn,"u")}a(Yn,"emoji");const Xn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Jn=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Hn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qn=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ut=/^[A-Za-z0-9_-]*$/,Qn=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,eo=/^\+(?:[0-9]){6,14}[0-9]$/,Kt="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",to=new RegExp(`^${Kt}$`);function Vt(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}a(Vt,"timeSource");function no(e){return new RegExp(`^${Vt(e)}$`)}a(no,"time$1");function oo(e){const t=Vt({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${t}(?:${n.join("|")})`;return new RegExp(`^${Kt}T(?:${o})$`)}a(oo,"datetime$1");const io=a(e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},"string$1"),ro=/^-?\d+$/,so=/^-?\d+(?:\.\d+)?/,ao=/^(?:true|false)$/i,co=/^[^A-Z]*$/,uo=/^[^a-z]*$/,D=l("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Yt={number:"number",bigint:"bigint",object:"date"},Xt=l("$ZodCheckLessThan",(e,t)=>{D.init(e,t);const n=Yt[typeof t.value];e._zod.onattach.push(o=>{const i=o._zod.bag,r=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:n,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Gt=l("$ZodCheckGreaterThan",(e,t)=>{D.init(e,t);const n=Yt[typeof t.value];e._zod.onattach.push(o=>{const i=o._zod.bag,r=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:n,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),lo=l("$ZodCheckMultipleOf",(e,t)=>{D.init(e,t),e._zod.onattach.push(n=>{var o;(o=n._zod.bag).multipleOf??(o.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):fn(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),ho=l("$ZodCheckNumberFormat",(e,t)=>{var s;D.init(e,t),t.format=t.format||"float64";const n=(s=t.format)==null?void 0:s.includes("int"),o=n?"int":"number",[i,r]=yn[t.format];e._zod.onattach.push(u=>{const c=u._zod.bag;c.format=t.format,c.minimum=i,c.maximum=r,n&&(c.pattern=ro)}),e._zod.check=u=>{const c=u.value;if(n){if(!Number.isInteger(c)){u.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?u.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):u.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}c<i&&u.issues.push({origin:"number",input:c,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),c>r&&u.issues.push({origin:"number",input:c,code:"too_big",maximum:r,inst:e})}}),fo=l("$ZodCheckMaxLength",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!We(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{const i=o.value;if(i.length<=t.maximum)return;const s=Ke(i);o.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),po=l("$ZodCheckMinLength",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!We(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{const i=o.value;if(i.length>=t.minimum)return;const s=Ke(i);o.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),go=l("$ZodCheckLengthEquals",(e,t)=>{var n;D.init(e,t),(n=e._zod.def).when??(n.when=o=>{const i=o.value;return!We(i)&&i.length!==void 0}),e._zod.onattach.push(o=>{const i=o._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=o=>{const i=o.value,r=i.length;if(r===t.length)return;const s=Ke(i),u=r>t.length;o.issues.push({origin:s,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),_e=l("$ZodCheckStringFormat",(e,t)=>{var n,o;D.init(e,t),e._zod.onattach.push(i=>{const r=i._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),mo=l("$ZodCheckRegex",(e,t)=>{_e.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),yo=l("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=co),_e.init(e,t)}),vo=l("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=uo),_e.init(e,t)}),bo=l("$ZodCheckIncludes",(e,t)=>{D.init(e,t);const n=be(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=o,e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(o)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),wo=l("$ZodCheckStartsWith",(e,t)=>{D.init(e,t);const n=new RegExp(`^${be(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),xo=l("$ZodCheckEndsWith",(e,t)=>{D.init(e,t);const n=new RegExp(`.*${be(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}}),_o=l("$ZodCheckOverwrite",(e,t)=>{D.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}}),tt=class tt{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const o=t.split(`
`).filter(s=>s),i=Math.min(...o.map(s=>s.length-s.trimStart().length)),r=o.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of r)this.content.push(s)}compile(){const t=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(r=>`  ${r}`)];return new t(...n,i.join(`
`))}};a(tt,"Doc");let Ee=tt;const ko={major:4,minor:1,patch:12},A=l("$ZodType",(e,t)=>{var i;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=ko;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const r of o)for(const s of r._zod.onattach)s(e);if(o.length===0)(n=e._zod).deferred??(n.deferred=[]),(i=e._zod.deferred)==null||i.push(()=>{e._zod.run=e._zod.parse});else{const r=a((u,c,d)=>{let h=J(u),y;for(const f of c){if(f._zod.def.when){if(!f._zod.def.when(u))continue}else if(h)continue;const m=u.issues.length,v=f._zod.check(u);if(v instanceof Promise&&(d==null?void 0:d.async)===!1)throw new R;if(y||v instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await v,u.issues.length!==m&&(h||(h=J(u,m)))});else{if(u.issues.length===m)continue;h||(h=J(u,m))}}return y?y.then(()=>u):u},"runChecks"),s=a((u,c,d)=>{if(J(u))return u.aborted=!0,u;const h=r(c,o,d);if(h instanceof Promise){if(d.async===!1)throw new R;return h.then(y=>e._zod.parse(y,d))}return e._zod.parse(h,d)},"handleCanaryResult");e._zod.run=(u,c)=>{if(c.skipChecks)return e._zod.parse(u,c);if(c.direction==="backward"){const h=e._zod.parse({value:u.value,issues:[]},{...c,skipChecks:!0});return h instanceof Promise?h.then(y=>s(y,u,c)):s(h,u,c)}const d=e._zod.parse(u,c);if(d instanceof Promise){if(c.async===!1)throw new R;return d.then(h=>r(h,o,c))}return r(d,o,c)}}e["~standard"]={validate:a(r=>{var s;try{const u=In(e,r);return u.success?{value:u.data}:{issues:(s=u.error)==null?void 0:s.issues}}catch{return Pn(e,r).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},"validate"),vendor:"zod",version:1}}),Xe=l("$ZodString",(e,t)=>{var n;A.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??io(e._zod.bag),e._zod.parse=(o,i)=>{if(t.coerce)try{o.value=String(o.value)}catch{}return typeof o.value=="string"||o.issues.push({expected:"string",code:"invalid_type",input:o.value,inst:e}),o}}),P=l("$ZodStringFormat",(e,t)=>{_e.init(e,t),Xe.init(e,t)}),So=l("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Un),P.init(e,t)}),Co=l("$ZodUUID",(e,t)=>{if(t.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=yt(o))}else t.pattern??(t.pattern=yt());P.init(e,t)}),zo=l("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Kn),P.init(e,t)}),Io=l("$ZodURL",(e,t)=>{P.init(e,t),e._zod.check=n=>{try{const o=n.value.trim(),i=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Qn.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Po=l("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Yn()),P.init(e,t)}),Eo=l("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Rn),P.init(e,t)}),Oo=l("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Ln),P.init(e,t)}),Ao=l("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Dn),P.init(e,t)}),Zo=l("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Nn),P.init(e,t)}),To=l("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Bn),P.init(e,t)}),$o=l("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Mn),P.init(e,t)}),Fo=l("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=oo(t)),P.init(e,t)}),jo=l("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=to),P.init(e,t)}),Lo=l("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=no(t)),P.init(e,t)}),Do=l("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Wn),P.init(e,t)}),No=l("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Xn),P.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv4"})}),Bo=l("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Gn),P.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Mo=l("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Jn),P.init(e,t)}),Ro=l("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Hn),P.init(e,t),e._zod.check=n=>{const o=n.value.split("/");try{if(o.length!==2)throw new Error;const[i,r]=o;if(!r)throw new Error;const s=Number(r);if(`${s}`!==r)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Jt(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}a(Jt,"isValidBase64");const Wo=l("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=qn),P.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Jt(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Uo(e){if(!Ut.test(e))return!1;const t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Jt(n)}a(Uo,"isValidBase64URL");const Ko=l("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Ut),P.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{Uo(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Vo=l("$ZodE164",(e,t)=>{t.pattern??(t.pattern=eo),P.init(e,t)});function Yo(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[o]=n;if(!o)return!1;const i=JSON.parse(atob(o));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}a(Yo,"isValidJWT");const Xo=l("$ZodJWT",(e,t)=>{P.init(e,t),e._zod.check=n=>{Yo(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Ht=l("$ZodNumber",(e,t)=>{A.init(e,t),e._zod.pattern=e._zod.bag.pattern??so,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const r=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...r?{received:r}:{}}),n}}),Go=l("$ZodNumber",(e,t)=>{ho.init(e,t),Ht.init(e,t)}),Jo=l("$ZodBoolean",(e,t)=>{A.init(e,t),e._zod.pattern=ao,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),Ho=l("$ZodUnknown",(e,t)=>{A.init(e,t),e._zod.parse=n=>n}),qo=l("$ZodNever",(e,t)=>{A.init(e,t),e._zod.parse=(n,o)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function vt(e,t,n){e.issues.length&&t.issues.push(...H(n,e.issues)),t.value[n]=e.value}a(vt,"handleArrayResult");const Qo=l("$ZodArray",(e,t)=>{A.init(e,t),e._zod.parse=(n,o)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const r=[];for(let s=0;s<i.length;s++){const u=i[s],c=t.element._zod.run({value:u,issues:[]},o);c instanceof Promise?r.push(c.then(d=>vt(d,n,s))):vt(c,n,s)}return r.length?Promise.all(r).then(()=>n):n}});function ye(e,t,n,o){e.issues.length&&t.issues.push(...H(n,e.issues)),e.value===void 0?n in o&&(t.value[n]=void 0):t.value[n]=e.value}a(ye,"handlePropertyResult");function qt(e){var o,i,r,s;const t=Object.keys(e.shape);for(const u of t)if(!((s=(r=(i=(o=e.shape)==null?void 0:o[u])==null?void 0:i._zod)==null?void 0:r.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=mn(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}a(qt,"normalizeDef");function Qt(e,t,n,o,i,r){const s=[],u=i.keySet,c=i.catchall._zod,d=c.def.type;for(const h of Object.keys(t)){if(u.has(h))continue;if(d==="never"){s.push(h);continue}const y=c.run({value:t[h],issues:[]},o);y instanceof Promise?e.push(y.then(f=>ye(f,n,h,t))):ye(y,n,h,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:r}),e.length?Promise.all(e).then(()=>n):n}a(Qt,"handleCatchall");const ei=l("$ZodObject",(e,t)=>{A.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const u=t.shape;Object.defineProperty(t,"shape",{get:a(()=>{const c={...u};return Object.defineProperty(t,"shape",{value:c}),c},"get")})}const o=Re(()=>qt(t));I(e._zod,"propValues",()=>{const u=t.shape,c={};for(const d in u){const h=u[d]._zod;if(h.values){c[d]??(c[d]=new Set);for(const y of h.values)c[d].add(y)}}return c});const i=me,r=t.catchall;let s;e._zod.parse=(u,c)=>{s??(s=o.value);const d=u.value;if(!i(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),u;u.value={};const h=[],y=s.shape;for(const f of s.keys){const v=y[f]._zod.run({value:d[f],issues:[]},c);v instanceof Promise?h.push(v.then(w=>ye(w,u,f,d))):ye(v,u,f,d)}return r?Qt(h,d,u,c,o.value,e):h.length?Promise.all(h).then(()=>u):u}}),ti=l("$ZodObjectJIT",(e,t)=>{ei.init(e,t);const n=e._zod.parse,o=Re(()=>qt(t)),i=a(f=>{const m=new Ee(["shape","payload","ctx"]),v=o.value,w=a(O=>{const x=mt(O);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`},"parseStr");m.write("const input = payload.value;");const p=Object.create(null);let k=0;for(const O of v.keys)p[O]=`key_${k++}`;m.write("const newResult = {};");for(const O of v.keys){const x=p[O],$=mt(O);m.write(`const ${x} = ${w(O)};`),m.write(`
        if (${x}.issues.length) {
          payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        
        if (${x}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${x}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const F=m.compile();return(O,x)=>F(f,O,x)},"generateFastpass");let r;const s=me,u=!Dt.jitless,d=u&&pn.value,h=t.catchall;let y;e._zod.parse=(f,m)=>{y??(y=o.value);const v=f.value;return s(v)?u&&d&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(r||(r=i(t.shape)),f=r(f,m),h?Qt([],v,f,m,y,e):f):n(f,m):(f.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),f)}});function bt(e,t,n,o){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;const i=e.filter(r=>!J(r));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(s=>U(s,o,W())))}),t)}a(bt,"handleUnionResults");const ni=l("$ZodUnion",(e,t)=>{A.init(e,t),I(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),I(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),I(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),I(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){const i=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${i.map(r=>Ue(r.source)).join("|")})$`)}});const n=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(i,r)=>{if(n)return o(i,r);let s=!1;const u=[];for(const c of t.options){const d=c._zod.run({value:i.value,issues:[]},r);if(d instanceof Promise)u.push(d),s=!0;else{if(d.issues.length===0)return d;u.push(d)}}return s?Promise.all(u).then(c=>bt(c,i,e,r)):bt(u,i,e,r)}}),oi=l("$ZodIntersection",(e,t)=>{A.init(e,t),e._zod.parse=(n,o)=>{const i=n.value,r=t.left._zod.run({value:i,issues:[]},o),s=t.right._zod.run({value:i,issues:[]},o);return r instanceof Promise||s instanceof Promise?Promise.all([r,s]).then(([c,d])=>wt(n,c,d)):wt(n,r,s)}});function Oe(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ee(e)&&ee(t)){const n=Object.keys(t),o=Object.keys(e).filter(r=>n.indexOf(r)!==-1),i={...e,...t};for(const r of o){const s=Oe(e[r],t[r]);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};i[r]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let o=0;o<e.length;o++){const i=e[o],r=t[o],s=Oe(i,r);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}a(Oe,"mergeValues");function wt(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),J(e))return e;const o=Oe(t.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}a(wt,"handleIntersectionResults");const ii=l("$ZodRecord",(e,t)=>{A.init(e,t),e._zod.parse=(n,o)=>{const i=n.value;if(!ee(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),n;const r=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const c of s)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const d=t.valueType._zod.run({value:i[c],issues:[]},o);d instanceof Promise?r.push(d.then(h=>{h.issues.length&&n.issues.push(...H(c,h.issues)),n.value[c]=h.value})):(d.issues.length&&n.issues.push(...H(c,d.issues)),n.value[c]=d.value)}let u;for(const c in i)s.has(c)||(u=u??[],u.push(c));u&&u.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:u})}else{n.value={};for(const s of Reflect.ownKeys(i)){if(s==="__proto__")continue;const u=t.keyType._zod.run({value:s,issues:[]},o);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(u.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:u.issues.map(d=>U(d,o,W())),input:s,path:[s],inst:e}),n.value[u.value]=u.value;continue}const c=t.valueType._zod.run({value:i[s],issues:[]},o);c instanceof Promise?r.push(c.then(d=>{d.issues.length&&n.issues.push(...H(s,d.issues)),n.value[u.value]=d.value})):(c.issues.length&&n.issues.push(...H(s,c.issues)),n.value[u.value]=c.value)}}return r.length?Promise.all(r).then(()=>n):n}}),ri=l("$ZodEnum",(e,t)=>{A.init(e,t);const n=hn(t.entries),o=new Set(n);e._zod.values=o,e._zod.pattern=new RegExp(`^(${n.filter(i=>gn.has(typeof i)).map(i=>typeof i=="string"?be(i):i.toString()).join("|")})$`),e._zod.parse=(i,r)=>{const s=i.value;return o.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:e}),i}}),si=l("$ZodTransform",(e,t)=>{A.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new ge(e.constructor.name);const i=t.transform(n.value,n);if(o.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new R;return n.value=i,n}});function xt(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}a(xt,"handleOptionalResult");const ai=l("$ZodOptional",(e,t)=>{A.init(e,t),e._zod.optin="optional",e._zod.optout="optional",I(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),I(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ue(n.source)})?$`):void 0}),e._zod.parse=(n,o)=>{if(t.innerType._zod.optin==="optional"){const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>xt(r,n.value)):xt(i,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,o)}}),ci=l("$ZodNullable",(e,t)=>{A.init(e,t),I(e._zod,"optin",()=>t.innerType._zod.optin),I(e._zod,"optout",()=>t.innerType._zod.optout),I(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Ue(n.source)}|null)$`):void 0}),I(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,o)=>n.value===null?n:t.innerType._zod.run(n,o)}),ui=l("$ZodDefault",(e,t)=>{A.init(e,t),e._zod.optin="optional",I(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>_t(r,t)):_t(i,t)}});function _t(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}a(_t,"handleDefaultResult");const li=l("$ZodPrefault",(e,t)=>{A.init(e,t),e._zod.optin="optional",I(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>(o.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,o))}),di=l("$ZodNonOptional",(e,t)=>{A.init(e,t),I(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(o=>o!==void 0)):void 0}),e._zod.parse=(n,o)=>{const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>kt(r,e)):kt(i,e)}});function kt(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}a(kt,"handleNonOptionalResult");const hi=l("$ZodCatch",(e,t)=>{A.init(e,t),I(e._zod,"optin",()=>t.innerType._zod.optin),I(e._zod,"optout",()=>t.innerType._zod.optout),I(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(r=>(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(s=>U(s,o,W()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(r=>U(r,o,W()))},input:n.value}),n.issues=[]),n)}}),fi=l("$ZodPipe",(e,t)=>{A.init(e,t),I(e._zod,"values",()=>t.in._zod.values),I(e._zod,"optin",()=>t.in._zod.optin),I(e._zod,"optout",()=>t.out._zod.optout),I(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,o)=>{if(o.direction==="backward"){const r=t.out._zod.run(n,o);return r instanceof Promise?r.then(s=>le(s,t.in,o)):le(r,t.in,o)}const i=t.in._zod.run(n,o);return i instanceof Promise?i.then(r=>le(r,t.out,o)):le(i,t.out,o)}});function le(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}a(le,"handlePipeResult");const pi=l("$ZodReadonly",(e,t)=>{A.init(e,t),I(e._zod,"propValues",()=>t.innerType._zod.propValues),I(e._zod,"values",()=>t.innerType._zod.values),I(e._zod,"optin",()=>t.innerType._zod.optin),I(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const i=t.innerType._zod.run(n,o);return i instanceof Promise?i.then(St):St(i)}});function St(e){return e.value=Object.freeze(e.value),e}a(St,"handleReadonlyResult");const gi=l("$ZodCustom",(e,t)=>{D.init(e,t),A.init(e,t),e._zod.parse=(n,o)=>n,e._zod.check=n=>{const o=n.value,i=t.fn(o);if(i instanceof Promise)return i.then(r=>Ct(r,n,o,e));Ct(i,n,o,e)}});function Ct(e,t,n,o){if(!e){const i={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(i.params=o._zod.def.params),t.issues.push(ie(i))}}a(Ct,"handleRefineResult");const nt=class nt{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const o=n[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const o={...this.get(n)??{}};delete o.id;const i={...o,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};a(nt,"$ZodRegistry");let Ae=nt;function mi(){return new Ae}a(mi,"registry");const de=mi();function yi(e,t){return new e({type:"string",...g(t)})}a(yi,"_string");function vi(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...g(t)})}a(vi,"_email");function zt(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...g(t)})}a(zt,"_guid");function bi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...g(t)})}a(bi,"_uuid");function wi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...g(t)})}a(wi,"_uuidv4");function xi(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...g(t)})}a(xi,"_uuidv6");function _i(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...g(t)})}a(_i,"_uuidv7");function ki(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...g(t)})}a(ki,"_url");function Si(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...g(t)})}a(Si,"_emoji");function Ci(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...g(t)})}a(Ci,"_nanoid");function zi(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...g(t)})}a(zi,"_cuid");function Ii(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...g(t)})}a(Ii,"_cuid2");function Pi(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...g(t)})}a(Pi,"_ulid");function Ei(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...g(t)})}a(Ei,"_xid");function Oi(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...g(t)})}a(Oi,"_ksuid");function Ai(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...g(t)})}a(Ai,"_ipv4");function Zi(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...g(t)})}a(Zi,"_ipv6");function Ti(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...g(t)})}a(Ti,"_cidrv4");function $i(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...g(t)})}a($i,"_cidrv6");function Fi(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...g(t)})}a(Fi,"_base64");function ji(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...g(t)})}a(ji,"_base64url");function Li(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...g(t)})}a(Li,"_e164");function Di(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...g(t)})}a(Di,"_jwt");function Ni(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...g(t)})}a(Ni,"_isoDateTime");function Bi(e,t){return new e({type:"string",format:"date",check:"string_format",...g(t)})}a(Bi,"_isoDate");function Mi(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...g(t)})}a(Mi,"_isoTime");function Ri(e,t){return new e({type:"string",format:"duration",check:"string_format",...g(t)})}a(Ri,"_isoDuration");function Wi(e,t){return new e({type:"number",checks:[],...g(t)})}a(Wi,"_number");function Ui(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...g(t)})}a(Ui,"_int");function Ki(e,t){return new e({type:"boolean",...g(t)})}a(Ki,"_boolean");function Vi(e){return new e({type:"unknown"})}a(Vi,"_unknown");function Yi(e,t){return new e({type:"never",...g(t)})}a(Yi,"_never");function It(e,t){return new Xt({check:"less_than",...g(t),value:e,inclusive:!1})}a(It,"_lt");function Ce(e,t){return new Xt({check:"less_than",...g(t),value:e,inclusive:!0})}a(Ce,"_lte");function Pt(e,t){return new Gt({check:"greater_than",...g(t),value:e,inclusive:!1})}a(Pt,"_gt");function ze(e,t){return new Gt({check:"greater_than",...g(t),value:e,inclusive:!0})}a(ze,"_gte");function Et(e,t){return new lo({check:"multiple_of",...g(t),value:e})}a(Et,"_multipleOf");function en(e,t){return new fo({check:"max_length",...g(t),maximum:e})}a(en,"_maxLength");function ve(e,t){return new po({check:"min_length",...g(t),minimum:e})}a(ve,"_minLength");function tn(e,t){return new go({check:"length_equals",...g(t),length:e})}a(tn,"_length");function Xi(e,t){return new mo({check:"string_format",format:"regex",...g(t),pattern:e})}a(Xi,"_regex");function Gi(e){return new yo({check:"string_format",format:"lowercase",...g(e)})}a(Gi,"_lowercase");function Ji(e){return new vo({check:"string_format",format:"uppercase",...g(e)})}a(Ji,"_uppercase");function Hi(e,t){return new bo({check:"string_format",format:"includes",...g(t),includes:e})}a(Hi,"_includes");function qi(e,t){return new wo({check:"string_format",format:"starts_with",...g(t),prefix:e})}a(qi,"_startsWith");function Qi(e,t){return new xo({check:"string_format",format:"ends_with",...g(t),suffix:e})}a(Qi,"_endsWith");function ae(e){return new _o({check:"overwrite",tx:e})}a(ae,"_overwrite");function er(e){return ae(t=>t.normalize(e))}a(er,"_normalize");function tr(){return ae(e=>e.trim())}a(tr,"_trim");function nr(){return ae(e=>e.toLowerCase())}a(nr,"_toLowerCase");function or(){return ae(e=>e.toUpperCase())}a(or,"_toUpperCase");function ir(e,t,n){return new e({type:"array",element:t,...g(n)})}a(ir,"_array");function rr(e,t,n){return new e({type:"custom",check:"custom",fn:t,...g(n)})}a(rr,"_refine");function sr(e){const t=ar(n=>(n.addIssue=o=>{if(typeof o=="string")n.issues.push(ie(o,n.value,t._zod.def));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),n.issues.push(ie(i))}},e(n.value,n)));return t}a(sr,"_superRefine");function ar(e,t){const n=new D({check:"custom",...g(t)});return n._zod.check=e,n}a(ar,"_check");const cr=l("ZodISODateTime",(e,t)=>{Fo.init(e,t),E.init(e,t)});function ur(e){return Ni(cr,e)}a(ur,"datetime");const lr=l("ZodISODate",(e,t)=>{jo.init(e,t),E.init(e,t)});function dr(e){return Bi(lr,e)}a(dr,"date");const hr=l("ZodISOTime",(e,t)=>{Lo.init(e,t),E.init(e,t)});function fr(e){return Mi(hr,e)}a(fr,"time");const pr=l("ZodISODuration",(e,t)=>{Do.init(e,t),E.init(e,t)});function gr(e){return Ri(pr,e)}a(gr,"duration");const mr=a((e,t)=>{Rt.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:a(n=>zn(e,n),"value")},flatten:{value:a(n=>Cn(e,n),"value")},addIssue:{value:a(n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Pe,2)},"value")},addIssues:{value:a(n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Pe,2)},"value")},isEmpty:{get(){return e.issues.length===0}}})},"initializer"),N=l("ZodError",mr,{Parent:Error}),yr=Ve(N),vr=Ye(N),br=we(N),wr=xe(N),xr=En(N),_r=On(N),kr=An(N),Sr=Zn(N),Cr=Tn(N),zr=$n(N),Ir=Fn(N),Pr=jn(N),T=l("ZodType",(e,t)=>(A.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(G(t,{checks:[...t.checks??[],...n.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),e.clone=(n,o)=>K(e,n,o),e.brand=()=>e,e.register=((n,o)=>(n.add(e,o),e)),e.parse=(n,o)=>yr(e,n,o,{callee:e.parse}),e.safeParse=(n,o)=>br(e,n,o),e.parseAsync=async(n,o)=>vr(e,n,o,{callee:e.parseAsync}),e.safeParseAsync=async(n,o)=>wr(e,n,o),e.spa=e.safeParseAsync,e.encode=(n,o)=>xr(e,n,o),e.decode=(n,o)=>_r(e,n,o),e.encodeAsync=async(n,o)=>kr(e,n,o),e.decodeAsync=async(n,o)=>Sr(e,n,o),e.safeEncode=(n,o)=>Cr(e,n,o),e.safeDecode=(n,o)=>zr(e,n,o),e.safeEncodeAsync=async(n,o)=>Ir(e,n,o),e.safeDecodeAsync=async(n,o)=>Pr(e,n,o),e.refine=(n,o)=>e.check(vs(n,o)),e.superRefine=n=>e.check(bs(n)),e.overwrite=n=>e.check(ae(n)),e.optional=()=>$t(e),e.nullable=()=>Ft(e),e.nullish=()=>$t(Ft(e)),e.nonoptional=n=>ds(e,n),e.array=()=>rn(e),e.or=n=>sn([e,n]),e.and=n=>ns(e,n),e.transform=n=>jt(e,rs(n)),e.default=n=>cs(e,n),e.prefault=n=>ls(e,n),e.catch=n=>fs(e,n),e.pipe=n=>jt(e,n),e.readonly=()=>ms(e),e.describe=n=>{const o=e.clone();return de.add(o,{description:n}),o},Object.defineProperty(e,"description",{get(){var n;return(n=de.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return de.get(e);const o=e.clone();return de.add(o,n[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),nn=l("_ZodString",(e,t)=>{Xe.init(e,t),T.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...o)=>e.check(Xi(...o)),e.includes=(...o)=>e.check(Hi(...o)),e.startsWith=(...o)=>e.check(qi(...o)),e.endsWith=(...o)=>e.check(Qi(...o)),e.min=(...o)=>e.check(ve(...o)),e.max=(...o)=>e.check(en(...o)),e.length=(...o)=>e.check(tn(...o)),e.nonempty=(...o)=>e.check(ve(1,...o)),e.lowercase=o=>e.check(Gi(o)),e.uppercase=o=>e.check(Ji(o)),e.trim=()=>e.check(tr()),e.normalize=(...o)=>e.check(er(...o)),e.toLowerCase=()=>e.check(nr()),e.toUpperCase=()=>e.check(or())}),Er=l("ZodString",(e,t)=>{Xe.init(e,t),nn.init(e,t),e.email=n=>e.check(vi(Or,n)),e.url=n=>e.check(ki(Ar,n)),e.jwt=n=>e.check(Di(Vr,n)),e.emoji=n=>e.check(Si(Zr,n)),e.guid=n=>e.check(zt(Ot,n)),e.uuid=n=>e.check(bi(he,n)),e.uuidv4=n=>e.check(wi(he,n)),e.uuidv6=n=>e.check(xi(he,n)),e.uuidv7=n=>e.check(_i(he,n)),e.nanoid=n=>e.check(Ci(Tr,n)),e.guid=n=>e.check(zt(Ot,n)),e.cuid=n=>e.check(zi($r,n)),e.cuid2=n=>e.check(Ii(Fr,n)),e.ulid=n=>e.check(Pi(jr,n)),e.base64=n=>e.check(Fi(Wr,n)),e.base64url=n=>e.check(ji(Ur,n)),e.xid=n=>e.check(Ei(Lr,n)),e.ksuid=n=>e.check(Oi(Dr,n)),e.ipv4=n=>e.check(Ai(Nr,n)),e.ipv6=n=>e.check(Zi(Br,n)),e.cidrv4=n=>e.check(Ti(Mr,n)),e.cidrv6=n=>e.check($i(Rr,n)),e.e164=n=>e.check(Li(Kr,n)),e.datetime=n=>e.check(ur(n)),e.date=n=>e.check(dr(n)),e.time=n=>e.check(fr(n)),e.duration=n=>e.check(gr(n))});function z(e){return yi(Er,e)}a(z,"string");const E=l("ZodStringFormat",(e,t)=>{P.init(e,t),nn.init(e,t)}),Or=l("ZodEmail",(e,t)=>{zo.init(e,t),E.init(e,t)}),Ot=l("ZodGUID",(e,t)=>{So.init(e,t),E.init(e,t)}),he=l("ZodUUID",(e,t)=>{Co.init(e,t),E.init(e,t)}),Ar=l("ZodURL",(e,t)=>{Io.init(e,t),E.init(e,t)}),Zr=l("ZodEmoji",(e,t)=>{Po.init(e,t),E.init(e,t)}),Tr=l("ZodNanoID",(e,t)=>{Eo.init(e,t),E.init(e,t)}),$r=l("ZodCUID",(e,t)=>{Oo.init(e,t),E.init(e,t)}),Fr=l("ZodCUID2",(e,t)=>{Ao.init(e,t),E.init(e,t)}),jr=l("ZodULID",(e,t)=>{Zo.init(e,t),E.init(e,t)}),Lr=l("ZodXID",(e,t)=>{To.init(e,t),E.init(e,t)}),Dr=l("ZodKSUID",(e,t)=>{$o.init(e,t),E.init(e,t)}),Nr=l("ZodIPv4",(e,t)=>{No.init(e,t),E.init(e,t)}),Br=l("ZodIPv6",(e,t)=>{Bo.init(e,t),E.init(e,t)}),Mr=l("ZodCIDRv4",(e,t)=>{Mo.init(e,t),E.init(e,t)}),Rr=l("ZodCIDRv6",(e,t)=>{Ro.init(e,t),E.init(e,t)}),Wr=l("ZodBase64",(e,t)=>{Wo.init(e,t),E.init(e,t)}),Ur=l("ZodBase64URL",(e,t)=>{Ko.init(e,t),E.init(e,t)}),Kr=l("ZodE164",(e,t)=>{Vo.init(e,t),E.init(e,t)}),Vr=l("ZodJWT",(e,t)=>{Xo.init(e,t),E.init(e,t)}),on=l("ZodNumber",(e,t)=>{Ht.init(e,t),T.init(e,t),e.gt=(o,i)=>e.check(Pt(o,i)),e.gte=(o,i)=>e.check(ze(o,i)),e.min=(o,i)=>e.check(ze(o,i)),e.lt=(o,i)=>e.check(It(o,i)),e.lte=(o,i)=>e.check(Ce(o,i)),e.max=(o,i)=>e.check(Ce(o,i)),e.int=o=>e.check(At(o)),e.safe=o=>e.check(At(o)),e.positive=o=>e.check(Pt(0,o)),e.nonnegative=o=>e.check(ze(0,o)),e.negative=o=>e.check(It(0,o)),e.nonpositive=o=>e.check(Ce(0,o)),e.multipleOf=(o,i)=>e.check(Et(o,i)),e.step=(o,i)=>e.check(Et(o,i)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function _(e){return Wi(on,e)}a(_,"number");const Yr=l("ZodNumberFormat",(e,t)=>{Go.init(e,t),on.init(e,t)});function At(e){return Ui(Yr,e)}a(At,"int");const Xr=l("ZodBoolean",(e,t)=>{Jo.init(e,t),T.init(e,t)});function q(e){return Ki(Xr,e)}a(q,"boolean");const Gr=l("ZodUnknown",(e,t)=>{Ho.init(e,t),T.init(e,t)});function Zt(){return Vi(Gr)}a(Zt,"unknown");const Jr=l("ZodNever",(e,t)=>{qo.init(e,t),T.init(e,t)});function Hr(e){return Yi(Jr,e)}a(Hr,"never");const qr=l("ZodArray",(e,t)=>{Qo.init(e,t),T.init(e,t),e.element=t.element,e.min=(n,o)=>e.check(ve(n,o)),e.nonempty=n=>e.check(ve(1,n)),e.max=(n,o)=>e.check(en(n,o)),e.length=(n,o)=>e.check(tn(n,o)),e.unwrap=()=>e.element});function rn(e,t){return ir(qr,e,t)}a(rn,"array");const Qr=l("ZodObject",(e,t)=>{ti.init(e,t),T.init(e,t),I(e,"shape",()=>t.shape),e.keyof=()=>B(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Zt()}),e.loose=()=>e.clone({...e._zod.def,catchall:Zt()}),e.strict=()=>e.clone({...e._zod.def,catchall:Hr()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>wn(e,n),e.safeExtend=n=>xn(e,n),e.merge=n=>_n(e,n),e.pick=n=>vn(e,n),e.omit=n=>bn(e,n),e.partial=(...n)=>kn(an,e,n[0]),e.required=(...n)=>Sn(cn,e,n[0])});function C(e,t){const n={type:"object",shape:e??{},...g(t)};return new Qr(n)}a(C,"object");const es=l("ZodUnion",(e,t)=>{ni.init(e,t),T.init(e,t),e.options=t.options});function sn(e,t){return new es({type:"union",options:e,...g(t)})}a(sn,"union");const ts=l("ZodIntersection",(e,t)=>{oi.init(e,t),T.init(e,t)});function ns(e,t){return new ts({type:"intersection",left:e,right:t})}a(ns,"intersection");const os=l("ZodRecord",(e,t)=>{ii.init(e,t),T.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Tt(e,t,n){return new os({type:"record",keyType:e,valueType:t,...g(n)})}a(Tt,"record");const Ze=l("ZodEnum",(e,t)=>{ri.init(e,t),T.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(o,i)=>{const r={};for(const s of o)if(n.has(s))r[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ze({...t,checks:[],...g(i),entries:r})},e.exclude=(o,i)=>{const r={...t.entries};for(const s of o)if(n.has(s))delete r[s];else throw new Error(`Key ${s} not found in enum`);return new Ze({...t,checks:[],...g(i),entries:r})}});function B(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Ze({type:"enum",entries:n,...g(t)})}a(B,"_enum");const is=l("ZodTransform",(e,t)=>{si.init(e,t),T.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new ge(e.constructor.name);n.addIssue=r=>{if(typeof r=="string")n.issues.push(ie(r,n.value,t));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(ie(s))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(r=>(n.value=r,n)):(n.value=i,n)}});function rs(e){return new is({type:"transform",transform:e})}a(rs,"transform");const an=l("ZodOptional",(e,t)=>{ai.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $t(e){return new an({type:"optional",innerType:e})}a($t,"optional");const ss=l("ZodNullable",(e,t)=>{ci.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ft(e){return new ss({type:"nullable",innerType:e})}a(Ft,"nullable");const as=l("ZodDefault",(e,t)=>{ui.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function cs(e,t){return new as({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Bt(t)}})}a(cs,"_default");const us=l("ZodPrefault",(e,t)=>{li.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ls(e,t){return new us({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Bt(t)}})}a(ls,"prefault");const cn=l("ZodNonOptional",(e,t)=>{di.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ds(e,t){return new cn({type:"nonoptional",innerType:e,...g(t)})}a(ds,"nonoptional");const hs=l("ZodCatch",(e,t)=>{hi.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function fs(e,t){return new hs({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}a(fs,"_catch");const ps=l("ZodPipe",(e,t)=>{fi.init(e,t),T.init(e,t),e.in=t.in,e.out=t.out});function jt(e,t){return new ps({type:"pipe",in:e,out:t})}a(jt,"pipe");const gs=l("ZodReadonly",(e,t)=>{pi.init(e,t),T.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ms(e){return new gs({type:"readonly",innerType:e})}a(ms,"readonly");const ys=l("ZodCustom",(e,t)=>{gi.init(e,t),T.init(e,t)});function vs(e,t={}){return rr(ys,e,t)}a(vs,"refine");function bs(e){return sr(e)}a(bs,"superRefine");const ws=C({pxFromCanvasLeft:_().default(100),pxFromCanvasTop:_().default(100)}).default({pxFromCanvasLeft:100,pxFromCanvasTop:100}),xs=C({widthInPx:_().default(100),lengthInPx:_().default(100)}).default({widthInPx:100,lengthInPx:100}),_s=C({width:_().default(1920),height:_().default(1080),backgroundColor:z().default("rgba(0, 0, 0, 0)")}).default({width:1920,height:1080,backgroundColor:"rgba(0, 0, 0, 0)"}),ce=C({positionOnCanvas:ws,hitboxSize:xs,layerLevel:_().default(10)}),Z=ce.extend({input:C({keyboard:C({keyCode:z().nullable().default(null)}).default({keyCode:null}),mouse:C({button:_().nullable().default(null),wheel:B(["up","down"]).nullable().default(null)}).default({button:null,wheel:null}),gamepad:C({stick:C({type:B(["left","right"]).nullable().default(null),axis:B(["X","Y"]).nullable().default(null),direction:B(["positive","negative"]).nullable().default(null)}).default({type:null,axis:null,direction:null}),button:C({index:_().nullable().default(null)}).default({index:null})}).default({stick:{type:null,axis:null,direction:null},button:{index:null}})}).default({keyboard:{keyCode:null},mouse:{button:null,wheel:null},gamepad:{stick:{type:null,axis:null,direction:null},button:{index:null}}}),processing:C({radialCompensationAxis:_().default(-1),multiplier:_().default(1),antiDeadzone:_().default(.01),fadeOutDuration:_().default(.2)}).default({radialCompensationAxis:-1,multiplier:1,antiDeadzone:.01,fadeOutDuration:.2}),display:C({text:z().default(""),fillStyle:z().default("#ffffff"),fillStyleBackground:z().default("#000000"),strokeStyle:z().default("#808080"),strokeWidth:_().default(2),fontStyle:C({textAlign:B(["left","right","center","start","end"]).default("center"),fillStyle:z().default("black"),font:z().default("30px Lucida Console"),strokeStyle:z().default("white"),strokeWidth:_().default(3)}).default({textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3}),fillDirection:B(["normal","reversed"]).default("normal")}).default({text:"",fillStyle:"#ffffff",fillStyleBackground:"#000000",strokeStyle:"#808080",strokeWidth:2,fontStyle:{textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3},fillDirection:"normal"})}),V=C({strokeStyle:z(),fillStyle:z(),lineWidth:_(),opacity:_()}).partial(),ke=ce.extend({hitboxSize:C({widthInPx:_().default(200),lengthInPx:_().default(200)}).default({widthInPx:200,lengthInPx:200}),input:C({xAxes:Tt(z(),q()).default({0:!0}),yAxes:Tt(z(),q()).default({1:!0}),xKeyCodePositive:z().nullable().default("ArrowRight"),xKeyCodeNegative:z().nullable().default("ArrowLeft"),yKeyCodePositive:z().nullable().default("ArrowDown"),yKeyCodeNegative:z().nullable().default("ArrowUp"),invertX:q().default(!1),invertY:q().default(!1)}).default({xAxes:{0:!0},yAxes:{1:!0},xKeyCodePositive:"ArrowRight",xKeyCodeNegative:"ArrowLeft",yKeyCodePositive:"ArrowDown",yKeyCodeNegative:"ArrowUp",invertX:!1,invertY:!1}),processing:C({deadzone:_().default(.03),antiDeadzone:_().default(0)}).default({deadzone:.03,antiDeadzone:0}),display:C({radius:_().default(100),stickRadius:_().optional(),fillStyle:z().optional(),fillStyleStick:z().optional(),fillStyleBackground:z().optional(),backgroundStyle:V.default({strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"}),xLineStyle:V.default({strokeStyle:"#FF0000",lineWidth:2,opacity:.5}),yLineStyle:V.default({strokeStyle:"#00FF00",lineWidth:2,opacity:.5}),deadzoneStyle:V.default({fillStyle:"#524d4d"}),inputVectorStyle:V.default({strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5}),unitVectorStyle:V.default({strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5}),crosshairStyle:V.default({fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2})}).default({radius:100,backgroundStyle:{strokeStyle:"rgba(180, 180, 180, 0.5)",lineWidth:2,fillStyle:"rgba(0, 0, 0, 0)"},xLineStyle:{strokeStyle:"#FF0000",lineWidth:2,opacity:.5},yLineStyle:{strokeStyle:"#00FF00",lineWidth:2,opacity:.5},deadzoneStyle:{fillStyle:"#524d4d"},inputVectorStyle:{strokeStyle:"rgba(255, 255, 0, 1.0)",lineWidth:2,opacity:.5},unitVectorStyle:{strokeStyle:"rgba(0, 0, 255, 1.0)",lineWidth:2,opacity:.5},crosshairStyle:{fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:2}})}),M=ce.extend({hitboxSize:C({widthInPx:_().default(200),lengthInPx:_().default(50)}).default({widthInPx:200,lengthInPx:50}),layerLevel:_().default(20),text:z().default("Sample text"),textStyle:C({textAlign:B(["left","right","center","start","end"]).default("center"),fillStyle:z().default("black"),font:z().default("30px Lucida Console"),strokeStyle:z().default("white"),strokeWidth:_().default(3)}).default({textAlign:"center",fillStyle:"black",font:"30px Lucida Console",strokeStyle:"white",strokeWidth:3}),shouldStroke:q().default(!0)}),Ge=ce.extend({layerLevel:_().default(0),src:z().default("./viewWhichRendersConfigurationAndUi/_assets/images/KeyDefault.png"),opacity:_().min(0).max(1).default(1)}),Je=ce.extend({hitboxSize:C({widthInPx:_().default(640),lengthInPx:_().default(480)}).default({widthInPx:640,lengthInPx:480}),url:z().default("https://www.youtube.com/embed/dQw4w9WgXcQ"),opacity:_().min(0).max(1).default(1),interactionMode:B(["readonly","interactableOnFocus"]).default("interactableOnFocus"),inputForwardingInElectron:q().default(!1)}),ks=sn([C({LinearInputIndicator:Z}),C({PlanarInputIndicator:ke}),C({Text:M}),C({Image:Ge}),C({WebEmbed:Je})]),Ss=C({canvas:_s,objects:rn(ks)});function Cs(e){const t=Ss.safeParse(e);return t.success?{success:!0,data:t.data}:{success:!1,error:t.error}}a(Cs,"validateCustomisableCanvasConfig");function zs(e){return e.type===null||e.axis===null?null:(e.type==="left"?0:2)+(e.axis==="X"?0:1)}a(zs,"asConventionalGamepadAxisNumber");const ot=class ot extends Y{constructor(t,n){super(n),this.config=Z.parse(t||{}),this.runtimeState={value:0,previousValue:0,opacity:1}}update(t){let n=0,o=0;const i=window.keyboard,r=this.config.input.keyboard.keyCode;n+=r&&i[r]?1:0;const s=window.mouse,u=this.config.input.mouse.button;u!==null&&s.buttons[u]&&(n+=1);const c=this.config.input.mouse.wheel;c!==null&&s.wheelEvents&&(c==="up"&&s.wheelEvents.up||c==="down"&&s.wheelEvents.down)&&(n+=1);const d=this.config.processing.antiDeadzone;let h=Math.max(0,d-o*.5);const y=window.gamepads;if(y)for(let w=0;w<y.length;w++){const p=y[w];if(!p)continue;const k=this.config.input.gamepad.stick,F=zs(k);if(p.axes&&F!==null){const x=p.axes[F],$=k.direction==="negative",j=this.config.processing.radialCompensationAxis,L=j>=0?p.axes[j]:void 0;x!=null&&($===!0&&x<0||$===!1&&x>0)&&(j>=0&&L!==void 0?n+=Math.abs(x)*Math.sqrt(1+2*Math.pow(Math.abs(L),2)):j<0&&(n+=(Math.abs(x)-h)/(1-h))),j>=0&&L!==void 0&&(o+=Math.abs(L))}const O=this.config.input.gamepad.button.index;if(p.buttons&&O!==null){const x=p.buttons[O];x&&(n+=x.value)}}h>=1&&(h=.999);const f=this.config.processing.multiplier,m=Math.max(Math.min((n-h)/(1-h)*f,1),0),v=this.config.processing.fadeOutDuration;if(m>0)this.runtimeState.value=m,this.runtimeState.opacity=1;else if(v>0&&this.runtimeState.value>0){const w=1/v;this.runtimeState.opacity=this.runtimeState.opacity*Math.exp(-w*t),this.runtimeState.opacity<.001&&(this.runtimeState.opacity=0,this.runtimeState.value=0)}else this.runtimeState.value=0,this.runtimeState.opacity=1;return!0}draw(t,n,o){n.fillStyle=this.config.display.fillStyleBackground,n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx);const i=n.globalAlpha;n.globalAlpha*=this.runtimeState.opacity,n.fillStyle=this.config.display.fillStyle,this.config.display.fillDirection==="reversed"?n.fillRect(0,this.config.hitboxSize.lengthInPx,this.config.hitboxSize.widthInPx,-this.config.hitboxSize.lengthInPx*this.runtimeState.value):n.fillRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx*this.runtimeState.value),n.globalAlpha=i,n.strokeStyle=this.config.display.strokeStyle,n.lineWidth=this.config.display.strokeWidth,n.strokeRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx);const s=this.config.display.text,u=this.config.display.fontStyle,c=this.config.hitboxSize.widthInPx*.5,d=this.config.hitboxSize.lengthInPx*.5;te(n,u),n.strokeStyle=u.strokeStyle??"white",n.lineWidth=u.strokeWidth??3,n.strokeText(s,c,d),Lt(n,c,d,s,u)}};a(ot,"LinearInputIndicator");let Te=ot;const S=class S{constructor(t,n,o){this.x=t||0,this.y=n||0,this.z=o||0}negative(){return new S(-this.x,-this.y,-this.z)}add(t){return t instanceof S?new S(this.x+t.x,this.y+t.y,this.z+t.z):new S(this.x+t,this.y+t,this.z+t)}subtract(t){return t instanceof S?new S(this.x-t.x,this.y-t.y,this.z-t.z):new S(this.x-t,this.y-t,this.z-t)}multiply(t){return t instanceof S?new S(this.x*t.x,this.y*t.y,this.z*t.z):new S(this.x*t,this.y*t,this.z*t)}divide(t){return t instanceof S?new S(this.x/t.x,this.y/t.y,this.z/t.z):new S(this.x/t,this.y/t,this.z/t)}equals(t){return this.x==t.x&&this.y==t.y&&this.z==t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new S(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}length(){return Math.sqrt(this.dot(this))}unit(){return this.divide(this.length())}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}}angleTo(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}toArray(t){return[this.x,this.y,this.z].slice(0,t||3)}clone(){return new S(this.x,this.y,this.z)}init(t,n,o){return this.x=t,this.y=n,this.z=o,this}static negative(t,n){return n.x=-t.x,n.y=-t.y,n.z=-t.z,n}static add(t,n,o){return n instanceof S?(o.x=t.x+n.x,o.y=t.y+n.y,o.z=t.z+n.z):(o.x=t.x+n,o.y=t.y+n,o.z=t.z+n),o}static subtract(t,n,o){return n instanceof S?(o.x=t.x-n.x,o.y=t.y-n.y,o.z=t.z-n.z):(o.x=t.x-n,o.y=t.y-n,o.z=t.z-n),o}static multiply(t,n,o){return n instanceof S?(o.x=t.x*n.x,o.y=t.y*n.y,o.z=t.z*n.z):(o.x=t.x*n,o.y=t.y*n,o.z=t.z*n),o}static divide(t,n,o){return n instanceof S?(o.x=t.x/n.x,o.y=t.y/n.y,o.z=t.z/n.z):(o.x=t.x/n,o.y=t.y/n,o.z=t.z/n),o}static cross(t,n,o){return o.x=t.y*n.z-t.z*n.y,o.y=t.z*n.x-t.x*n.z,o.z=t.x*n.y-t.y*n.x,o}static unit(t,n){const o=t.length();return n.x=t.x/o,n.y=t.y/o,n.z=t.z/o,n}static fromAngles(t,n){return new S(Math.cos(t)*Math.cos(n),Math.sin(n),Math.sin(t)*Math.cos(n))}static randomDirection(){return S.fromAngles(Math.random()*Math.PI*2,Math.asin(Math.random()*2-1))}static min(t,n){return new S(Math.min(t.x,n.x),Math.min(t.y,n.y),Math.min(t.z,n.z))}static max(t,n){return new S(Math.max(t.x,n.x),Math.max(t.y,n.y),Math.max(t.z,n.z))}static lerp(t,n,o){return n.subtract(t).multiply(o).add(t)}static fromArray(t){return new S(t[0],t[1],t[2])}static angleBetween(t,n){return t.angleTo(n)}};a(S,"Vector");let re=S;const it=class it extends Y{constructor(t,n){super(n),this.config=ke.parse(t||{}),this.runtimeState={inputVector:new re(0,0),previousX:0,previousY:0}}update(){let t=0,n=0;const o=window.keyboard;if(o){const r=this.config.input.xKeyCodePositive,s=this.config.input.xKeyCodeNegative,u=this.config.input.yKeyCodePositive,c=this.config.input.yKeyCodeNegative;r&&o[r]&&(t+=1),s&&o[s]&&(t-=1),u&&o[u]&&(n+=1),c&&o[c]&&(n-=1)}const i=window.gamepads;if(i)for(let r=0;r<i.length;r++){const s=i[r];if(s&&s.axes)for(let u=0;u<s.axes.length;u++){const c=s.axes[u];this.config.input.xAxes[u]&&c!==void 0&&(t+=c),this.config.input.yAxes[u]&&c!==void 0&&(n+=c)}}return this.config.input.invertX&&(t*=-1),this.config.input.invertY&&(n*=-1),this.runtimeState.previousX=this.runtimeState.inputVector.x,this.runtimeState.previousY=this.runtimeState.inputVector.y,this.runtimeState.inputVector.x=Math.max(Math.min(t,1),-1),this.runtimeState.inputVector.y=Math.max(Math.min(n,1),-1),this.runtimeState.previousX!==this.runtimeState.inputVector.x||this.runtimeState.previousY!==this.runtimeState.inputVector.y}draw(t,n){te(n,{lineCap:"round"});const o=this.config.display.radius;n.transform(1,0,0,1,o,o),n.beginPath(),Se(n,0,0,o,0,2*Math.PI,this.config.display.backgroundStyle),n.stroke(),n.fill();const i=this.config.processing.deadzone;if(i>0&&(n.beginPath(),Se(n,0,0,o*i,0,2*Math.PI,this.config.display.deadzoneStyle),n.fill()),n.save(),this.config.display.xLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.xLineStyle.opacity),n.beginPath(),pt(n,0,0,this.runtimeState.inputVector.x*o,0,this.config.display.xLineStyle),n.stroke(),n.restore(),n.save(),this.config.display.yLineStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.yLineStyle.opacity),n.beginPath(),pt(n,0,0,0,this.runtimeState.inputVector.y*o,this.config.display.yLineStyle),n.stroke(),n.restore(),this.runtimeState.inputVector.length()>i){const r=this.runtimeState.inputVector.unit(),s=this.runtimeState.inputVector.toAngles(),u=this.config.processing.antiDeadzone,c=re.fromAngles(s.theta,s.phi).multiply((this.runtimeState.inputVector.length()-u)/(1-u));n.save(),this.config.display.unitVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.unitVectorStyle.opacity),n.beginPath(),ft(n,0,0,r.x*o,r.y*o,this.config.display.unitVectorStyle),n.stroke(),n.restore(),n.save(),this.config.display.inputVectorStyle.opacity!==void 0&&(n.globalAlpha*=this.config.display.inputVectorStyle.opacity),n.beginPath(),ft(n,0,0,c.x*o,c.y*o,this.config.display.inputVectorStyle),n.stroke(),n.restore()}n.beginPath(),Se(n,0,0,2,0,2*Math.PI,this.config.display.crosshairStyle),n.fill(),n.stroke(),n.closePath()}};a(it,"PlanarInputIndicator");let $e=it;const rt=class rt extends Y{constructor(t,n){super(n),this.config=M.parse(t||{})}update(){return!0}draw(t,n){n.beginPath(),n.textBaseline="middle",n.textAlign="left";const o=0,i=this.config.hitboxSize.lengthInPx/2;this.config.shouldStroke&&(n.strokeStyle=this.config.textStyle.strokeStyle??"white",n.lineWidth=this.config.textStyle.strokeWidth??3,n.strokeText(this.config.text,o,i)),Lt(n,o,i,this.config.text,this.config.textStyle)}};a(rt,"Text");let Fe=rt;var Q;let Is=(Q=class extends Y{constructor(t,n){super(n),this.config=Ge.parse(t||{}),this.runtimeState={imageElement:new window.Image},this.runtimeState.imageElement.src=this.config.src}update(){return this.runtimeState.imageElement.complete}draw(t,n){if(this.runtimeState.imageElement.complete){n.save(),n.globalAlpha*=this.config.opacity;try{n.drawImage(this.runtimeState.imageElement,0,0,this.runtimeState.imageElement.width,this.runtimeState.imageElement.height,0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx)}catch{}n.restore()}}},a(Q,"Image"),Q);const Ie=new Map,st=class st extends Y{constructor(t,n){super(n),this.config=Je.parse(t||{}),this.runtimeState={embedElement:null,inputForwardingCleanupInElectron:[]},this.findOrCreateEmbed()}findOrCreateEmbed(){const t=Ie.get(this.objArrayIdx);if(t&&t.parentNode){this.runtimeState.embedElement=t,t.getAttribute("src")!==this.config.url&&t.setAttribute("src",this.config.url);return}const n=typeof window<"u"&&"electronAPI"in window;let o;if(n){const r=document.createElement("webview");r.setAttribute("src",this.config.url),r.setAttribute("partition","persist:webembed"),r.setAttribute("useragent","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"),r.setAttribute("allowpopups",""),r.addEventListener("did-fail-load",s=>{console.error("[WebEmbed] Failed to load:",s.errorCode,s.errorDescription)}),r.addEventListener("console-message",s=>{console.log("[WebEmbed Console]",s.level,s.message)}),r.addEventListener("did-finish-load",()=>{console.log("[WebEmbed] Successfully loaded:",this.config.url)}),o=r,console.log("[WebEmbed] Using <webview> tag for Electron with user-agent spoofing")}else{const r=document.createElement("iframe");r.src=this.config.url,r.setAttribute("referrerpolicy","strict-origin-when-cross-origin"),r.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),o=r,console.log("[WebEmbed] Using <iframe> tag for web browser")}o.style.position="absolute";const i=50;o.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+i+"px",o.style.top=this.config.positionOnCanvas.pxFromCanvasTop+i+"px",o.style.width=this.config.hitboxSize.widthInPx-i*2+"px",o.style.height=this.config.hitboxSize.lengthInPx-i*2+"px",o.style.opacity=this.config.opacity.toString(),o.style.border="2px solid #B4B4B4",o.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto",o.style.zIndex="1",o.setAttribute("allowfullscreen",""),o.setAttribute("allowtransparency","true"),document.body.appendChild(o),this.runtimeState.embedElement=o,Ie.set(this.objArrayIdx,o),n&&this.config.inputForwardingInElectron&&this.setupInputForwardingInElectron(o)}setupInputForwardingInElectron(t){if(!window.electronAPI){console.warn("[WebEmbed] inputForwardingInElectron enabled but not in Electron environment");return}const n=t;console.log("[WebEmbed] Setting up input forwarding to embedded page");const o=a(c=>{n.sendInputEvent({type:"keyDown",keyCode:String.fromCharCode(c.keycode)})},"keyDownHandler");window.electronAPI.onGlobalKeyDown(o);const i=a(c=>{n.sendInputEvent({type:"keyUp",keyCode:String.fromCharCode(c.keycode)})},"keyUpHandler");window.electronAPI.onGlobalKeyUp(i);const r=a(c=>{n.sendInputEvent({type:"mouseDown",button:c.button===1?"left":c.button===2?"right":"middle",x:c.x,y:c.y,clickCount:1})},"mouseDownHandler");window.electronAPI.onGlobalMouseDown(r);const s=a(c=>{n.sendInputEvent({type:"mouseUp",button:c.button===1?"left":c.button===2?"right":"middle",x:c.x,y:c.y,clickCount:1})},"mouseUpHandler");window.electronAPI.onGlobalMouseUp(s);const u=a(c=>{n.sendInputEvent({type:"mouseMove",x:c.x,y:c.y})},"mouseMoveHandler");window.electronAPI.onGlobalMouseMove(u),this.runtimeState.inputForwardingCleanupInElectron=[()=>console.log("[WebEmbed] Input forwarding cleanup (listeners remain active)")]}update(){return this.runtimeState.embedElement&&(this.runtimeState.embedElement.style.left=this.config.positionOnCanvas.pxFromCanvasLeft+50+"px",this.runtimeState.embedElement.style.top=this.config.positionOnCanvas.pxFromCanvasTop+50+"px",this.runtimeState.embedElement.style.width=this.config.hitboxSize.widthInPx-100+"px",this.runtimeState.embedElement.style.height=this.config.hitboxSize.lengthInPx-100+"px",this.runtimeState.embedElement.style.opacity=this.config.opacity.toString(),this.runtimeState.embedElement.style.pointerEvents=this.config.interactionMode==="readonly"?"none":"auto"),!1}draw(t,n,o=!1){this.runtimeState.embedElement&&(this.runtimeState.embedElement.style.display=o?"none":"block"),n.strokeStyle="#FF00FF",n.lineWidth=2,n.strokeRect(0,0,this.config.hitboxSize.widthInPx,this.config.hitboxSize.lengthInPx),o&&(n.fillStyle="#808080",n.fillRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.strokeStyle="#B4B4B4",n.lineWidth=2,n.strokeRect(50,50,this.config.hitboxSize.widthInPx-100,this.config.hitboxSize.lengthInPx-100),n.fillStyle="black",n.font="14px monospace",n.fillText(this.config.url,55,40),n.font="20px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText("WebEmbed",this.config.hitboxSize.widthInPx/2,this.config.hitboxSize.lengthInPx/2))}cleanup(){var t;this.runtimeState.inputForwardingCleanupInElectron&&(this.runtimeState.inputForwardingCleanupInElectron.forEach(n=>n()),this.runtimeState.inputForwardingCleanupInElectron=[]),(t=this.runtimeState.embedElement)!=null&&t.parentNode&&(this.runtimeState.embedElement.parentNode.removeChild(this.runtimeState.embedElement),this.runtimeState.embedElement=null),Ie.delete(this.objArrayIdx)}};a(st,"WebEmbed");let je=st;const ne={LinearInputIndicator:Te,PlanarInputIndicator:$e,Text:Fe,Image:Is,WebEmbed:je};function Ps(e){return e in ne}a(Ps,"isCanvasObjectClassName");function Le(e,t){for(const n in e)if(Ps(n)){const o=ne[n],i=e[n];return new o(i,t)}throw new Error("Invalid config: no valid class name found")}a(Le,"deserializeCanvasObject");const at=class at{constructor(){this.className="PropertyEdit",this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.deleteCallback=null,this.pendingChanges=new Map}hidePropertyEdit(){const t=document.getElementById("propertyTable"),n=document.getElementById("sceneConfigText"),o=document.getElementById("leftPanel"),i=document.getElementById("containerForPossibleEditorWindows");if(!(!t||!o)){if(this.configManager&&this.targetObjectIndex!==null&&this.pendingChanges.size>0&&(this.configManager.updateObject(this.targetObjectIndex,this.pendingChanges),this.pendingChanges.clear()),n&&!n.hidden&&this.applySceneConfig&&(document.activeElement===n||n.dataset.modified==="true"))try{const s=JSON.parse(n.value);this.applySceneConfig(s),n.dataset.modified="false"}catch(s){console.error("Invalid JSON in canvas config:",s),alert("Invalid JSON syntax. Please fix the configuration.");return}for(;t.firstChild!==null;)t.removeChild(t.firstChild);n&&(n.hidden=!0,n.value=""),t&&(t.hidden=!0),o&&(o.hidden=!0),i&&(i.hidden=!0),this.targetObject=null,this.targetObjectIndex=null,this.configManager=null,this.targetScene=null,this.applySceneConfig=null,this.pendingChanges.clear()}}showPropertyEdit(t,n,o,i,r){this.targetObject=n,this.targetObjectIndex=o,this.configManager=i,this.deleteCallback=r||null,this.pendingChanges.clear();const s=document.getElementById("containerForPossibleEditorWindows"),u=document.getElementById("propertyTable"),c=document.getElementById("sceneConfigText"),d=document.getElementById("editorTitle"),h=document.getElementById("leftPanel"),y=document.getElementById("rightPanel");if(!s||!u||!d||!h)return;h.hidden=!1,c&&(c.hidden=!0),u.hidden=!1,y&&(y.hidden=!0);const f=Object.keys(t)[0]||"unknown",m=t[f];for(d.innerHTML=f;u.firstChild!==null;)u.removeChild(u.firstChild);if(this.renderProperties(u,[],m,m),this.deleteCallback){const v=document.createElement("tr");v.className="property";const w=document.createElement("td");w.colSpan=2,w.style.paddingTop="20px";const p=document.createElement("button");p.textContent="Delete Object",p.style.width="100%",p.style.padding="10px",p.style.backgroundColor="rgba(120, 40, 40, 0.9)",p.style.color="#cdc1c1",p.style.border="1px solid #B4B4B4",p.style.cursor="pointer",p.style.fontFamily="Lucida Console",p.style.fontSize="1em",p.addEventListener("click",()=>{confirm("Delete this object?")&&(this.deleteCallback&&this.deleteCallback(),this.hidePropertyEdit())}),w.appendChild(p),v.appendChild(w),u.appendChild(v)}s.hidden=!1}showCanvasConfig(t,n,o){this.targetScene=t,this.applySceneConfig=o;const i=document.getElementById("containerForPossibleEditorWindows"),r=document.getElementById("propertyTable"),s=document.getElementById("sceneConfigText"),u=document.getElementById("editorTitle"),c=document.getElementById("leftPanel");!i||!r||!s||!u||!c||(c.hidden=!1,r.hidden=!0,s.hidden=!1,u.innerHTML="Canvas Configuration",s.value=JSON.stringify(t,null,2),s.dataset.modified="false",s.oninput=()=>{s.dataset.modified="true"})}renderProperties(t,n,o,i){if(this.isRecord(o))for(const r in o){const s=[...n,r],u=o[r],c=this.getNestedValue(i,s);if(this.isPlainObject(u)){const d=this.createPropertyHeader(r,n.length);t.appendChild(d),this.renderProperties(t,s,u,i)}else{const d=this.createPropertyRow(r,c,s,i,n.length);t.appendChild(d)}}}isRecord(t){return this.isPlainObject(t)}createPropertyHeader(t,n){const o=document.createElement("div");return o.style.marginLeft=`${n*20}px`,o.style.marginTop="8px",o.style.marginBottom="4px",o.style.color="#AAAAAA",o.style.fontWeight="bold",o.textContent=t+":",o}createPropertyRow(t,n,o,i,r){const s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.marginLeft=`${r*20}px`,s.style.marginBottom="4px",s.style.gap="10px";const u=document.createElement("label");u.textContent=t+":",u.style.minWidth="120px",u.style.color="#FFFFFF",s.appendChild(u);const c=this.createInput(n,o,i);return s.appendChild(c),s}createInput(t,n,o){const i=document.createElement("input");return i.type="text",i.value=this.valueToString(t),i.style.width="200px",i.style.padding="4px",i.style.fontFamily="monospace",i.addEventListener("input",()=>{try{const r=this.parseValue(i.value),s=n.join(".");this.pendingChanges.set(s,{path:n,value:r}),i.style.borderColor="",this.setNestedValue(o,n,r)}catch(r){console.error("[PropertyEdit] Failed to parse input:",r),i.style.borderColor="red"}}),i}valueToString(t){if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean")return String(t);if(typeof t=="object")try{return JSON.stringify(t)}catch{return"[Object]"}return"[Unknown]"}parseValue(t){if(t==="null")return null;if(t==="undefined")return;if(t==="true")return!0;if(t==="false")return!1;if(t==="")return null;const n=Number(t);if(!isNaN(n)&&t.trim()!=="")return n;try{return JSON.parse(t)}catch{return t}}getNestedValue(t,n){if(!this.isRecord(t))return;let o=t;const i=n.filter(r=>r!=="Base Properties");for(const r of i){if(o==null)return;const s=o[r];if(this.isRecord(s))o=s;else return s}return o}setNestedValue(t,n,o){if(!this.isRecord(t))return;let i=t;const r=n.filter(u=>u!=="Base Properties");for(let u=0;u<r.length-1;u++){const c=r[u];if(!c)continue;(i[c]===null||i[c]===void 0)&&(i[c]={});const d=i[c];if(this.isRecord(d))i=d;else{i[c]={};const h=i[c];this.isRecord(h)&&(i=h)}}const s=r[r.length-1];s!==void 0&&(i[s]=o)}isPlainObject(t){return t===null||typeof t!="object"||t instanceof Image||t instanceof HTMLElement||Array.isArray(t)?!1:t.constructor===Object}update(){}draw(){}};a(at,"PropertyEdit");let De=at;function Es(e){try{const t=JSON.parse(e),n=Cs(t);return n.success?{success:!0,config:n.data}:{success:!1,error:`Config validation failed: ${n.error.issues.map(i=>`${i.path.join(".")}: ${i.message}`).join("; ")}`}}catch(t){return t instanceof SyntaxError?{success:!1,error:`Invalid JSON: ${t.message}`}:{success:!1,error:`Unknown error: ${String(t)}`}}}a(Es,"loadConfigFromJSON");function Os(e){const t=localStorage.getItem(e);return t?Es(t):{success:!1,error:"not_found"}}a(Os,"loadConfigFromLocalStorage");function As(e,t,n,o){if(t<0||t>=e.objects.length)return e;const i=[...e.objects],r=i[t];if(!r)return e;const u=Object.entries(r)[0];if(!u)return e;const[c,d]=u;if(!c||!d)return e;const h={...d,positionOnCanvas:{pxFromCanvasLeft:n,pxFromCanvasTop:o}};return i[t]={[c]:h},{...e,objects:i}}a(As,"updateObjectPosition");function Zs(e,t,n){return{...e,canvas:{...e.canvas,width:t,height:n}}}a(Zs,"updateCanvasDimensions");function Ts(e,t){return{...e,objects:[...e.objects,t]}}a(Ts,"addObject");function $s(e,t){return t<0||t>=e.objects.length?e:{...e,objects:e.objects.filter((n,o)=>o!==t)}}a($s,"removeObject");function Fs(e,t,n){if(t<0||t>=e.objects.length||n.size===0)return e;const o=[...e.objects],i=o[t];if(!i)return e;const s=Object.entries(i)[0];if(!s)return e;const[u,c]=s;if(!u||!c)return e;let d=JSON.parse(JSON.stringify(c));return n.forEach(({path:h,value:y})=>{if(h.length===0)return;let f=d;for(let v=0;v<h.length-1;v++){const w=h[v];w&&(f[w]===void 0&&(f[w]={}),f=f[w])}const m=h[h.length-1];m!==void 0&&(f[m]=y)}),o[t]={[u]:d},{...e,objects:o}}a(Fs,"updateObjectByIndex");const ct=class ct{constructor(t){this.changeCallbacks=[],this.saveCallback=null,this._config=t}get config(){return this._config}setConfig(t){t!==this._config&&(this._config=t,this.changeCallbacks.forEach(n=>{n(t)}),this.saveCallback&&this.saveCallback(t))}onChange(t){return this.changeCallbacks.push(t),()=>{this.changeCallbacks=this.changeCallbacks.filter(n=>n!==t)}}onSave(t){this.saveCallback=t}moveObject(t,n,o){const i=As(this._config,t,n,o);this.setConfig(i)}resizeCanvas(t,n){const o=Zs(this._config,t,n);this.setConfig(o)}updateObject(t,n){const o=Fs(this._config,t,n);this.setConfig(o)}addObject(t){const n=Ts(this._config,t);this.setConfig(n)}deleteObject(t){const n=$s(this._config,t);this.setConfig(n)}};a(ct,"ConfigManager");let Ne=ct;function He(e,t=2e3){const n=document.getElementById("toastContainer");if(!n){console.warn("[Toast] Container not found");return}const o=document.createElement("div");o.className="BoxWhichNotifiesUserOfStatusUpdates",o.textContent=e,n.appendChild(o),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},t)}a(He,"showToast");const ut=class ut{constructor(t,n){this.cache=null,this.canvas=t;const o=t.getContext("2d");if(!o)throw new Error("Failed to get 2D context");this.ctx=o,this.deserializer=n}deserializeObjects(t){const n=[];for(let o=0;o<t.objects.length;o++){const i=t.objects[o];if(i)try{n.push(this.deserializer(i,o))}catch(r){console.error("[CanvasRenderer] Deserialization failed:",i,r)}}return n}update(t,n){var i;((i=this.cache)==null?void 0:i.config)!==t&&(this.cache={config:t,objects:this.deserializeObjects(t)});const o=this.cache;if(!o)throw new Error("Cache should be initialized");for(let r=0;r<o.objects.length;r++){const s=o.objects[r];s&&s.update(n)}return o.objects}render(t,n){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const i=t.map((r,s)=>({obj:r,idx:s})).sort((r,s)=>r.obj.config.layerLevel-s.obj.config.layerLevel);for(const{obj:r,idx:s}of i)s!==n&&r&&(this.ctx.setTransform(1,0,0,1,r.config.positionOnCanvas.pxFromCanvasLeft,r.config.positionOnCanvas.pxFromCanvasTop),r.draw(this.canvas,this.ctx),this.ctx.closePath())}renderOverlay(t){t(this.canvas,this.ctx)}renderDebugHitboxes(t,n){for(let o=0;o<t.length;o++){if(n&&!n.has(o))continue;const i=t[o];i&&(this.ctx.setTransform(1,0,0,1,i.config.positionOnCanvas.pxFromCanvasLeft,i.config.positionOnCanvas.pxFromCanvasTop),this.ctx.beginPath(),this.ctx.strokeStyle="#FF00FF",this.ctx.lineWidth=1,this.ctx.rect(0,0,i.config.hitboxSize.widthInPx,i.config.hitboxSize.lengthInPx),this.ctx.stroke())}}renderSelectionBox(t,n,o,i){const r=Math.min(t,o),s=Math.max(t,o),u=Math.min(n,i),c=Math.max(n,i);this.ctx.setTransform(1,0,0,1,0,0),this.ctx.beginPath(),this.ctx.strokeStyle="rgba(0, 120, 255, 0.8)",this.ctx.fillStyle="rgba(0, 120, 255, 0.1)",this.ctx.lineWidth=2,this.ctx.rect(r,u,s-r,c-u),this.ctx.fill(),this.ctx.stroke()}};a(ut,"CanvasRenderer");let Be=ut;const lt=class lt{constructor(){this.selectedObjectIndices=new Set,this.draggingOffset=new re(0,0),this.gridsize=10,this.editingProperties=!1,this.creationPanelActive=!1,this.dragStartPosition=null,this.lastDragPosition=null,this.disableInteractions=!1,this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1,this.onMoveObject=null,this.onDeleteObject=null,this.onShowPropertyEdit=null,this.onShowCreationPanel=null,this.onCloseEditors=null}setOnMoveObject(t){this.onMoveObject=t}setOnDeleteObject(t){this.onDeleteObject=t}setOnShowPropertyEdit(t){this.onShowPropertyEdit=t}setOnShowCreationPanel(t){this.onShowCreationPanel=t}setOnCloseEditors(t){this.onCloseEditors=t}setEditingProperties(t){this.editingProperties=t}setCreationPanelActive(t){this.creationPanelActive=t}setDisableInteractions(t){this.disableInteractions=t}getSelectedIndices(){return this.selectedObjectIndices}isSelected(t){return this.selectedObjectIndices.has(t)}clearSelection(){this.selectedObjectIndices.clear(),this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1}deleteSelectedObjects(){if(!this.onDeleteObject)return;const t=Array.from(this.selectedObjectIndices).sort((n,o)=>o-n);for(const n of t)this.onDeleteObject(n);this.clearSelection()}update(t){if(this.disableInteractions)return!1;if(b.clicks[0]===!0){let n=null;for(let o=t.length-1;o>=0;o--){const i=t[o];if(!i)continue;const{positionOnCanvas:r,hitboxSize:s}=i.config;if(!(!r||!s)&&b.x>r.pxFromCanvasLeft&&b.y>r.pxFromCanvasTop&&b.x<r.pxFromCanvasLeft+s.widthInPx&&b.y<r.pxFromCanvasTop+s.lengthInPx){n=o;break}}if(n!==null){const o=t[n],{positionOnCanvas:i}=o.config;this.selectedObjectIndices.has(n)?i&&(this.draggingOffset.x=i.pxFromCanvasLeft-b.x,this.draggingOffset.y=i.pxFromCanvasTop-b.y,this.dragStartPosition={x:i.pxFromCanvasLeft,y:i.pxFromCanvasTop}):(this.selectedObjectIndices.clear(),this.selectedObjectIndices.add(n),i&&(this.draggingOffset.x=i.pxFromCanvasLeft-b.x,this.draggingOffset.y=i.pxFromCanvasTop-b.y,this.dragStartPosition={x:i.pxFromCanvasLeft,y:i.pxFromCanvasTop})),this.isSelectingBox=!1}else this.selectedObjectIndices.clear(),this.selectionBoxStart={x:b.x,y:b.y},this.selectionBoxEnd={x:b.x,y:b.y},this.isSelectingBox=!0,this.dragStartPosition=null,this.lastDragPosition=null}if(b.buttons[0]===!0){if(this.isSelectingBox&&this.selectionBoxStart)this.selectionBoxEnd={x:b.x,y:b.y};else if(this.selectedObjectIndices.size>0&&this.dragStartPosition){const n=Math.round((b.x+this.draggingOffset.x)/this.gridsize)*this.gridsize,o=Math.round((b.y+this.draggingOffset.y)/this.gridsize)*this.gridsize;this.lastDragPosition={x:n,y:o}}}if(b.buttons[0]===!1){if(this.isSelectingBox&&this.selectionBoxStart&&this.selectionBoxEnd){const n=Math.min(this.selectionBoxStart.x,this.selectionBoxEnd.x),o=Math.max(this.selectionBoxStart.x,this.selectionBoxEnd.x),i=Math.min(this.selectionBoxStart.y,this.selectionBoxEnd.y),r=Math.max(this.selectionBoxStart.y,this.selectionBoxEnd.y);this.selectedObjectIndices.clear();for(let s=0;s<t.length;s++){const u=t[s];if(!u)continue;const{positionOnCanvas:c,hitboxSize:d}=u.config;if(!c||!d)continue;const h=c.pxFromCanvasLeft,y=h+d.widthInPx,f=c.pxFromCanvasTop,m=f+d.lengthInPx;y<n||h>o||m<i||f>r||this.selectedObjectIndices.add(s)}this.selectionBoxStart=null,this.selectionBoxEnd=null,this.isSelectingBox=!1}else if(this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition){const n=this.lastDragPosition.x-this.dragStartPosition.x,o=this.lastDragPosition.y-this.dragStartPosition.y;if((n!==0||o!==0)&&this.onMoveObject)for(const i of this.selectedObjectIndices){const r=t[i];if(!r)continue;const{positionOnCanvas:s}=r.config;if(!s)continue;const u=s.pxFromCanvasLeft+n,c=s.pxFromCanvasTop+o;this.onMoveObject(i,u,c)}this.dragStartPosition=null,this.lastDragPosition=null}}if(b.clicks[2]===!0){let n=null;for(let o=t.length-1;o>=0;o--){const i=t[o];if(!i)continue;const{positionOnCanvas:r,hitboxSize:s}=i.config;if(!(!r||!s)&&b.x>r.pxFromCanvasLeft&&b.y>r.pxFromCanvasTop&&b.x<r.pxFromCanvasLeft+s.widthInPx&&b.y<r.pxFromCanvasTop+s.lengthInPx){n=o;break}}n!==null&&!this.editingProperties&&!this.creationPanelActive?this.onShowPropertyEdit&&this.onShowPropertyEdit(t[n]):n===null&&!this.editingProperties&&!this.creationPanelActive&&this.onShowCreationPanel&&this.onShowCreationPanel()}return!1}hasSelection(){return this.selectedObjectIndices.size>0}getSelectionBox(){return this.isSelectingBox&&this.selectionBoxStart&&this.selectionBoxEnd?{startX:this.selectionBoxStart.x,startY:this.selectionBoxStart.y,endX:this.selectionBoxEnd.x,endY:this.selectionBoxEnd.y}:null}getDragPreview(){return this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition?{deltaX:this.lastDragPosition.x-this.dragStartPosition.x,deltaY:this.lastDragPosition.y-this.dragStartPosition.y}:null}getDragOriginalPosition(){return this.selectedObjectIndices.size>0&&this.dragStartPosition&&this.lastDragPosition?{x:this.dragStartPosition.x,y:this.dragStartPosition.y}:null}};a(lt,"UserEditModeInteractionsController");let Me=lt;dn();const js={LinearInputIndicator:Z,PlanarInputIndicator:ke,Text:M,Image:Ge,WebEmbed:Je};window.gamepads=null;window.keyboard=oe;window.mouse=b;window.addEventListener("load",function(){const e=document.getElementById("canvas");if(!e)throw new Error("Canvas element not found");if(!e.getContext("2d"))throw new Error("Could not get 2D context");e.width=window.innerWidth,e.height=window.innerHeight;const n=new Ne({canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:[]}),o=new Be(e,Le),i=new Me;if(window.electronAPI){const p=window.electronAPI.isAppInReadonlyClickthroughMode();i.setDisableInteractions(p),console.log("[default.ts] Readonly/clickthrough mode:",p)}const r=Ns(e),s=Bs(e,n,i);i.setOnMoveObject((p,k,F)=>{n.moveObject(p,k,F)}),i.setOnDeleteObject(p=>{s.deleteObjectAtIndex(p)}),i.setOnShowPropertyEdit(p=>{const k=p.objArrayIdx,O=n.config.objects[k];if(!O){console.error("[PropertyEdit] Could not find config for object at index",k);return}s.propertyEditor.showPropertyEdit(O,p,k,n,()=>{s.deleteObjectAtIndex(k)}),i.setEditingProperties(!0)}),i.setOnShowCreationPanel(()=>{s.showBothPanels()}),i.setOnCloseEditors(()=>{s.hideBothPanels()}),e.addEventListener("contextmenu",p=>{if(p.preventDefault(),window.electronAPI&&window.electronAPI.isAppInReadonlyClickthroughMode())return;let k=!1;const O=n.config.objects.map((x,$)=>Le(x,$));for(let x=0;x<O.length;x++){const $=O[x];if($){const{positionOnCanvas:j,hitboxSize:L}=$.config;if(j&&L&&p.offsetX>j.pxFromCanvasLeft&&p.offsetY>j.pxFromCanvasTop&&p.offsetX<j.pxFromCanvasLeft+L.widthInPx&&p.offsetY<j.pxFromCanvasTop+L.lengthInPx){k=!0;break}}}k||s.showBothPanels()});const c=Ds()||r;c.canvas&&(e.width=c.canvas.width,e.height=c.canvas.height),n.onSave(p=>{Ls(p),He("Saved")}),n.setConfig(c);let d=[];function h(){o.render(d);const p=i.getSelectionBox();p&&o.renderSelectionBox(p.startX,p.startY,p.endX,p.endY);const k=i.getSelectedIndices();i.hasSelection()&&o.renderDebugHitboxes(d,k);const F=i.getDragPreview();if(F&&k.size>0)for(const O of k){const x=d[O];if(!x)continue;const{positionOnCanvas:$}=x.config;$&&o.renderOverlay((j,L)=>{L.save(),L.globalAlpha=.5,L.setTransform(1,0,0,1,$.pxFromCanvasLeft+F.deltaX,$.pxFromCanvasTop+F.deltaY),x.draw(j,L,!0),L.restore()})}}a(h,"frameUpdate");let y=0;function f(p){const k=(p-y)/1e3;y=p;let F=!1;if(window.gamepads=ln(),!window._gamepadDebugLogged){const x=window.gamepads;let $=0;for(let j=0;j<x.length;j++)x[j]&&$++;$>0&&(window._gamepadDebugLogged=!0)}const O=n.config;d=o.update(O,k),F=!0,i.update(d),w(),F&&h(),b.update(k),window.requestAnimationFrame(f)}a(f,"updateLoop"),window.requestAnimationFrame(f),h();function m(){e.width=window.innerWidth,e.height=window.innerHeight,h()}a(m,"resizeCanvas"),window.addEventListener("resize",m);const v=document.getElementById("deleteSelectedSnackbar");function w(){v&&(i.hasSelection()?v.style.display="block":v.style.display="none")}a(w,"updateDeleteSnackbarVisibility"),document.addEventListener("keydown",p=>{if(p.key==="Backspace"&&i.hasSelection()){p.preventDefault();const k=i.getSelectedIndices().size,F=k===1?"Delete this object?":`Delete ${k} objects?`;confirm(F)&&i.deleteSelectedObjects()}})},!1);const pe="analogKeyboardOverlay_sceneConfig";function Ls(e){try{const t={version:"95b3aa0",...e};localStorage.setItem(pe,JSON.stringify(t))}catch(t){console.error("[Config] Failed to save:",t)}}a(Ls,"saveSceneConfig");function Ds(){try{const e=localStorage.getItem(pe);if(!e)return null;const t=JSON.parse(e);if(t.version!=="95b3aa0")return console.warn(`[Config] Version mismatch: stored=${t.version}, current=95b3aa0. Clearing localStorage.`),localStorage.removeItem(pe),He("Config version changed - reset to defaults"),null;const n=Os(pe);return n.success?n.config:(console.error("[Config] Validation failed:",n.error),console.error("[Config] Raw data from localStorage:",e),null)}catch(e){return console.error("[Config] Failed to load:",e),null}}a(Ds,"loadSceneConfig");function Ns(e){const t=[{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:20},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 1: Left Stick + WASD + Mouse - WITH radial compensation vs WITHOUT",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:45},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Move diagonally: LEFT shows ~100% (compensated), RIGHT shows ~70% (raw circular)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{PlanarInputIndicator:ke.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:80},input:{xAxes:{0:!0},yAxes:{1:!0}}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:240,pxFromCanvasTop:80},input:{keyboard:{keyCode:"KeyW"},mouse:{button:3,wheel:"up"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},processing:{radialCompensationAxis:0},display:{text:"W"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:150,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyA"},mouse:{button:0},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},processing:{radialCompensationAxis:1},display:{text:"A"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:250,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyS"},mouse:{button:4,wheel:"down"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},processing:{radialCompensationAxis:0},display:{text:"S"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:350,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyD"},mouse:{button:1},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},processing:{radialCompensationAxis:1},display:{text:"D"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:740,pxFromCanvasTop:80},input:{keyboard:{keyCode:"KeyW"},mouse:{button:3,wheel:"up"},gamepad:{stick:{type:"left",axis:"Y",direction:"negative"}}},display:{text:"W"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:650,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyA"},mouse:{button:0},gamepad:{stick:{type:"left",axis:"X",direction:"negative"}}},display:{text:"A"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:750,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyS"},mouse:{button:4,wheel:"down"},gamepad:{stick:{type:"left",axis:"Y",direction:"positive"}}},display:{text:"S"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:850,pxFromCanvasTop:180},input:{keyboard:{keyCode:"KeyD"},mouse:{button:1},gamepad:{stick:{type:"left",axis:"X",direction:"positive"}}},display:{text:"D"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:20},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 1B: Right Gamepad Stick (IJKL)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:45},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Same as Test 1, but using right stick",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1150,pxFromCanvasTop:80},input:{gamepad:{stick:{type:"right",axis:"Y",direction:"negative"}}},processing:{radialCompensationAxis:2},display:{text:"I"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1050,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"X",direction:"negative"}}},processing:{radialCompensationAxis:3},display:{text:"J"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1150,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"Y",direction:"positive"}}},processing:{radialCompensationAxis:2},display:{text:"K"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:1250,pxFromCanvasTop:180},input:{gamepad:{stick:{type:"right",axis:"X",direction:"positive"}}},processing:{radialCompensationAxis:3},display:{text:"L"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:300},hitboxSize:{widthInPx:800,lengthInPx:30},text:"TEST 3: Gamepad Buttons (Digital)",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{Text:M.parse({positionOnCanvas:{pxFromCanvasLeft:20,pxFromCanvasTop:325},hitboxSize:{widthInPx:800,lengthInPx:30},text:"Face buttons (A/B/X/Y) - digital on/off, no pressure sensitivity",textStyle:{textAlign:"left",font:"20px Lucida Console"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:150,pxFromCanvasTop:360},input:{gamepad:{button:{index:0}}},display:{text:"A"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:250,pxFromCanvasTop:360},input:{gamepad:{button:{index:1}}},display:{text:"B"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:350,pxFromCanvasTop:360},input:{gamepad:{button:{index:2}}},display:{text:"X"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:450,pxFromCanvasTop:360},input:{gamepad:{button:{index:3}}},display:{text:"Y"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:550,pxFromCanvasTop:360},input:{gamepad:{button:{index:6}}},display:{text:"LT"}})},{LinearInputIndicator:Z.parse({positionOnCanvas:{pxFromCanvasLeft:650,pxFromCanvasTop:360},input:{gamepad:{button:{index:7}}},display:{text:"RT"}})}];return{canvas:{width:e.width,height:e.height,backgroundColor:"transparent"},objects:t}}a(Ns,"createDefaultConfig");function Bs(e,t,n){const o=new De;function i(){n.setCreationPanelActive(!0),o.showCanvasConfig(t.config,e,w=>{t.setConfig(w)});const f=document.getElementById("leftPanel"),m=document.getElementById("rightPanel");f&&(f.hidden=!1),m&&(m.hidden=!1);const v=document.getElementById("containerForPossibleEditorWindows");v&&(v.hidden=!1),s(),n.setEditingProperties(!0)}a(i,"showBothPanels");function r(){try{o.hidePropertyEdit()}finally{n.setCreationPanelActive(!1),n.setEditingProperties(!1)}const f=document.getElementById("leftPanel"),m=document.getElementById("rightPanel");f&&(f.hidden=!0),m&&(m.hidden=!0);const v=document.getElementById("containerForPossibleEditorWindows");v&&(v.hidden=!0)}a(r,"hideBothPanels");function s(){const f=document.getElementById("objectCreationContent");f&&(f.innerHTML="",Object.entries(ne).forEach(([m,v])=>{const w=document.createElement("div");w.className="objectTypeSection";const p=document.createElement("p");p.className="sectionHeader",p.textContent=m,w.appendChild(p);const k=document.createElement("button");k.className="createObjectBtn ButtonWhichUserCanPressToUpdateState",k.setAttribute("data-type",m),k.textContent=`Create ${m}`,w.appendChild(k),f.appendChild(w)}))}a(s,"populateCreationPanel");function u(f){if(!(f in ne)){console.error("[Spawn] Unknown type:",f,"Available:",Object.keys(ne));return}const m=js[f];if(!m){console.error(`No schema found for ${f}`);return}const v=m.parse({}),w={[f]:v};t.addObject(w)}a(u,"createObject");function c(f){var w;const m=t.config;if(f<0||f>=m.objects.length)return;const v=m.objects[f];if(v)try{const p=Le(v,f);(w=p.cleanup)==null||w.call(p)}catch(p){console.error("[Delete] Failed to deserialize for cleanup:",p)}t.deleteObject(f)}a(c,"deleteObjectAtIndex");const d=document.getElementById("objectCreationContent");d&&d.addEventListener("click",f=>{const m=f.target;if(m.classList.contains("createObjectBtn")){const v=m.getAttribute("data-type");v&&(u(v),r())}});const h=document.getElementById("doneContainerForPossibleEditorWindows");h&&h.addEventListener("click",()=>{r()});const y=document.getElementById("toggleReadonlyModeButton");return y&&window.electronAPI&&(y.style.display="flex",y.addEventListener("click",()=>{confirm(`Switch to readonly clickthrough mode?

You will need Task Manager to close the app.`)&&(n.setDisableInteractions(!0),window.electronAPI.toggleReadonlyMode(),He("Readonly mode active - use Task Manager to close"),r())})),{propertyEditor:o,deleteObjectAtIndex:c,showBothPanels:i,hideBothPanels:r}}a(Bs,"createUIHelpers");
